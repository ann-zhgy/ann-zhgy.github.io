<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ann-zhgy</title>
  
  <subtitle>blog 学习笔记</subtitle>
  <link href="http://ann-zhgy.github.io/atom.xml" rel="self"/>
  
  <link href="http://ann-zhgy.github.io/"/>
  <updated>2023-11-15T06:22:06.592Z</updated>
  <id>http://ann-zhgy.github.io/</id>
  
  <author>
    <name>ann-zhgy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>一致哈希算法</title>
    <link href="http://ann-zhgy.github.io/2023/10/792acd6.html"/>
    <id>http://ann-zhgy.github.io/2023/10/792acd6.html</id>
    <published>2023-10-12T05:00:17.000Z</published>
    <updated>2023-11-15T06:22:06.592Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>场景：数据分区存储</p></blockquote><span id="more"></span><h1 id="哈希算法">哈希算法</h1><p>通过哈希算法，每个 key 都可以寻址到对应的服务器，比如，查询 key 是key-01，计算公式为 hash (key-01) %3，经过计算寻址到了编号为 1 的服务器节点 A</p><p>但如果服务器数量发生变化，基于新的服务器数量来执行哈希算法的时候，就会出现路由寻址失败的情况，Proxy 无法找到之前寻址到的那个服务器节点，这是为什么呢？</p><p>想象一下，假如 3 个节点不能满足业务需要了，这时我们增加了一个节点，节点的数量从 3 变化为 4，那么之前的 hash (key-01)% 3 = 1，就变成了 hash (key-01) % 4 =X，因为取模运算发生了变化，所以这个 X 大概率不是 1（可能 X 为 2），这时你再查询，就会找不到数据了，因为 key-01 对应的数据，存储在节点 A 上，而不是节点 B</p><p>同样的道理，如果我们需要下线 1 个服务器节点（也就是缩容），也会存在类似的可能查询不到数据的问题。</p><p>使用哈希算法选址时，如果数据节点的数量变化了，就必须对所有已经有的数据进行rehash，使数据可以按照规则分布在各个节点上，但是在生产中，数据迁移的成本是很高的</p><h1 id="一致性哈希算法寻址">一致性哈希算法寻址</h1><p>一致哈希算法也用了取模运算，但与哈希算法不同的是，哈希算法是对节点的数量进行取模运算，而一致哈希算法是对2^32进行取模运算。你可以想象下，一致哈希算法，将整个哈希值空间组织成一个虚拟的圆环，各个节点映射在圆环的不同位置</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231012143647" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231012143647.png" style="width: 100%;"></p></div><p>当需要对指定 key 的值进行读写的时候，你可以通过下面 2 步进行寻址：</p><ul><li>将 key 作为参数执行 c-hash () 计算哈希值，并确定此 key 在环上的位置；</li><li>从这个位置沿着哈希环顺时针 “行走”，遇到的第一节点就是 key 对应的节点。</li></ul><p>当我们新添加了一个节点 4，放在了节点 2 和节点 3 中间，那么我们仅需要平衡节点 3 的数据即可，即：仅需要对节点 3 的数据进行迁移</p><p>所以：使用了一致哈希算法后，扩容或缩容的时候，都只需要重定位环空间中的一小部分数据。<strong>也就是说，一致哈希算法具有较好的容错性和可扩展性。</strong></p><h1 id="虚拟节点">虚拟节点</h1><p>一致性哈希算法并不会保证节点均匀的分布在哈希环上，所以可能会带来一个问题：客户端访问请求集中在少数的节点上，出现了有些机器高负载，有些机器低负载现象。</p><p>如果想要节点在哈希环上分布的均匀，就需要有足够多的节点，节点越多，在哈希环上分布的越均匀，但是实际上我们并不会有那么多的节点，所以就引入了<strong>虚拟节点</strong>。</p><p>具体做法是：<strong>不再将真实节点映射到哈希环上，而是将虚拟节点映射到哈希环上，并将虚拟节点映射到实际节点，所以这里有「两层」映射关系</strong>。</p><p>比如对每个节点分别设置 3 个虚拟节点：</p><ul><li>对节点 A 加上编号来作为虚拟节点：A-01、A-02、A-03</li><li> 对节点 B 加上编号来作为虚拟节点：B-01、B-02、B-03</li><li> 对节点 C 加上编号来作为虚拟节点：C-01、C-02、C-03</li></ul><p>引入虚拟节点后，原本哈希环上只有 3 个节点的情况，就会变成有 9个虚拟节点映射到哈希环上，哈希环上的节点数量多了 3 倍。</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231012150947" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231012150947.png" style="width: 100%;"></p></div><p>当节点的数量多了之后，哈希环将不得不分布的更加均匀。这时候，如果有访问请求寻址到「A-01」这个虚拟节点，接着再通过「A-01」虚拟节点找到真实节点A，这样请求就能访问到真实节点 A 了。</p><p>上面为了方便你理解，每个真实节点仅包含 3个虚拟节点，这样能起到的均衡效果其实很有限。而在实际的工程中，虚拟节点的数量会大很多，比如Nginx 的一致性哈希算法，每个权重为 1 的真实节点就含有 160个虚拟节点。</p><p>另外，虚拟节点除了会提高节点的均衡度，还会提高系统的稳定性。<strong>当节点变化时，会有不同的节点共同分担系统的变化，因此稳定性更高</strong>。</p><p>比如，当某个节点被移除时，对应该节点的多个虚拟节点均会移除，而这些虚拟节点按顺时针方向的下一个虚拟节点，可能会对应不同的真实节点，即这些不同的真实节点共同分担了节点变化导致的压力。</p><p>而且，有了虚拟节点后，还可以为硬件配置更好的节点增加权重，比如对权重更高的节点增加更多的虚拟机节点即可。</p><p>因此，<strong>带虚拟节点的一致性哈希方法不仅适合硬件配置不同的节点的场景，而且适合节点规模会发生变化的场景</strong>。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;场景：数据分区存储&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Raft" scheme="http://ann-zhgy.github.io/tags/Raft/"/>
    
  </entry>
  
  <entry>
    <title>分布式算法 ——05-Raft 算法 - 分布式算法学习路径</title>
    <link href="http://ann-zhgy.github.io/2023/10/a4140eb6.html"/>
    <id>http://ann-zhgy.github.io/2023/10/a4140eb6.html</id>
    <published>2023-10-10T07:13:30.000Z</published>
    <updated>2023-11-15T06:22:06.591Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>Raft 算法是现在分布式系统开发首选的共识算法。</strong>比如：etcd、consul。<strong>从本质上说，Raft 算法是通过一切以领导者为准的方式，实现一系列值的共识和各节点日志的一致。</strong></p></blockquote><span id="more"></span><h1 id="简介">简介</h1><p>不同于 Paxos 算法直接从分布式一致性问题出发推导出来，Raft 算法则是从多副本状态机的角度提出，用于管理多副本状态机的日志复制。Raft 实现了和 Paxos 相同的功能，它将一致性分解为多个子问题:<strong>Leader 选举 (Leader election)</strong>、<strong>日志同步 (Logreplication)</strong>、<strong>安全性 (Safety)</strong>、<strong>日志压缩 (Logcompaction)</strong>、<strong>成员变更 (Membershipchange)</strong> 等。同时，Raft 算法使用了更强的假设来减少了需要考虑的状态，使之变的易于理解和实现。</p><h2 id="角色">角色</h2><p>Raft 将系统中的角色分为<code>领导者(Leader)</code>、<code>跟从者(Follower)</code> 和<code>候选人(Candidate)</code>:</p><ul><li><code>Leader</code>: 接受客户端请求，并向 Follower同步请求日志，当日志同步到大多数节点上后告诉 Follower 提交日志。</li><li><code>Follower</code>: 接受并持久化 Leader 同步的日志，在 Leader告之日志可以提交之后，提交日志。</li><li><code>Candidate</code>: Leader 选举过程中的临时角色，由 Follower转换而来，发起投票参与竞选 Leader</li></ul><p>Raft 是强领导者模型，任何时刻都只能有一个领导者，剩下的都是Follower。Followwer 是被动的，它们不会发送任何请求，只是响应来自 Leader和 Candidate 的请求</p><h2 id="角色状态转换">角色状态转换</h2><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231010160738" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231010160738.png" style="width: 100%;"></p></div><p>Follower 只响应其他服务器的请求。如果 Follower 超时没有收到 Leader 的消息，它会成为一个 Candidate 并且开始一次 Leader 选举。收到大多数服务器投票的 Candidate 会成为新的 Leader。Leader 在宕机之前会一直保持 Leader 的状态。</p><h2 id="任期">任期</h2><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231010160712" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231010160712.png" style="width: 100%;"></p></div><p>Raft 算法将时间分为一个个的任期 (term)，每一个 term 的开始都是 Leader 选举。在成功选举 Leader 之后，Leader 会在整个 term 内管理整个集群。如果 Leader 选举失败，该 term 就会因为没有 Leader 而结束。</p><p>Raft 算法保证一个任期内最多只有一个 Leader</p><h2 id="日志">日志</h2><ul><li><code>entry</code>：每一个事件成为 entry，只有 Leader 可以创建entry。entry 的内容为 <code>&lt;term,index,cmd&gt;</code>，其中 cmd是可以应用到状态机的操作。</li><li><code>log</code>：由 entry 构成的数组，每一个 entry都有一个表明自己在 log 中的 index。只有 Leader 才可以改变其他节点的log。entry 总是先被 Leader 添加到自己的 log数组中，然后再发起共识请求，获得同意后才会被 Leader提交给状态机。Follower 只能从 Leader 获取新日志和当前的commitIndex，然后把对应的 entry 应用到自己的状态机中。</li></ul><h2 id="raft-和-multi-paxos-的异同">Raft 和 Multi Paxos 的异同</h2><h3 id="相似概念">相似概念</h3><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231010162523" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231010162523.png" style="width: 100%;"></p></div><h3 id="不同概念">不同概念</h3><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20231010162559" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20231010162559.png" style="width: 100%;"></p></div><h1 id="leader-选举">Leader 选举</h1><p>Raft 使用心跳 (heartbeat) 来触发 Leader 选举。当服务器启动时，初始化为Follower。Leader 向所有 Followers 周期性发送 heartbeat。如果 Follower在选举超时时间内没有收到 Leader 的heartbeat，就会等待一段随机的时间后发起一次 Leader 选举。</p><p>Follower 将当前 term 加一然后转换为Candidate。它首先给自己投票并且给集群中的其他服务器发送 RequestVoteRPC。结果有以下几种情况：</p><ul><li>赢得多数选票，成功选举为 Leader</li><li> 收到了 Leader 的消息，表示有其他节点成为 Leader</li><li> 没有收到服务器赢得多数的选票，Leader选举失败，等待选举时间超时并进入下一轮选举</li></ul><p>选举出 Leader 后，Leader 通过定期向所有 Followers发送心跳信息维持其统治。若 Follower 一段时间未收到 Leader 的心跳则认为Leader 可能已经挂了，再次发起 Leader 选举过程。</p><h1 id="日志同步">日志同步</h1><p>Leader 选出后，就开始接收客户端的请求。</p><p>Leader 收到客户端请求后，会生成一个 entry，包含<code>&lt;index,term,cmd&gt;</code>，在将这个 entry添加到自己的日志末尾后，向所有的节点广播该 entry，要求其他服务器复制这条entry。如果 Follower 接受该 entry，则会将 entry添加到自己的日志后面，同时返回给 Leader 同意。如果 Leader收到了多数的成功响应，Leader 会将这个 entry应用到自己的状态机中，之后可以称为这个 entry 是 committed的，并且向客户端返回执行结果。</p><p>Raft 保证以下两个性质：</p><ul><li>在两个日志里，有两个 entry 拥有相同的 index 和term，那么他们一定拥有相同的 cmd</li><li> 在两个日志里，有两个 entry 拥有相同的 index 和 term，那么他们前面的entry 也一定相同</li></ul><p>通过 “仅有 Leader 可以生成entry” 来保证第一个性质，第二个性质需要一致性检查来进行保证。</p><p>一般情况下，Leader 和 Follower 的日志保持一致，Leader的崩溃会导致日志不一样，这样一致性检查会产生失败。Leader 通过强制Follower 复制自己的日志来处理日志的不一致。</p><p>这就意味着，在 Follower 上的冲突日志会被领导者的日志覆盖。为了使得Follower 的日志和自己的日志一致，Leader 需要找到 Follower与它日志一致的地方，然后删除 Follower在该位置之后的日志，接着把这之后的日志发送给 Follower。</p><p><code>Leader</code> 给每一个 <code>Follower</code> 维护了一个<code>nextIndex</code>，它表示 <code>Leader</code>将要发送给该追随者的下一条日志条目的索引。当一个 <code>Leader</code>开始掌权时，它会将 <code>nextIndex</code>初始化为它的最新的日志条目索引数 + 1。如果一个 <code>Follower</code>的日志和 <code>Leader</code> 的不一致，<code>AppendEntries</code>一致性检查会在下一次 <code>AppendEntries RPC</code>时返回失败。在失败之后，<code>Leader</code> 会将 <code>nextIndex</code>递减然后重试 <code>AppendEntries RPC</code>。最终 <code>nextIndex</code>会达到一个 <code>Leader</code> 和 <code>Follower</code>日志一致的地方。这时，<code>AppendEntries</code>会返回成功，<code>Follower</code>中冲突的日志条目都被移除了，并且添加所缺少的上了 <code>Leader</code>的日志条目。一旦 <code>AppendEntries</code>返回成功，<code>Follower</code> 和 <code>Leader</code>的日志就一致了，这样的状态会保持到该任期结束。</p><h1 id="日志压缩">日志压缩</h1><p>在实际的系统中，不能让日志无限增长，否则系统重启会消耗很长的时间进行回放，从而影响可用性。Raft采用对整个系统进行 snapshot 来解决，snapshot 之前的日志都可以丢弃</p><p>每个副本独立的对自己的系统状态进行snapshot，并且对已经提交的日志记录进行 snapshot</p><p>Snapshot 包含以下内容：</p><ul><li>日志元数据：最后一条已经提交的 log entry 的 log index 和term。这两个值在 snapshot 的第一条 log entry 的 AppendEntries RPC的完整性检查的时候会被用上。</li><li>系统当前状态</li></ul><p>当 Leader 要发给某个日志落后太多的 Follower 的 logentry 被丢弃，Leader 会将 snapshot 发给 Follower。或者当新加进一台机器时，也会发送 snapshot 给它。发送 snapshot 使用 InstalledSnapshotRPC。</p><p>做 snapshot 既不要做的太频繁，否则消耗磁盘带宽，也不要做的太不频繁，否则一旦节点重启需要回放大量日志，影响可用性。推荐当日志达到某个固定的大小做一次 snapshot。</p><h1 id="安全性">安全性</h1><h2 id="选举机制">选举机制</h2><p>Leader需要保证自己存储全部已经提交的日志条目。这样才可以使日志条目只有一个流向：从Leader 流向 Follower，Leader 永远不会覆盖已经存在的日志条目。</p><p>每个 Candidate 发送 RequestVoteRPC 时，都会带上最后一个 entry的信息。所有节点收到投票信息时，会对该 entry进行比较，如果发现自己的更新，则拒绝投票给该 Candidate。</p><p>判断日志新旧的方式：如果两个日志的 term 不同，term 大的更新；如果term 相同，更长的 index 更新。</p><h2 id="节点崩溃">节点崩溃</h2><p>如果 Leader 崩溃，集群中的节点在 electionTimeout 时间内没有收到Leader的心跳信息就会触发新一轮的选主，在选主期间整个集群对外是不可用的。</p><p>如果 Follower 和 Candidate 崩溃，处理方式会简单很多。之后发送给它的RequestVoteRPC 和 AppendEntriesRPC 会失败。由于 raft的所有请求都是幂等的，所以失败的话会无限的重试。如果崩溃恢复后，就可以收到新的请求，然后选择追加或者拒绝entry。</p><h2 id="时间与可用性">时间与可用性</h2><p>raft的要求之一就是安全性不依赖于时间：系统不能仅仅因为一些事件发生的比预想的快一些或者慢一些就产生错误。为了保证上述要求，最好能满足以下的时间条件：</p><p><code>broadcastTime &lt;&lt; electionTimeout &lt;&lt; MTBF</code></p><ul><li><code>broadcastTime</code>：向其他节点并发发送消息的平均响应时间；</li><li><code>electionTimeout</code>：选举超时时间；</li><li><code>MTBF(mean time between failures)</code>：单台机器的平均健康时间；</li></ul><p><code>broadcastTime</code> 应该比<code>electionTimeout</code> 小一个数量级，为的是使<code>Leader</code> 能够持续发送心跳信息（heartbeat）来阻止<code>Follower</code> 开始选举；</p><p><code>electionTimeout</code> 也要比<code>MTBF</code> 小几个数量级，为的是使得系统稳定运行。当<code>Leader</code> 崩溃时，大约会在整个<code>electionTimeout</code> 的时间内不可用；我们希望这种情况仅占全部时间的很小一部分。</p><p>由于 <code>broadcastTime</code> 和<code>MTBF</code> 是由系统决定的属性，因此需要决定<code>electionTimeout</code> 的时间。</p><p>一般来说，broadcastTime 一般为<code>0.5～20ms</code>，electionTimeout 可以设置为<code>10～500ms</code>，MTBF 一般为一两个月。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Raft 算法是现在分布式系统开发首选的共识算法。&lt;/strong&gt;比如：etcd、consul。&lt;strong&gt;从本质上说，Raft 算法是通过一切以领导者为准的方式，实现一系列值的共识和各节点日志的一致。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Raft" scheme="http://ann-zhgy.github.io/tags/Raft/"/>
    
  </entry>
  
  <entry>
    <title>Paxos 算法</title>
    <link href="http://ann-zhgy.github.io/2023/09/5bf1141f.html"/>
    <id>http://ann-zhgy.github.io/2023/09/5bf1141f.html</id>
    <published>2023-09-22T07:39:51.000Z</published>
    <updated>2023-11-15T06:22:06.591Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Paxos 算法是分布式中非常著名的算法，在过去几十年里，它基本上是分布式共识的代名词，因为当前最常用的一批共识算法都是基于它改进的。</p></blockquote><p>Paxos 算法包含 2 个部分：</p><ul><li>一个是 BasicPaxos 算法，描述的是多节点之间如何就某个值（提案 Value）达成共识；</li><li>另一个是 Multi-Paxos 思想，描述的是执行多个 Basic Paxos实例，就一系列值达成共识。</li></ul><span id="more"></span><h1 id="basic-paxos">Basic Paxos</h1><blockquote><p>Basic Paxos算法中存在一些比较重要的概念：提案、准备（Prepare）请求、接受（Accept）请求、角色等等，其中最重要的就是 “角色”。因为角色是对 BasicPaxos 中最核心的三个功能的抽象，比如，由接受者（Acceptor）对提议的值进行投票，并存储接受的值。</p></blockquote><h2 id="三种角色">三种角色</h2><p>在 BasicPaxos 中，有提议者（Proposer）、接受者（Acceptor）、学习者（Learner）三种角色：</p><ul><li><strong>提议者（Proposer）</strong>：也可以叫做协调者（coordinator），提议者负责接受客户端的请求并发起提案。提案信息通常包括提案编号(Proposal ID) 和提议的值 (Value)。</li><li><strong>接受者（Acceptor）</strong>：也可以叫做投票员（voter），负责对提议者的提案进行投票，同时需要记住自己的投票历史。</li><li><strong>学习者（Learner）</strong>：如果有超过半数接受者就某个提议达成了共识，那么学习者就需要接受这个提议，并就该提议作出运算，然后将运算结果返回给客户端。</li></ul><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230925163959" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230925163959.png" style="width: 100%;"></p></div><blockquote><p>可以理解为人大代表 (Proposer) 在人大向其它代表 (Acceptors) 提案，通过后让老百姓 (Learner) 落实。</p></blockquote><h2 id="如何达成共识">如何达成共识？</h2><h3 id="三个阶段">三个阶段</h3><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230925175645" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230925175645.png" style="width: 100%;"></p></div><ol type="1"><li><p>准备（Parpare）阶段：提议者（Proposer）向接受者（Acceptor）发出准备（Parpare）请求，接受者（Acceptor）针对收到的准备（Parpare）请求进行承诺（Promise）</p><ol type="1"><li><code>Prepare</code>：Proposer发送提案：提议者生成全局唯一递增的提案号（Proposal ID），向所有的Acceptors 发送提案，此时 Proposer无需携带提案的内容，只需要携带提案号（Proposal ID）即可。</li><li><code>Promise</code>：Acceptors 应答提案：Acceptors接收到提案之后，做出 “两个承诺，一个应答”<ul><li>两个承诺<ul><li>不再应答提案号（Proposal ID）<strong>小于等于</strong>当前请求的Prepare 请求</li><li>不在应答提案号（Proposal ID）<strong>小于</strong>当前请求的 Propose请求</li></ul></li><li>应答：不违背以前作出的承诺下，回复已经 Accept过的提案中提案号（Proposal ID）最大的那个提案的的 Value 和 ProposalID，没有则返回空值。</li></ul></li></ol></li><li><p>接受（Accept）阶段：提议者（Proposer）收到多数投票员（Acceptors）的承诺（Promise）后，向投票员（Acceptors）发出提案（Propose）请求，投票员（Acceptors）针对收到的提议（Propose）请求进行接受（Accept）处理。</p><ol type="1"><li><code>Propose</code>：Proposer 收到多数 Acceptors 的 Promise应答后，从应答种选择提案号（Proposal ID）最大的提案的Value，作为本次要发起的提案。如果所有应答的提案 Value均为空值，则可以自己随意决定提案 Value。然后携带当前 Proposal ID，向所有Acceptors 发送 Propose 请求。</li><li><code>Accept</code>：Acceptor 收到 Propose请求后，在不违背自己之前作出的承诺下，接受并持久化当前 Proposal ID和提案 Value。</li></ol></li><li><p>学习（Learn）阶段：提议者（Proposer）在收到多数投票员（Acceptors）的Accept 之后，标志着本次 Accept 成功，决议形成，将形成的决议发送给所有学习者（Learners）。</p></li></ol><h3 id="伪代码">伪代码</h3><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230925175747" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230925175747.png" style="width: 100%;"></p></div><blockquote><p>图片引自：https://pdai.tech/md/algorithm/alg-domain-distribute-x-paxos.html#multi-paxos% E7% AE%97% E6% B3%95</p></blockquote><ol type="1"><li>获取一个 <code>Proposal ID</code> n，为了保证<code>Proposal ID</code> 唯一，可采用 时间戳 + Server ID 生成；</li><li>Proposer 向所有 Acceptors 广播 Prepare (n) 请求；</li><li>Acceptor 比较 n 和 minProposal，如果n&gt;minProposal，minProposal=n，并且将 acceptedProposal 和acceptedValue 返回；</li><li>Proposer 接收到过半数回复后，如果发现有 acceptedValue返回，将所有回复中 acceptedProposal 最大的 acceptedValue 作为本次提案的value，否则可以任意决定本次提案的 value；</li><li>到这里可以进入第二阶段，广播 Accept (n,value) 到所有节点；</li><li>Acceptor 比较 n 和 minProposal，如果n&gt;=minProposal，则 acceptedProposal=minProposal=n，acceptedValue=value，本地持久化后，返回；否则，返回minProposal。</li><li>提议者接收到过半数请求后，如果发现有返回值 result&gt;n，表示有更新的提议，跳转到 1；否则 value 达成一致。</li></ol><h3 id="basic-paxos-活锁问题">Basic Paxos 活锁问题</h3><p>当某 Proposer 提交的 Proposal 被拒绝时，可能存在因为 Acceptor承诺返回了更大编号的 Proposal，该 Proposer 提高 Proposal编号继续提交的情况。一旦出现这种情况，两个 Proposer都发现自己的编号过低转而提出更高编号的Proposal，显而易见。这会导致死循环，该现象被称为<strong>活锁</strong>。用一句通俗的话来描述<strong>活锁现象</strong>：<em>你编号高，我再比你更高，反复如此，算法永远无法结束</em>。</p><h1 id="multi-paxos">Multi-Paxos</h1><blockquote><p>Basic-Paxos可以针对某个值达成共识，一旦遇到一系列的值达成共识时就会出现问题</p><p>Multi-Paxos 是一种思想，不是算法。Multi-Paxos 算法是通过 Multi-Paxos思想实现的算法的统称（如 Raft 算法）</p></blockquote><p>Basic-Paxos在针对某个值达成共识的时候，共分为<strong>准备、接受、学习</strong>三个阶段，其实在经过前两个阶段后就已经达成共识了，如果通过执行多次Basic-Paxos 来实现一系列值的共识，会存在几个问题：</p><ul><li>如果多个提议者同时提交提案，可能出现因为提案编号冲突，在准备阶段没有提议者接受到大多数准备响应，协商失败，需要重新协商。比如：一个 5 节点的集群，如果 3 个节点作为提议者同时提案，就可能发生因为没有提议者接收大多数响应（比如 1 个提议者接收到 1 个准备响应，另外 2 个提议者分别接收到 2 个准备响应）而准备失败，需要重新协商。</li><li>准备和接受阶段需要进行很多次 RPC 通讯，耗性能、延迟大。</li></ul><h2 id="领导者">领导者</h2><p>Multi-Paxos引入了<strong>领导者</strong>角色，使<strong>领导者作为唯一的提议者</strong>，这样就不存在多个提议者同时提交的情况，即：不存在提案冲突的情况</p><ul><li>选举领导者同样可以通过 Basic Paxos 实现</li></ul><hr><blockquote><p>假设领导者是稳定的</p></blockquote><h2 id="优化-basic-paxos-执行">优化 Basic-Paxos 执行</h2><p>“当领导者处于稳定状态时，可以省掉准备阶段，直接进入接受阶段”。原来是一堆人需要商议，有了领导者之后，领导者直接拍板，就省去了准备这一阶段</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Paxos 算法
是分布式中非常著名的算法，在过去几十年里，它基本上是分布式共识的代名词，因为当前最常用的一批共识算法都是基于它改进的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Paxos 算法包含 2 个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个是 Basic
Paxos 算法，描述的是多节点之间如何就某个值（提案 Value）达成共识；&lt;/li&gt;
&lt;li&gt;另一个是 Multi-Paxos 思想，描述的是执行多个 Basic Paxos
实例，就一系列值达成共识。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Paxos" scheme="http://ann-zhgy.github.io/tags/Paxos/"/>
    
  </entry>
  
  <entry>
    <title>CAP 理论 &amp; ACID 理论 &amp; BASE 理论</title>
    <link href="http://ann-zhgy.github.io/2023/09/765e4d48.html"/>
    <id>http://ann-zhgy.github.io/2023/09/765e4d48.html</id>
    <published>2023-09-12T07:33:25.000Z</published>
    <updated>2023-11-15T06:22:06.591Z</updated>
    
    <content type="html"><![CDATA[<h1 id="cap-理论">CAP 理论</h1><blockquote><p>CAP 理论是一个很好的思考框架，它对分布式系统的特性做了高度抽象，比如抽象成了一致性、可用性和分区容错性，并对特性间的冲突（也就是 CAP 不可能三角）做了总结。一旦掌握它，你就像拥有了引路人，自然而然就能根据业务场景的特点进行权衡，设计出适合的分区容错一致性模型CAP是一个<strong>学术性理论</strong>，它并没有考虑网络延时等问题，之后的 <strong>BASE 定理</strong>就是一个工程性的理论了</p></blockquote><span id="more"></span><h2 id="cap三指标">CAP 三指标</h2><blockquote><p><strong>CAP 是对数据瞬时状态的解释</strong></p></blockquote><ul><li>一致性（Consistency）：客户端的每次操作，不管访问哪个节点，要么读到的是同一份数据，要么读取失败。强调的是数据正确，即对客户端而言，每次读都能读取到最新写入的数据</li><li>可用性（Availability）：任何来自客户端的请求，必定能得到响应数据。<strong>这个指标强调的是服务可用，但不保证数据正确。</strong></li><li>分区容错性（PartitionTolerance）：当我们的系统使用分布式部署时，那个我们的数据（请求机器请求处理期间产生的数据）必定会在不同的节点进行处理，这个时候数据就产生了<strong>网络分区</strong>，即：处理数据的节点的数据必定会与其他节点不一致，而对于这种现象，我们必须容忍，没办法处理。</li></ul><h2 id="cap不可能全部满足">CAP 不可能全部满足</h2><p>CAP 不能三角最初是埃里克・布鲁尔（EricBrewer）基于自己的工程实践，提出的一个猜想，后被赛斯・吉尔伯特（SethGilbert）和南希・林奇（Nancy Lynch）证明，证明过程可以参考论文<a href="https://dl.acm.org/citation.cfm?id=564601">《Brewer’s conjectureand the feasibility of consistent, available, partition-tolerant webservices》</a></p><p>需要注意：证明过程中的 <strong>一致性（Consistency）</strong>限定了是原子一致性</p><ul><li>基于对 CAP 三指标的含义的理解，我们也可以很容易的证明 CAP 不可能同时满足：单体应用可以同时满足CA；分布式部署的应用一定存在数据分区现象，所以必须容忍 P 的存在</li></ul><h2 id="如何使用cap理论">如何使用 CAP 理论</h2><ul><li><strong>作为分布式系统，分区容错性（P）是一定存在并且已经实现的</strong>。</li><li>当选择了一致性（C）的时候，一定会读到最新的数据，不会读到旧数据，但如果因为消息丢失、延迟过高发生了网络分区，那么这个时候，当集群节点接收到来自客户端的读请求时，为了不破坏一致性，可能会因为无法响应最新数据，而返回出错信息。</li><li>当选择了可用性（A）的时候，系统将始终处理客户端的查询，返回特定信息，如果发生了网络分区，一些节点将无法返回最新的特定信息，它们将返回自己当前的相对新的信息。</li></ul><p>至于如何选择：如果读操作会读到旧数据，影响到了系统运行或业务运行（也就是说会有负面的影响），推荐选择 C，否则选 A。</p><h1 id="acid-理论">ACID 理论</h1><blockquote><p>此为事务的性质要求：原子性（atomicity，或称不可分割性）、一致性（consistency）、隔离性（isolation，又称独立性）、持久性（durability）。</p></blockquote><p>在单机上实现并不难，比如可以通过锁、时间序列等机制保障操作的顺序执行，让系统实现 ACID 特性。但是设计分布式系统，就会比较难…… 其实，<strong>ACID 理论是对事务特性的抽象和总结，方便我们实现事务。即：如果实现了操作的 ACID 特性，那么就实现了事务。</strong></p><h2 id="分布式事务">分布式事务</h2><p>还是以苏秦为例，假如苏秦需要和赵魏韩确认是否可以攻打秦国</p><h3 id="二阶段提交">二阶段提交</h3><ol type="1"><li>苏秦发送消息给赵，然后赵就作为一个<strong>协调者（Coordinator）</strong>联系魏和韩，发起二阶段提交</li><li>赵发起二阶段提交之后，进入<strong>提交请求阶段（投票阶段）</strong>。然后等待魏和韩的回复</li><li>赵得到全部的回复结果（包括他自己的评估结果），进入<strong>提交执行阶段（又称完成阶段）</strong>，统计投票结果</li><li>赵按照 “要么全部执行，要么放弃” 的原则统计投票结果，然后将结果同步给魏和韩</li><li>接到通知后，如果结果是<strong>全部执行</strong>，赵魏韩执行事务，魏韩执行完毕后将事务的执行结果通知给赵</li><li>赵将结果返回给苏秦</li></ol><p>在这个例子中：</p><ul><li>你可以将 “赵明天攻打秦国、魏明天攻打秦国、韩明天攻打秦国”，理解成一个分布式事务操作；</li><li>将赵、魏、韩理解为分布式系统的三个节点，其中，赵是协调者（Coordinator），将苏秦理解为业务，也就是客户端；</li><li>将消息理解为网络消息；</li><li>将 “明天能否攻打秦国，预留时间”，理解为评估事务中需要操作的对象和对象状态，是否准备好，能否提交新操作。</li></ul><p>需要注意的是，在第一个阶段，每个参与者投票表决事务是放弃还是提交。一旦参与者投票要求提交事务，那么就不允许放弃事务。也就是说，<strong>在一个参与者投票要求提交事务之前，它必须保证能够执行提交协议中它自己那一部分，即使参与者出现故障或者中途被替换掉。</strong>这个特性，是我们需要在代码实现时保障的。</p><p>在第二个阶段，事务的每个参与者执行最终统一的决定，提交事务或者放弃事务。这个约定，是为了实现 ACID 中的原子性。</p><hr><p><a href="https://courses.cs.washington.edu/courses/cse551/09au/papers/CSE550BHG-Ch7.pdf">二阶段提交协议</a>最早是用来实现数据库的分布式事务的，不过现在最常用的协议是 XA 协议。这个协议是 X/Open 国际联盟基于二阶段提交协议提出的，也叫作 X/OpenDistributed Transaction Processing（DTP）模型，比如 MySQL 就是通过 MySQLXA 实现了分布式事务。</p><p>但是不管是原始的二阶段提交协议，还是 XA 协议，都存在一些问题：</p><ul><li>在提交请求阶段，需要预留资源，在资源预留期间，其他人不能操作（比如，XA 在第一阶段会将相关资源锁定）；</li><li>数据库是独立的系统。</li></ul><p>因为上面这两点，我们无法根据业务特点弹性地调整锁的粒度，而这些都会影响数据库的并发性能。</p><h3 id="tcctry-conform-cancel">TCC（try-conform-cancel）</h3><blockquote><p>TCC 是 Try（预留）、Confirm（确认）、Cancel（撤销）3 个操作的简称，它包含了预留、确认或撤销这 2 个阶段。</p></blockquote><ol type="1"><li>预留阶段：<ul><li>注册确认操作和撤销操作：苏秦分别发送消息通知赵、魏、韩，让他们预留明天的时间和相关资源。然后苏秦实现确认操作（明天攻打秦国），和撤销操作（取消明天攻打秦国）。</li><li>苏秦收到赵、魏、韩的预留答复</li></ul></li><li>如果预留阶段执行都没有问题，三国都确认可以攻打秦国，就进入确认阶段：<ul><li>苏秦执行确认操作，通知赵、魏、韩明天攻打秦国。</li><li>收到确认操作的响应，完成分布式事务。</li></ul></li><li>如果预留阶段执行出现了问题，比如魏说军队还在路上，没有就位，就进入撤销阶段：<ul><li>苏秦执行撤销操作，通知赵、魏、韩取消明天攻打秦国的计划。</li><li>收到撤销操作的响应。</li></ul></li></ol><hr><p>TCC 本质上是补偿事务，<strong>它的核心思想是针对每个操作都要注册一个与其对应的确认操作和补偿操作（也就是撤销操作）。</strong>它是一个业务层面的协议，也可以将 TCC 理解为编程模型，TCC 的 3 个操作是需要在业务代码中编码实现的，为了实现一致性，确认操作和补偿操作必须是等幂的，因为这 2 个操作可能会失败重试。</p><p>TCC 不依赖于数据库的事务，而是在业务中实现了分布式事务，这样能减轻数据库的压力，但对业务代码的入侵性也更强，实现的复杂度也更高。所以，在需要分布式事务能力时，优先考虑现成的事务型数据库（比如 MySQLXA），当现有的事务型数据库不能满足业务的需求时，再考虑基于 TCC 实现分布式事务。</p><h1 id="base-理论">BASE 理论</h1><blockquote><p>BASE 理论追求的是服务的可用性，其核心是<strong>基本可用（BasicallyAvailable）</strong> 和<strong>最终一致性（Eventuallyconsistent）</strong>，而<strong>软状态（Soft state）</strong>其实是实现服务可用性时，系统数据的一种过渡状态</p></blockquote><h2 id="基本可用">基本可用</h2><blockquote><p>基本可用即：当分布式系统出现不可预知的故障时，允许损失部分功能的可用性（服务降级）来保障核心功能的可用性，从而实现基本可用</p></blockquote><h3 id="流量削峰">流量削峰</h3><p>避免集中请求，按照实际需求将用户的请求错开。如：12306不同地方的车票售票时间不同，这样，在春运期间，购买不同目的地的用户就会在不同时间买票，从而达到流量削峰的目的</p><h3 id="延迟响应">延迟响应</h3><p>在出现超出系统处理能力的突发流量时，将用户提交的请求放在队列中，通过牺牲响应时间的可用性，保障核心功能的运行。如：12306在春运、国庆期间买票时，会出现排队中的现象，页面会显示排队中</p><h3 id="体验降级">体验降级</h3><p>比如，系统突然出现了网络热点，好多用户涌进来了，产生了海量突发流量，于是系统过载了，大量图片因为网络超时原因无法显示，此时就可以使用小图片代替原始图片，通过降低图片的清晰度和大小提升系统的处理能力</p><h3 id="过载保护">过载保护</h3><p>过载保护指的是流量激增时，将用户的请求放在请求队列中，如果请求等待超时了，就直接拒绝请求；或者是，当用来存储用户请求的队列满了之后，就清除队列中一定数量的排队请求，以此来保护系统不过载</p><h2 id="最终一致性">最终一致性</h2><p>最终一致性指的是系统的数据副本经过一段时间的处理合同后，最终可以达到一个一致的状态。即：在距离达到数据一致，有一定的延迟。</p><p>强一致性实际上就是不存在数据延迟的最终一致性。现在的互联网系统，大多数都是需要数据的最终一致性的，只有实在无法使用最终一致性，才会使用强一致性或事务。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;cap-理论&quot;&gt;CAP 理论&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;CAP 理论是一个很好的思考框架，它对分布式系统的特性做了高度抽象，比如抽象成了一致性、可用性和分区容错性，并对特性间的冲突（也就是 CAP 不可能三角）做了总结。一旦掌握它，你就像拥有了引路人，自然而然就能根据业务场景的特点进行权衡，设计出适合的分区容错一致性模型
CAP
是一个&lt;strong&gt;学术性理论&lt;/strong&gt;，它并没有考虑网络延时等问题，之后的 &lt;strong&gt;BASE 定理&lt;/strong&gt;就是一个工程性的理论了&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="CAP、ACID、BASE" scheme="http://ann-zhgy.github.io/tags/CAP%E3%80%81ACID%E3%80%81BASE/"/>
    
  </entry>
  
  <entry>
    <title>idea jrebel 插件激活</title>
    <link href="http://ann-zhgy.github.io/2023/09/a00d3e8b.html"/>
    <id>http://ann-zhgy.github.io/2023/09/a00d3e8b.html</id>
    <published>2023-09-06T04:47:01.000Z</published>
    <updated>2023-12-22T10:08:35.402Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="c4288da2033a42315ae31b2f0e635e78bc83ff2642e9b11da458646ee2b191ac">6e9ceb6926d1e5a3c36df669f75e16370d5c8a4f4551bec31a7f72e3e3050b92d67bde90a483f9be0342edd71dd394ae3f23c891214b743bfcea73398ef7b64ea04193b8e7b5b77b1e4cec06d6f5e3c86161130184f01565dc0266a4c732f2bc9fd04209e37d3da7406e4ece1527981f08e55d30e2b40540183912e2a8389de618df0f7a66212a31282562f0f673eedc6bad861dee6a43fd9127771bfcdcdce2347b5af70bb4f56d45a65f6b60da52edcf3eafe27040723eb7312fd29551d216afcee4ab420b63804bcc32559f1a8eaad38e01ba7fe035fe26535e181861eecddfd66103619022908c63b8cfec4bea563e160bedb4032d254b7b3d5019c6c4e575f78fcefdd8c3a58b4a67ae272b90bed3516600e3a6b159ea2cd449daee5bd9f4be7181bce156ff063ae4df2214606926c5bed1eaadae914f7b3f349898f53c3fb5beb5298195ba688ae1087fed3db2bb322bedad583c7a50f8581a7ca7276c41a52897f3a2b951dc17db0f1710fcbecaaebcc099c488cb460ac196f09bbfca7a4d0ea08d6171effa0e946b8ffdf5b68d32ae761008f8763035bb4cdb9b650783dc28011db71d40ddea203485b59ee7f04b4876c83f197f6d9234c29e460a6161a829ea7be7706ee84317a25e4726a3156a178aed81a27f4b8b8b19760db6d3a74e7dff1b6368fefe4d1bd3d7ba1198d88efd6ec072b3e4c0c2a9ae158c1bfd69eb380920367f240050472b726b7ddffeb1a62f079b348c9d09f3f2eb8297bd1dc3cca9fe56213729795097602de53591aae2d3e730ce395ef2cb539ca368fdddeb3bc549369ba8a063c469c30a69b46c2ceaa3ef50c0adaa0ad6ea261e8d7a3fbdb686fc4a8c041363868f23409ee81c447cf80dad8dfab3e602eb25a4c5a537bbd2ad4bafabaa710883effe8da05e91422f28cd2771bf536f5b500f550344e57188f87ff96520af7f13fd779e7981e271514594ab531b1ef2727a21a2b6d6de0e7cc69aac53b80c9cbed05a0799510aa6ace08dc7f9afabcc2d03b7a420889caf94c89079834d5306d75c953e4561c03f3aa5e8300688a501041edca293ffb38dc3d5a4f0d14ba9de492c9a2850691c337b925d504b1937aa75590d36ac06763a172e42e3d7516b156bd2df87117edf8b188c87fe6eb44629e7a44270173c56b7d544784d13706657ad71e4e7f415eb3d3c29c47037b012d9202af239ceacda7fd80190c7d43988a78aa99cc75bc13f0f403c3b6ad7ecc6e288b535ee96ba3a613be657772e91a2f3e3889f3b253cd3cb1b6c45809c7776b15d0ce60fda290dd7c010353f5c8d4a61dd633cc28f40421b094f712f09b6fbfdcb6a794e78e085cd8c008628101085a110be2ba02b356c00ff14f8948515f80fe57f878291f3b54844c24feeeec5873075ff9242fb03cfbf5d67473519dea1ab982cfcf09453d00e4a81fefda25c9acc7c3af45c59650eff56c98f167fb7936d2b4bb510360456ef9a51b2362813ae0a732d07cb87b44b1e71bdfb2f7dd8e8815c27387845ad64cad535d83ec9cb1eb95fbe3e48572a564f5599f8b5967a2a141bf2bdca20a3230003f6dda853feea479efd0eedff667227dd7ea82b29d2bb2ffa02b63681fc7c1046c8bcee4c62bc0e424231e07abcc9397c7fac3f2a9a66bc05d6c23efef4a0675a7d06f39b5c7dcb6c8c7c2691d10cbbb87225b2f0aa045b8c53e794322e99f4668b8751bcb2cd886e2a9e2a1d493c21263863fe949ca1ebe6bce317f2bea174f14b0dd47327ba7f94e15fa106e2d6dd1895b562c8a1939de2e6c89d33222179db1ec528a963451997a66dda0e1b6475b9ae414e646b31f85574e1e2ebd61b14930294f5402bd5155cfb446890cb1174bd4b1d0cd608aac709c781abce87fff7583ec82d0271dbe8dc6778f5ed3fec5c4684bb6cc3aeee9d31824c35cfae38c49ea63fa0030a32c4dc40a4d1d864053169032d396049334779de859b1c51a518a02d83ed0b56dcbde5ab604c23e6fa24a6e6b61a3f90cd039be59b03ea9d92ff3bf902a149de906afa2726643c33d8c3af9e89520bf5c3c9fa31fa191333641f018bc74454a4dda6f46db57a09b1835bd82d2ab349035035398d5791c26b4287ab223867e53ff6805df7c97cb6fd03dbf5f8e7ee1d723cf7b72d36a28f51d90f2b211deafcbc390654bebeadcac37d2c074e7959bb15aba0480045ee3d463e7b8e70b025063eb0a58511256a64c765f9f3e0a70e30140dd6d0222ba44dd6fee63ca15cb5474377a4c54ba4c5f9c6945d099810610cff54d9eb59b98e3574618a746fecf9ddf4f4dab4773ef38744623886509f9462526876511321ef318df9db278dcce6b6a68fd7407f52d59c040acc21b2bf1fa98acd9b651ebc313b19a8c84686a3bf6b86be7db65f0ac730192f171749a59d2047a3194d2458ea85d4f85a24e748640c2b6d6aced147e5036e923d562ff246398a9ec4e0405a874335450346286ffa071964ffc1b68116cade3310d9c7e70fbed4f8bb880f64767617ac98e51b587c96fa37c547b8d212d6bf787e577b68500ee7b4aa7611f32faa209ac013f1fc94586726b7c1f0ad69c8f668c165d5587cabae3a001a5e4834546e7cd3bad01f33d2a30af6439a7809f953f7c77a963707d2d7c496a6687c6c07c6c67adfac858aae736f7ead4ddbb96d8ecb6a890b6cbaee5beba6dfe64dc06332845871b4ea9ed4b07bd33505e6de9dcd18b0b52636dd9b0003b802809faf7cffc2b876a25c6878b0575a8ea1c62b83577d1a403e9bf2710ec6f6ae352161c0c2453593164b521da7478e3241bc227809e2a0aee9c28a06496f2abba94640dc8c4064e9283ba146ee9752e2339e0a9586c1306c4529843ee4953541bdf4aa130e8374f515e0d5a909318e8bdc606b00b47fdd51bbda33102f9479906b5f4f2d0d04484b6704b3267a036a287a0862545f7a13b01016cdc66770f33450f9b07eb3995bb32ef529a0cb72b4eb4d36a222bcc6cd7e052c7532a7806a77f1c8e8ace6ad815f7b6e959dbb154b78bb04bf2a0e08876e0ff491acaa6d6399f427f8237292fab4b0f3a62d80740705a3c6faeed520fe84bcfc1ee555bc2bdbdaeaacb1be53da8cec13a43a47c385a1766dd226f1b97be022289b5cfc2a99159dfb402618a083117845f13bfe37e9038f02f4fa2be5dfe39489b76e70cbd02caec684c0b6e9993abb31972a8db81cbef595e55b5146121e54997d03dcfd7465e6ea64b86b29c7f24524cb637386c8ab515ed4af7a07020b98c15a7fa27d52b0ed9ff6550cbfea63af55549b5e3cead4d4f656150fd6c427db45f3e40c7f3161ee30b67a9d5070fd8295cdad53e00833e117320d6255912a74ec64d881044c984999db69b25cc2c2a55451845593ebc8eda847a1d6fc2708e3bf1113871c19e40d4f6bfd750e32201a6714f5033d35b6b5748f9cc248b68afce1c1498cb983d92c18c865a580b4518e3cd0aa2d0cca80509f924628fdc8c3fd24c0354368fca3151025e478bc3b58597dc9e1fa447cdeadad259bcf1f5a388fd88f7f30caf7a41b78e50e4e0a6145e0489a4de180cbb30447936e0d397cebf54e0a1589237e053839fd8ab9cdda269dd4e9d8e3504dbe951a123f35131cf95bd97f5988163d2bb70ce114bdad80665f2df9a66cd651eba08799140fc7e5af566119b1f4f9ceb1c1a0782549b30889f25aaa2a949c6981da185b3fdf64590208c73e25f8114e94435e983c1ff754803be9db9d0908eb9cea7eccab1a429979a7bff1cc6042f5877bab2365763bc7bbad9d6055ccb7b199b2cdbfc2aaa20017075998c08ccefe49ced9d062b1954fabbfd0dcf0a3310b6a1c3d972f0a29456906f06707c83fd4d8f54074f08db3658b3f5b58cab8129e1d22aaadaabaccff14fd9d608fa5d274e4ca3704b1029a24db45e4797bbf400eddb600b76c246f926c98ae7c3ac76c1c767fca18722b3908d3ebe3e51290ea0f7998e35607df4c9790795d431ef6e2eeb70609638b4bf9814992c2799bd831345bd8df5b64a762e90de3e5f4dd23ae6b76361aefb2dcae7dc97f152f6392fe9defac48a2dc23e3ee25e819f9edb28699189c1f0f78e1c238b2c369c4b27ea3de0f8a9d4344e3a609a86096aad1953c790785d0176ab1067b27c25a8cdeaad88bac54475f1788f8b6aa0ff81708e5652cff2a1f4382fd2c602dd0519d6d4e4f62deebdd918ac6210d536fbb0bfd2f1cdb5b7c74855b95bea7e6f3e9ea19065bc8057e2b29ffc766e8fe9f683459cbd5a0da928f775a3fee2b3962b74ffcf21c283d04abac19dd1bc0439f9151ade61bd6b8819073ee5336bce6ae4c20d6ff08b59342ad45de02503da3edc16cf14b1e4a0c4e87fe12cfa09e0f604009867785b27ddaa99300af84feaee281eafeed7d597d3f162283aba5aab0c600365f3ed53bee4a16f9c7b8219199f0df7b2481752b7639fe4d584068f913ad782c42502a857f8e9bbeaad2dd55b8866e6f103330442753103734a4d3c1c9fd962c30004f73c97faf1244eadf37eba35d01d07809c7f30984c433b2f4c2a9078ad1df37bbfce0b92636f3b41dcb45ac0861d84b14c6d6bb608c38d8eacdac972b173fd3ba6d7d1ce2758e8773fc63daaf0531d8d9321c457a88304d138c4f57d22d7e7d0aa46553845b43c7db92e10786699aee9b5333cd5fc11f0e786653272740a1c3edc33d9291e94aaf93850608532c43e882fc1c7f251aee2294125258d4789d257dafd6a5c6e77d04e6e0c8380b262a895f875a7526ba53dca8ecb49d200c3b36ac7e7c9004c880166ef0a02d38a3d71ed056d9bcfa0b73c8581df5457c4bbdc24d289f4296414235371e94175e558bd604bcda5b12e5b09532deb9f3123ee36f82f7a567abc8cf2e6f62037dd813163662cc24ac5568b96fe645fd3567d32f41ea76411cacc007051255d2e1594504a10c319ae38513c92ff05a91a2f772620273355b269ae96e12209fa551744842ca4d613ae27ed8bc5dcd54a30f4e34bc5ecbcafce275ef99dc0fe1cdd9e5a699916eb3659bf25431177c3ef4126a4ed14a32b3514612b8a620ec12ddcf5be48030d84712bd5607b4f107c43a2a8019480db64cc4097cd05a5871c9984ec95c42645558122f362e7c5b52cb77e9b623e4301e83a621e736c44ecf16bb47729b00a5e2d9d483eda5ceae041d22d0114e45e27829aea664ca201b9fbacc037e500e8c1f130b58eb1f04699c81a8a67ac22796b407bf9dadc2beaae3fdfabecab4437ea02bf0516bac16ed8fdeff333114bfaea2a88d09ac7f614218972dc6cdd9649af557fce1f7a7d10b6efd343550827c8be0e99b8276685c09d6584301d2d34ac5838d5121fc2e977263e2ac61c65b059f1306cd084362321c921a4f873c007fddb255afd3b31fe3cf6677e8b4b1189534615efae216d3cf88149b1dcd6d9c3e82c9e3bc7f72c6fcbde60c90dc63a43db85e74597ab86058383101167e8ee823ce6fc81495acb3764af561e0f4a8c7ddd3f855f3b089ea880f5ea61b20b5582434e8d860e93933e8054bdbfa41e4fec54b9a3561e4950e7ab42c22529ee39c90df5d963d85ef8729db6e00cac35de4148375e4354a3cd7d951f845c6123bac4664d7cfe4be758205aadef91ec4717039c61f8568051fca44f9deb61d3501541caaa3d0fc0e0de224626a4dc4c05b847fccaca72ce93e8a3ecddcc5270dfc10399dbbea30cc22ebf2d32163989dc9a016626efc0b5aa0e34df39250a33f1a06a8e995e19bcc9179ac72f766b994757a6e069a21810597b2d40d3a3505229e5f0620a85b8b95d9897a3354460947bc906b743629d351c68e99e6425c87f2b4bd7fac47d097868bf5e66247e50187f12d117d00cbc6aff8f950a0b57ef43ca4ad5d367ea559ae8ab88ee5e15aa127329e44413ed7174cf9c991fce3a5c09944b6929d199fb8df65fc3ed424ec763c9b56e05e407857e618169d95281ce4b7992a6d91bd70e361ade4b735800e1e14beb198279f3af1591d64174891a6b09e9cb9ef133f98bb5d5a63de6872c71edaff73ac9034a48c827fbf4b91689d85f4c35488cdb9c605d71a6501d29d15a615fc57056752084f33dd711cad5205825153d3a567400f56339e2ca1b7b4153583f166f5c90bcc75d0fbda6674188f6310148b9b7215246961884b6aa70840ac01a3e05bd1ce6e2d49ef9d28874eaa57661220410a749101ff81876ef2dbe5df89d4bdd76426e2d79384a7543dd569884c3712ef77d7a8e16f776355c40e970ee33a1fe3d8ca547e124da9f1118e6805146f98f0f4b750c610b9d12649f711e85530ee12a033295df5018e6a5615caff0e0369a69a870c6a296c3537b07640d0ffe91c72a84baf8388bfed4da7d654229a81254f7b36019e1ac10f263b4a2f28f6c350f4cfb149a3832c9c9d33182c49e645d4482d93a820cd095a5fe709d4ae7f8e08433d30e593b1566b6c8a6c61bab05e38dc2cdb5824000de3b899e00c6311f05bc8c2c4e71a564953db411565ea2dab9a8a4a3412cc6738e0a5d066fa5e3a8454ba732faf4323d7d1f0690325e7aceb6d1dd27c555c53bb81edd624f1343e81e1e8ed381c4997b8544613e989a56a32f1cdce4036d5396bf36c09a860e46e626334654aaee9ba7df9ae3245a3259dd35a222dfd76811fd9fa0b44074f87995bb6c2d3f0e56ad6272d84c40633a940c3561c1a0004c70a09d850300ddcd3f370e57454331f32e354f648d01290b52f4f870ead58c4cc02a17c4b3d4e9683543811f9e045b527d34d7091e6e4f673e921f78bf8abbd94c5bc8e69d20b9b2c50e83df3d6bf41de425525796748a854b4bd33dd26efbc6216a77a147f1d629673039baeeaf952dbd70166aa5f7aac32858e6bec6b7125bce6074100f404886b97c505d6bca940cc9855c6aa2cc96af2f0174451a6bb75e63644ca1034724cd1ed2c8acd21319e07c594e58b1c50468b0421ebf5a9554a5520f56380db1224f316d7417921b6b26f0db8ac1251c583ce5fa1e45390d3170b5eee90f31fc46ad58638419e43cefa717ec540c52b8d63332ed595d0c7e30c100676c94e977c2808f86fe8af1b7df0fa7df6ab31882dc72c2f79f6500006c0ab7a7aac8d38240dfb61e41a8ae3d007e6b171d2fe37e28c3b0d6fe41b071d18e47899a0232e95bfa121553e9e8da967ebf5b0d2a39c43ed54f5698d18ee2252c126def7f688ffd3ed7331a0794b14f45ce0aaa6b00c58f422796ba48bcb5426d54f99cbedaaa8256fbfc039e79d48897f8f566d2af6ea9ed7569343c790c8e953a6fe22d7375e970d5e134095ffe8b8de94da54fa911bf07bd29979bd4c8dfeb79f0d009e3d1d9b87b103fd79326b2799bd9f425d699815dd20eee4fea248c245987a23369730403bbb988dc03f5bbb52bf5d420a66d36bed99711ff3452d4128e7e8d0bc24dd9e6eef86a6faef8875e26486cb342b9b73f82a394151156be31508440de3cfeb3bcbf3c2ebbd15eceef537ec22e0f0e92a4dbd925eee284c3494315dbe0d9cf87129a456011fef4fea775267d544ae4584fac821ab540b4520de10b613e4824a8f938cdf7c3bcbde949191970939d59173c84ad33b03d29c55d0f69d8139bd5bad658adf916e8e5a2207a7b20079e403118e43cce46a6cc398011d3667305261358cd3626ba843d630e7a74c75bf17c09bc3cebf511961bc6b2152a629cd3285a430fdd7bd82fb59dcda59472b8617390752d6c5cc4c333e3766b4c860de2332e0de763cde039cb675f0c1ca0a87a0944a14b4b99830bf61be9958fbe33388b9680d0e1ec5c193094f97cab687368aef9601d10df1ab2a4f5243dc166bf392255e9f3d702730b5b80000e0e4cc981c11f193b75f5dc4c5cc7953264512615db6c46095a299d27743da749525da6eac8cb2da01fb45e8bc692908f7ae1770787902722f5d1bc1fa821562358b8c049f86d02fd2f4397a2b2f2ecf02001dbc10b9d2c984201d1d0aba7a385b8ccbcf7e17d19d28456ed7f58c038ff442cef3dbfdc9374862373d55d18a6a8c236dd6da5322908290039cae2dcec68336830bf7e0c8fa1de54d9b430dbf924743fbae3f8006dbd350b522e71b159dd532c8ff618642dc837982a53378a7131be0e36c09292769b56590c4e32328abead0468b0db9ce750216dfb287f849cd04dec7183ca72de6dbcd79ac918b6f4b34bfae6f9c05fb6c5e2e355f52f371085189f85cbfbecbcd8212570aaaeea9203322bd9b0929265f3603de29bfd2ecdbb6cc3caf8f70843ad842e8d3f8411f4d3c3dccf01fad4395f4999bb02843db2e122e28bd969c1afa162bf01acc54372716b8ebc06fd185e152bc8c320730796526c90f1020434452bc10d880516059d8ff5247a51a1f83258a0ea5b558091bc59daa3c23226333bef866de0c25cbcbd1f11c3c3b818fae6535e843775e2d1938813e400b3dc49e851bfd7942d5596e48e31fd01ad630de52bf4e1cf2f1fdb6fe96a01cf5aa80de9eda67fd216d183ab950382309959d77e6ac14df329c9d3ec30663c95c287d0c33f5899b0da7ac1dde84f9c407bf267deefb9fadc18f27829871f55381fa6d966f3297adc3139a6a07ade988aa3c51dbc00a5cbe7a0fcc6ade7e38eb51331854da750cc9f70f0fd380f092e574dd85f20ec7d787ac279801678e522fd2b46a9019f45bc97e11901ea153ecebe03037791afed4fa12ff9eb32ca674e8afb90c7a0b566abce6b14e45617ff8d087c4a11fe98d399ecbe55e34dcef5400d245db0f8e4a2f4011b2b23ea1ff19dfc82656695c05f33078c21ddbd2fd8bacb552c07d560cce86a7e862574aae581b4e50fb67dd0c10d3b4407c8c8bfe23ca6b2ea1cce9758344bb963708f6df8ecf5f79ab387bfea662685500824ce676f656b603ac8f2813244ee7bd67b7b52b409d77d0dcfebab0ecaefd3c7f3b9214143be8055d88faf656dddcb3a8f8de270ead1d34f85e5d77611a1065a31c3480d8c229111be5740ea3288a44f09ad754e69736490f8d555a3a9cbdd9efa7a7974d0583413275c2935726fb69175ba142b0ae3fbb7b319b1009f0433dbd5617fd8f16dac0670a53860b359574732e0f51ea112861f3f1da80b2be4b92ed530e64da9099d427e9a58845f63733a64aad91b5fabf23937896779833afc00bc4672d1bdcd23953de04e1205ee0c8b3dc9fa460774e93d892bbed2e66e7be871ef79c02f42594729216aa521fe2fe07892310002feab194c54641af61ed8e92d367c6f5839c9d1d4c17536e072c9975651fa2616889d45cbde6919b9825293c3d5bb1a80624e354eba91b7c2338fd76f09161b4ab6073e953c1036495a6ac406e96c7ceef12bf814e04f1de7f4605d9c67f7ee57d511ae4ed0fce7da944a4fb2aa775c1ef5405682ec7eb902e77fbfc69b803542febd28809de033b5df575792fa8dcc61760fdfc6f358b6689f9c0334dfe6e62af464e76ca83ec78f1a001f8aff7cdf4362f62b54b783a76029a16eff4295e79a12e237258b3cb81a55ad2eeca14e8b61cb1c0d1ed7a45041ff2e306a71a79acbb42a5c2c38d21e9da3bfc5a0fd9517f05b693d2a3311ff3f5efaf151732337668076d01fec6b1960c1bf00e678db6a82decd292a5da2f9dd3c2d0577b80e0a1aaa32b8c90c095e091aa5b8017b2b93784d54d8dace76154685432c55b40199da2f80942ec5fc5eca889b52e51d7c1f3168b8e0cb3bc4e77df0579e5c742ef67b5845fb91d99272a8b6e5f8394c23051adca7ec382472768a1f3df45c14c317d70cf9a31019df52997e46f341ac5136d00f8779008061ff39d373a4a2ec64d1d8a39495aa48496f8bd93baeb266dec6e8e1afeb8932004144984fe522d9c6db0857887b06f2f08c13de6d06f0964a8c5d2ea67048d18301b3d2dfea3e3f1a1dc0eac84cd6f8bdc8780702ee2debffdb0f03741c6578d1a4475825a988e2b1f26e7f0d50ea152def4b9d04948cac4e04c5be8bc2dd92133970083945735b2520672ff0a052bf9d2d6d6dddf4118d5e39a85b5db8252c7208618b71c406573d952b723c2738ef7e48cbf3ca03dac866032b25d09c1a3121d9804aa106c40d7db52a083ab915db01f2fe37f31c40f6ea22558a7a7bb72145e2ebc7aef1557ca980ac2438557778962a56c56a0223f1cfaa27f054394b316e72aeec0bae15988b1d1444a97431544f7364274e2f1469d7496a724c59e3f21acf445317113c002e3a4f6817180911596cd5a1a90daf53635ec0f4667ffe20cdc7a09976df32c5494bfbbc3dc2e9bdebccb495f9b2cdb0f72a85154129d76cb5661909ae08ecfc2c4d2616d96e21285bfaf9addabf4e35fb41d0df58ae290473751a366d26ac04c8a33f75717be4046ae0100429532a787928ab7e757f6757500386e1723741570af9165ba46f62fb2978b538881e64f7d8a71173be9a9d4d8d8b9f6de047961f1e35c85a79384816005a68a934d92ec4838e0bfc7ffc173ecb484dcfc4a39fd48555cec0088a8a5ca12cce1717bb950fecbbe9dd3cde946fde793d710f60e39acdc64081a6324a840cb2f2d01bfa4547049bd66b7308b4c1095e4eeb80c16e9fabcb59afeeb8af3c3371fb601aaa28bc7c3f59606e4ebc5fde8ab37bae0a43e6a431006a55ae505628319575a07a698e0f384b31bfef0155c7c93849536385ef2788933287d0703ccec8b9c7f72b57ed9ea932890ffe1ec0e1244c9c00c180ab172e63af76c51d844804ee89db90a961793d9107a9c965226b436b1640b1ec35657e6d580a5ce47d5db6bd3767909f2a5af1da27075f3eb0d1a8e42323dd7a8abf81b8b3c30182e1d245553888d24622d8ea89d8c1e29eca0b701177b63979e748c49a94fc5f42a3b86196cda17a6b8aebb449ae3e93d83bb673a0c82a5868059cc5ec337d376a435db1bbf144fdf98367f7231b134f9535b3b4041b90a79d48b63d4bd437353aec73501f81c3ca10424f6a16b2cf86b79b0bece3636042738f432c57798b2d927b59434b28cd6db155141b537ca30795c5a522130059947f964aa12450cfa33218d6eae966c28104efb8de28e5c6c02a2edb53823b5136ef6d643f2304d6dcee0d9c82ecb5eb5383aa4347492379ff6b618cc8a3311a98c79ec9801bdb358297fcbf7be56fed80c2e97ce04248ea3fedcb971072e5698cb8c73f7b883a3e6a567c6f50ae821d4940ebb2ab10317ba11f9e3d6bc3c4de948ee5d885837def0ce5ce4c70e759ad207405350d1afdc6febb23c57aa015ec77ac02f5c942a8a58cefd8754a315be33d57d2497523c7618852e28337aba456e2dddac0b5fa843220e7bdc79ed061bb6dd2534a54a1914037cc641c7d60cf0a2c70d889157f8e9ac26da26beda13f95fd8865f4471cda330bc623f92c2fc045488f902c22d658b5186000663dca7d7e4cacd271b10374222984d6cf7f9aa834eec06fe1491a19aaf8eb00203699283b9df2bb86f02f3a985369eeadc9044f8d92368ab5a0c1a6a8fa3b27bf80c7a2f0f63e458c04e0dfddd47acf847a7620f08f93d5ccc40a4382370c3bbbd0876fdbae6b2693a5a93fccb0462c699abb494ac9435641b5a8d36c987e00bdaaeda36ca3de7750676321c08c721e2129bdec11311345b931a531dfbc653148b5b12f6ef870e6bc9e7b3af132d7cc44d94257cbf5c3c6f3184ba00b9ad122cadedca8942f8046823a50c10e988df93ef300c42d9364531eccb86e34dc14a8777d4c8667fa83308544a794aedbb791f3b3b383dccbd95752827ccdb8ab0f3d9e76fda287330804798438f073fd9cf389502b31e979fb1380c8f639cd77cba1aaae191f26acd770f5f0da319aa9a2ff85865eddf4ac86698cdf4b9aa075fcd5cdc82b8bb614a6a67b5b2f3292fd6936ba50fc0083c164c89f1bd15267bdd3933caaf83d20b384fde408b46ee717fcb87a21b90d48fd12653140dd71cc198551dc979a004ee2272b8b54483684718cc22ad59954ce80fc3d1a70d4e057015cd0811343e1ec5c23fca8634487e15d4436240fec358870a45771d425640274b294027206dd8893d676cd44399797c24f01705d53f52f206e73f92d16643116edca46c85bc9d407384379e4cf978336e191aa1fff4e2679996dfbb1db4d57bd6d6a8c84b52150e317461fd2f654b77af7180192c7e367bfa51bb6314b2f18b8dfc2ca52c64032644b9b20debb3e3220cafdca1fec4ccf443df3ccfa6c54173b10c9805ba8e69d1eadd934273a843f8eb1adb30b54b54d68ebab1ce1dcff0ea148d88d35d373f21d5fc4f53adf9005c6119a7597c53988bd49bc00119228434edc55f46d7b21dc7b87f55e42cd5f3af3509c7924b155b6caa566578979e61f9f102359b53547cb27fd4859f6c63755e21bf7f22252623596bc43d1bcf9ff027eaf44d3015e37e419d76f63552e2e2607fbba25da52c736af68f2223281e4d38088ff2484637fd1a789f96ed3ba29e1efdec37e9fafa970866279ccbe999042fed915b99065c5a24ce80936a67dbaa457c1e70e1fe4804f28e071ad63a22b925d1cf3c54aa642ca40b08818fff85c85d3845b4ce2de7dc21166f3f0fb739fba4d6b3ab6fed000be3dbd0d775a02b955fdb2b51abc9fdf7c8d78a9793087ac4a5848ed95de445c122fd5d04d0005f35059a919bb26ef58f34dcd50fb57a5cbcbbf66cebb77b47ef7492f2d9d8987201a0219267557b2e2cf2ed3b910f395da93e67396324bb2003d7dd83781e8633eaec1e54f97a48596f21cdf5398417d9ce4c831d76af8706c47b9e1effa99442a3aaac4ea6bccc3f37f911b6fa616fde858ec0e04536d3c0cee54ebe1e9ec8cda69b5af1909ffd59a0b34fb78f75b35df3b3b4a6f8bff82461e12ae0156d1c1d17cf92e9598df0e4db06e4b5bd815951c1ae52141b5a9011fee4a78341fcc8860bfdf36f2e0163a3a50d56c1534e31e5cfb700c2b82e485a7c7827edd248f0adc7e6c27e4c2c051499c0ca40ce009076848da26aac3021e4c942a3a4d182a7e2468f9ad945fb14c0659c4b6c0feee101489836d892638a1ff521a2e4dfa6b0dfab1b938f6ecffaca61b96abbc5a0e99da105550f5566be2ca695354f781d4217c8afbccd9e28b5de7c986338d926059f72d9e88ad46b6060cbdb33c027236631236a8183f625225500f163720bc05243a786b05ddbd5d35953b67a71865942a89598bd4dcf16fec9c012fb2998c244b49ac8568fca3e34ef90ee9b8721d2ffd3ba550b03b2f5293d396f3ae8b4dbe0c928feff017407ce69d898ba64395a465cf071a08d3825703608779aacff90d98d8923e0955c4d03fedaf33dc0577c92264b7a3964b097346b47683f211129b7c0dd7cfae7d3f8e373495418fdbec259a173d1d5bba56198a83ada2f60e0af7d7ce4c4870df8fb8e06f0982c66881c2bafa3470be5938a1d88bca5f024bfd794caf29445526f4baf95020f17a4e1d3443ef09039e2526c12e84552683719396032d22f1b8262deb79f58dae1eb8ff3d4f088877648768c6a621bd8c6dc00363fbb0e8d14005073ffeacdca32f556b2384f89a6ae4ec7cd43cef53c1f753f74cb373c2ced288f6360227814e1921ba859d4db3ebac52de99241c368c6e24ef2fd4d182c81badc97208980b91036396bf01f2bb0d291980dba403c82eafe5fe34d129544ac5da21a2e2e374bb76ec6f5e3103f4e058b5fcd5d21a09e99ddb03349720f34010d0c0d41d9641a84c3196040675339bc1466a851255aac72dfc16d29b59e8260bc925f7c7de1ac3c41771fdaa6fdd16526c55e3f2cf7010491d1d4f491f0648f65bbf0ff21a3dac3233caad544accc70a7e9288db6de856fff2f2f46c664b5c59fa5363ac4cd7c6fa3663cdd31ebee3b24a54236ff61bec10b7345676392ddaee000d787bad0d78c55372903813bda9a1fcd130f1e78dfa2deeea7d0a5de3a7b1d55d01244db5c6fb43e5ab04d98138948246f9add7b6dfa5c07c6773984486eec71f72eedc2ca542d7329fb29fc9d3058812c36424e93ce356ce12e41af9158c2972d4b60713457726d52ac54441a54cbc1db8fcc2f95898398ff9dc2da5e2be4bf6ae2536164b6b749f304b5211d63417df06431265880bd8c13d7dfd013d4757123bbf1d6ce8ebc25ce9aba4422c271eb9b73c9ddc8342d9a7cac8a7a9742332306e5f2ba9ebbe2613433a9ad94e145253022d4932d2376ef10ec011ab91030c723c5c5a2453a85562b748a1cf90b61a040c9622d68a448be5ec7409f513985a0db4835d7d6b7e18eaa9b02161a992e4ee25d87411c870299979e35b98c22c98f58d7de1f81bcf14089124081a51add3b7b5bb46963a9d0bb3ed10b7fc95ee2e3cd54b0239b6c2133b61f4480b020fead07989a874fff081ca50d1b9b3aea7c896b1b99b477b5db2aea1fc2fed04543069579c86b5c1eb0833b1db76b27bfd203989637876856e8c5b5b872501a3e99aaa009692107e6c86e456156ce77b987f3c1c59755ed8453ad6207efd4a3f58f0fc6c633d06fe12e96edcd8c021e07b72667eb8afe2a16f2f1a7650cc9d2a8b235ce586797cfea5155caaad0cf11874310dd1fd425bf2f2c42b7949b29cbdb402925177a5c760004c4778e61575f55cb984feac9c275cdec0d111a63dcb530de4d69f21eba5883340c84e063948c65f1376891a237cb0dad7f994293c77119ef37d83f803a18ce3b25e21deac76d16078cc2db1424ece7cc17ea6f8ccb1e02ed1131dd62299ff9dd7acf3fd762e4aa0ab46ff599c515c0408192e6ee03105a87d8407cc5519b5d860281ac75779a107599db1ac3c4c5edcdb7dd5b77963f055f29aabb7dd3f5c02ba3c56144b74c8c96b2ec0d5573852b937331d56b4ad2186d4753bd18ced4e632c14d69cec7dfdcc6a04d72a6a1f0d2bc78da29e6bc139267ca48722ff560c215a2c8643984050439d223281d4b50e82f87f1b98730c67ad60dbff7ebaededef8a6a41c5a5a837efe9c4f8f1ac013858cc38f7c2fe1c333567c09e136494fc39cabe7220a26733fd72325f4dc7edf95785ed26d530730c0690b198446433a876666e46bf3cd16a33641a566202943dfaf59710a3dbb2b11c8be4708bab976b529198fa7f75ce74059bf8b1418faef35f28a5e8ea25e0aede90d7e039b04e94b6681939006c7e057c6114e21dc7faf312dcfb6de0516a09ecd2609588039c419d32040a1cea7343f181d36a45a4da5c20d3508933afa731239a88a7b86cff0ba2d76af8d89b34e120dad465827a8d79607974e18d71ae8d3c65b0ecbfb6f4ec8cfae67dfee3a5eeae6bcab79e724c4a00e30cdedda96c115a82e5e7715063b4797ca4c1feba5b85d64decd693737a56206fc7e9094a68b748978f678f7f94aa16ccae050377824e4020c1424f42d3b646571c9e75d04632ea9943d234c479192b229b43a2e35e38cfc1c177c27b15fd7eb1296356c846350b052409cc6262497134dd00a7f1dceabad0d82dbe1f4911b01a4e95f5d072e305785a1de9a00860834950723c83cf2ee28f47d6d5fabbf9177c2cef5c94e346f9ae1c678e3b6006db49e536e3138d3ed8d1398c796e27433719a4d8b93935b322908cb001092e6a615aa01b8e2c64a6f27705d399c6398650daa7c06ac108a80d219f149438ecffb0ba9c151be59337686a88df6a9fb4df7cf04eaee7703f4c2e478c14e171efb23d72b864251c51d4ce2bbe585a30aabee3bff8c5bbb4f754ab99d45455f5b4c676dc7f1933b863de8f2f6fed4cb09e3acaefb527f8b53896f7b872b2e434bc730e1c2d12c4a02ebad67884cfb60236470227ece3daa05640f4029fdd6ddd7cd1c47b9d7905a5cad118759486cc579785aa177bb4d0ba195de61d0846b4331912633bd924c95d4348faac6690961fc7f1a0fbac572b299fda93f192e9335163ae9a3917a65ad4d6c71c078350f1d8cf87371c8b22f12dbba78f30717d4562b29fdb6b91364f02028f91bb5776d4461f3285574435084c48c8910a93ff812e2bb5d6aa3f6c4f2a0b5f60518d0d0e0b1455e4e4c58efb037bfc8c4245029b5da6e455349ca7160267495471bafa95621ca3e7b34a8cbad8c8bdba45eb2479699e632ede09e8e3b2dbe8546e850288d1b6ba29fb942db82a31653b3c1836e22bb67ea771c0ccf97b414d0e3f035e4622699530345a104359cb59e874de052390bd0d5f9f09eb79be17adac2b7fc9b8ca2b069b8a104adcfcf94b9ea2f49be4111c23bd11c80aa686c2533df923fa1cbaca0ac78470a2dcbdaf7fa928e6994282a681a7b3ebdd05f8b44737906166a4583432e87b741b92a13b44391437a0823316cba78fadba4bcf841bd59841c70a2505565eb354afa737a4dfa2fdd59079b70381118fec593309235f551e49c1c12ad6db2f9bf30c9db13596b243cbdf696db3b44c88f071f3a52d879d58fdfb9cdf32edae64e9fa98d1796f0145db23ba65dd510da172562aa376be4454548d72f51020f33ef59173a8f4a3e407e364bbf30bbc260b88a1a7e72b77836dec7cb22171e7594c2e4ce29978a1098c1886aceefa36041488119821f18ca4268796721363275b768ed9cdcc654372bd2affe4a8ed51357f3fd1dfad8e48de6c4270ee51353752567c38c6bd339c4642217e7134dc0ed915c846c4f9bbc9c0168965f341252e8e05d6b1ae2ade4477aa8e828e44d0719032e2a0759d660290fa2b1664763af41c80053cd136077a588cfc6643c34aa8b977f7459f951e0cada6d228a69b23094602f2143b7d1fe9e820a95a4237b60c058d54f8a15dfb71f0285324079ae807d6c9b8474de92f5af71acbc2793f579987e7c406058bef6f08603261a9a199185647733e3558308d5af105c2f93ae82078e567cf8dfa8cda57ba9980901d88fc8436745a805c83779543b9807c1f0092be77810d3da858848285370348dd08924966a1f07a3b56526fc12ec450f6453548f9c03887e1a7996290a6726d794b40578661349d774d0dd159c30a036c11baa072e3668872211e9115936c5f56a789b34d8445108cdbe266442249f94a0a1dfb1a10443f15aa30c0ec3f3e0a79c1f31c4c7af3280f2cb167f8dec3dc9dcfb68ce18109073bf26eaef9dc638fdd3a339ba38f96f79a2832062afa583b7fa29c75a8af10d94045df2640b36a71db72ce89f82def07b650aab760f770817669531218ac6b68eeb82e6a682ff991d357ce71705d9f744a7d8b752cc0464c9a597b6e1ad64ba612c2d9d2892e403ac7f7e3ec4e9e709cd7352407b401561c53ec2ee42bd16b47e044402dd89c4c5587ca8d1a319c85934a9b49e4fefb7fe8d35178535a3684a1b044b551fe26bdf5bb66bcfc8600bf330af0c91818264ece2665f67c96a1dd9e4ba4edce558086b1c92da8fd0a738cd3d3355faacd0307a6855c40b72449361994874be5a90e265e651d6a21d481e5f75bff67194865397a4c7f361d0bbac7906162a61dcd2c8943c8d0deddb30c700f60ab021db6e200fac2d78b611007cdd40512ead560325b37c81f61179e878dbc7595ae43559ded2da75f4fa25641240b48efed80413b1fec1c858a3e884d159bff13b84c6ad5d34112feb3897ec237013dd62ef4f56fc4d84fbcbbdbb5010b1dc20b3e519cf8e4ed56ce46f12a2713fe293cda4ec64ba6ab4d9f258b03a3658c0c5bd13e9caf76b106bff71040b4ac87f2e5211fc348342191b8258ae6cad1ad05c9212c8665b37d647156e703a1607847625ecbd8c60b828d845824eb68bf771b81a236b9457f841f9144c534ac3ce5006d45108aba60a1b574034c5506d8dbc7a4324f66afc9f7f87c74826d9005f3ddaf82df89e0c9d405a1c88c0bd73d22ec385710b1fd5f72b842dcb081863812e94832bd9a130976a1fca0dba002cd08c1af078529a80e0404d3ae48e3166cd328ab7dbda6d20de647604781021070776e8bfa437e3cc8c000ccdccea74880d7511a51fa66d5bc808951870aa17f93f7407af84e5022b49fc6eed59467d349f1d7c0402925023c76cc40899499d27fb2ae560f6b57ff850fcc7a73466c7372d421c86dede71b5810f71fc8011e2e2fc0d068b892817141683a01f9f7fc193b7246459ae9813dcc47e619022da0eb419d84f852b27291e2025b47ee42c15ab71963c6bf5b085c80b475d74c554ecd2f0318f5b9a56e07d2c68ed6e1aba1c087bd83b3f5c7bd1e214a67ee21536ae711231544f6097f91639dc662bf3ecf55ee1681c8ce1a465c010ce3ddc8ea7372bf3546bb85decce9edc406678508bc8fcfb47096f4dc676f8c8189c6a2a7318b10d9cf91cbad22867d6a9ad2621a037bbb871ccd7593b98786fa940ac133b30a1ea51e1c25fb2e6bacf788c373746426cf711b3444bcd620116a5e4feb5942fdf54fc7686395b9354ff6a3d1311e445d2e521702f66a4b7b7d5ba159cb06b68398f9cdf6c5618e87c2f77e3224b716089d76b3622c6e4dc23c2e0ab11953287ee8cb6b25c14064e6a011978e9907d203d95f9deac8e19983c2aafda8e70813b418de40410922bdcd1a16c5cac8fbd22515952838e1aef54fd17b9385eed3b39bb3b9cd929782120c1ed75bcaec27be9394e3ce264650feb9f6a53ae87e5d3e1875cc5d3768d58281ff0a6b62a63142b2abddf751276d37f8e15e6d718b71c151aa1c283f1fe66e296754be5c29a31781e38a183382d80495a2761aa785d9894be9463be90bdb432efe2aba682607f0e42e25d25d61d76c215c066055bd5c964cd5e4be16c100f0527ca2d9277beb6bc5dfcc746a5b3ee7c14e25b54f4687a41f5500af4a3155c255602a6cca9ccaa3a4ac5fae9ea58d2ddfef354436ab9b6efc9cca03692bffc45f7b26a85856ddac8607144f3da34272a410b35b5803c23d9871ffdeeec93cec05010e3524d8dde8787a228fcc4247c604c251bdedccaa2070ed36ef053d8a48b958329a10d597b198bc2cc2b1836fda8dd31281c4300f0326e80822d30e1213f7c1f6b44139859e8332d6318aaa40112dc6586992a27f1343c06bdd8ee9192a5e08205e802e8d88c2f1cab92736f6ed24c78b86499d089fc09be4fea2af3eae27f4d0c4258061298d57344e9488ff4d2ea3dfbd8bf1e9eddb6e68996dfd969849195bb938673da9bd23bf5a744949d7104a90193022e2fde1cfcfb2e21386ac2f9948383e14700c798fbed8b74cf913f7116ad582bda0163d6624bafd529d867ea2d01f988f4c681e92cdc0653d50ad5e3035e07c019f12b4e12314621821cd1506863428f1bfddf3fea85a281afe0e8864e57e04d9e1794402883b492398b2754f764cabb3e4495d421df8b0887b4f9bf59d0a8f775c0e4e49a9ec49a70aba12f94379927e194b1b4ddcfe3f8e46deb00305d4073562a5cef727e5dedefef1f5d947fa713ab4130b3aeb0399a14b235fefa513eca5f0d16d5935e3afc0c964c2caf5daf3d90ee79755f26a8fdda8787896bdab85c0f130fd2a5fc2691e94caf72f5af7c8d7303bbc5dacab202f29e8b60b75fa977d088926e22aae0697dd0cdce992cf3da6fbfd82d00e4d455ea693c5f853f2cdccad08f6c57f2d0aa9a4f779ac23a094e4e0a51b892ca07a0b9585e254a8dd5a6858bc6b91f3f3e0cb7f1f75068c86993673898baa0522780bf2bfb19148d12bb316c97503d86427fefa81d52bf2aadccaea3a9a65ea4ac0eee244155dfd6307cceb5d99682618dc88609bdf750fb0bbd84ace6bc099677b70f11c953e207a0c2cb0fab00411021916bc4a67fae56c800833c020e3b63ad9ceaa9e0fdf3454697e51ec4b946597c444c5e9ea129bb3f504867647e6b7c4a763ff0a8080ecce14ab7e3c8a6b75ae1e8c74e6dfcbf48c2ca6c2ae5ee057c2b2f5481b7f2d59508bb3181c2779819b4da3c67135f422089ef59a9845f1018915146e2b4072ddf55677ba870b141d396a719582f31686e80f02a3652e5df9dd31bd31d27aa01602473a55b78163ec972973dceb64111601ca3818ee6e9570ff96002e1f1029eb7ac68750cb520f47fa55d75d89228ae72002b5646441339e7fa888e4790cd567296bbe28173107910a8d58fd36ac0ad4ebdd436ef3f1e305c6eb4a1afefc0a1ecc050012febedb94728db78f54419c8af84745e35ce10786cd484a0060acc19b6be0a6f46ddd8083ad0b63701d2669c53c8fb4a0fa79ae3d7866fd302b77e86026e3077c0638996531c5c869ab16749ff6fec8059c851b0f30c737837fc93177798b942f4e6c3485ae589553df90c5eafe66e403e630e674224ea2bcd17af18165268cf0cb494153ca7ffb770970aa95b700d14452beb0160cc200813926a149be602fe0174f359cb57e3b78375d8afecc625e3dd6de8732ca1850bebce889d2654acc42efe61d79ef39bcf7cd701944b9850b46a99b52741b78fa17e9ac1378578ad0063879e434962fd2064ec0a2abc8cfd04d31027781b5114f86aa2e18a224a9ab15722e22168cfba01f6d50c1c61c2f823b5fede6e428ac59c553768108c4a7e856d3d99b8e8334c42e945110ccb824cc579a1b9503b710e741289c4d3733edca440d948f56c1d84aa898499c71eeaa7bbdda3ead7b679020667f108fe926329010763b5ce0eb7d18bf8c09342d02a78f5446a87f0dc78a89ad8ce27ed621868833eec4505d3a6cc2b6044f41e55a0bd12261ad308089d3ba2b15990c95c73441484b75ab1fa8a97b219e9baf4d29a9e2d80f9cdab8e8ec6a147e2b36c107e8ca8bc29d3737e7ed0992a47d879342b9b6350161907856cf6f0d4d58da1f59057c140cf3477ff2c466b36ba3d33b9ad715c0592f3dfa3d3015e3744bb696d0f377a98ca04547b055390ba547fe884cbea1a4a601c448e296f195ad0f14936dc1c021752953be900707aa127fa3882d9af7a99990c73b83e098ef365bcbd24673df2a4ae8a3cf0f0771804f8b69c435e79e41953f7e9ded9c850129f8dfab5d19c54a6c6b30de86027d840ad78ff70286e56d8acbb039c4c9e0ed2896e204b8823c54b484fdb4626e657c6cc21d97b55820ee1e473c06c0214099015690aa2605c29186714d5efed3dcb47d37e89e2deeaaa73206d7afd163f6abfaf5612148d911bd19f4f95c8ca619100d803c3214276a5d61e64a7adf92121d717a90ef5c978b80bae4285bbf80e6446b822d65feb3475f1e869f68a7acfd09387c7af4e555364ea29a654f3947a1b4acf2118e08ad81c644a8e4be6cd5941b5f76abb74eb6336baf8cb509d63002a782b2b988c0cbc2bbeea76613065a30b3cf3033e0de1e8dc0bad5e7868f55651cab62c540ff9bc95acf33e7133bffbc6a94158a4247068421edc138d716648b45279a482a0293011a8510d925cd12ba97cca9d4e5439272c0d6a51e14af76032121523d1752994694350904d58e7dc61abcc7b2be6df6d2785a72a33c67c494cee899406be2c14cc28c647ed3863fa058f4435647afe3fb9fc28ab1422e816288daf4f7196502a4df5d8e98195ed6b4c01fbe085bf4e957c9266f8145bf4810594b0cc02b562f9f9ed550f2cd51b8d6716cacd907e047b59d355451ae9d013273345a1ffdd2fb333dd213f83a74acb2383ba9fc1825d9eec33e89f640dda165c3526cdb6f0c99ea388c9cb8a9a8e5ec517f56889856ff9ddcf4f4643c241b93e1d59a1525770dd0b1f68277c829a2316621082adf8c5367f5ee2197ce64815507747837651e32b58af8d4e8227cea5134a6d154b25084f8f86258b9063c0da95d130c58960ff36b92addebe9b1ca53d356908c940bb504d0523619f88299a2b1623d630117fb7d0281bc57000c9fbf45ceff31b5a77d61a80539dc5692acdd6ccb91e4920b89c13fd7bcbe9d8742c5ec8271bf3c89ff08e3025ee887a590af567d0cc99eaca334f608b1ef848314f4d9ac5b0ba30cf25079c651e4b98d14e36624428e2447151edf0b16bb44680e0b3247c87c937df8ea6abccfa934864c2fb2b27a0d8672d4b55c3051515c9506ca86a19825dfc118f0164e216a20c36fa56565fe8d6be127adec5db18e2bbf6ded692ac2161e0523915c3fc3d4e273bfbfd4d266f19211a146cd5ddaa686f96863961f2acad0f9c18ece7df02b94798de84b59555110fdfcc9eec3448584486cb3fbd532d82945b813baa61c1479e80154049c79c1ae25948c0f0b24fad6346aa9e2b2cd79dbe7c6dd3e6e877953bcb20fef4c33ff17f80543d3cd638d8954d3b2af458c43ece250f54889fc83f172ca2c105cb138bd9226256de3f01072a6465e58fa4c980cfd1720d6614de5a5ca7ae2722b4e06a591f42ea1d5ba625bda79f2908d3d52216248b7c28d79984199dfd3b8cb8644279e2abdc64e8bb90e27f1e88355941b202c38ecee44f31c4ef0c1bf125aa5a5c2c5220c2f82f9cc66a1947f95632d7404804b2e7acba5976d5e13a71a65d6c5ae4557ab3ff9b76d751a62ea854675d58a60655dba8377f599d73634604525a6108fa7cccfc6135028c27d99855a44b9f1f07639b22d14bd9d5f1c8c19a4241f30b920b05099be76bea3cc8a393be7cc789f21ddee81a7c2dd30b344b14439c51af61102228cb04d336fc200331c7d15c55c130f7dfed0752c59ed2065c2b26c2141d89593d9364b9b81091991f367155083d1f4e574d42486bb8eff9eecd7d5efed56477fc2e2b528ecb0d407c912ce3a45570ed1ac75c579cd971c66782b2137ee331cf80e98029121c5a1462c8f0cef351090eab149cdfa24b8626c155a482e92b5bd2e91f07b549e91f78701339634a9d6483ec81760ad9d73e19f7ad2445e256bad3c2cc61299f708896f9f0ed36464e2e5c68cc4e62908e14e25870af3cbde3e6b3a76639aa4ced6199d90b9ed91b188025944b04dfbf35ad89a24f3835d47e5a77de7322d1e4126c75c117af6f881f1c879660df9438b9045a2fe8163f813cfcac92064f110aa60c1dbb37a0536c2cd7fdd55e9012e4bded25e34a9849e6b0e6d48d0a9d987633f894cee830a1efb9a956e6f32b493cf765eaa764842fc27c1b287e2f16532c8bcccc4af38e68717e8f6b3b2f5778cda46cd821cff25305fe5329c5e1c1d8874b1992dfdcd9b204ca97759a979245361db7be33e56dd919d833904b9ba7672531b51e36e7556203877e62c80b9e95c5b3b72e5ecd73ff4865c9f42fa4b7c32339617c7898700515280ca95ecc9a12c7d9379d11c38e9a3c213396aaa9766a397a9cbf9274130ef4543dcd2fe2c3660a4fd6fbe8f773c5f2049144c85e50e0ed5825bc768fee94d8eb4a29d2bba7f1373a665875737b886af1442f3d35971a5b72a38a458a133c868a11168cc4c8ca8e727b97bc6df542828a330b385df8772c1ac6d9e832f317fe534be9743ee33f1db4702163094edb082e4a16555aa29170311fca1f89092177df12b286d96ab4cdd63f31ae1bdb03547dae9f3382d78fe25b9062ba12a78960b93c3d75fc04816a24b36513c235e96a168bf63e47fb76254f0f15c016474ed316ef738dad4e8275a9e82807b27d389e9d575bc53bd168c18411b607b27eb814fb92d8da704c0e9d0ffa46277608e7230c210ced1f34591922d3399863bf060410d48fb489e262ccd8dbde00434e04842536eb5553a931b8144ff4e878cea8e752d1744d4f57c5d92c0b69bb4788fd776dbcbfa74bc0db2a72ec94b6fb2473072d4796ccec7b196f6ae97c7c2c356f7ed1075fe326a09fae264ffd9afcead2fee02fcabfccd32a99eea495523a551271d4d5f056abdb5699f609b22cb168fad58718bcb3a6a051ad1fe51568216e4c4731a1891cc29063b7018ae17c52eb64e2b76ff79faf8ddb52f517397082f1c745e42687584da963532f338f3123ad23ffb1bc5b2893b47d473af7b74a7a793e9880fd45cef8c58a00e98869552273d8e18c4dfa2adf91843ad8c73feb964a101053f2fa97dda1dcc6dc7a8cdc6cd8743a1a7305d853522ae49004822fac40a81ea993e74ea524d18045f61b93194b6e14bd5025de6f10dec81ed6c1739ec1e0e53f84c6cea8a57872b213c239f397b31b25a8227c39c51e0906daaeb9392b3b253c2aa74a5fbc47d510df339d5bcc2dc17c0cd9bc982245a519b2f781746afb00ea714a1e60b4ec35d5ad3653061fda48544efcebb5d9b0ffec504915244a989c2f0979746fe0a1c0a4ad694ac597664ef3ea547fcecba454148efb41b281a70be6ce05397979c9cef8ad4d88a8fe1a518713197bc4f5dc78b3f81196da2e80d1ef8df7368bb5523f48ed0e4b1a6ba12f63645001182d17bd1564b29a3a2d090abd95f2bd77f3dbf0165031aae7face5bc201ce356a23db04bab638d0f5e5ebd9c63263d07b5ea883a47afba00b481efff9af339a0243dee76914507bee1e1029dd22030082444036580d6c876ef57cc27fa7af582f6f827eb9a0773661f5533f38522f465defbb4a492c1016029776c0f5945c60ef4c39a00af8e20916dbbcb0e2a65c61aac0932276cb7f1ca79f834c130a7394b34b51c60828279164868587804609e61b751dc8a89ace110390a8190833f78d64138925a60eb515813f075cc0156c5d135f7b4982946fa3d82cced4d55ac850451605a8313e5aeb9737090a22ce34e397dae027862cc504b1ba4a0b17d87eafdf2b9907d23587825805d4e62d98729e7ea722d0d7c49201b59af57f852b017b5954bb89df059f84f05b3a7d00dfa400612ad6f61c4feafdd7b1b0d1e4968a8c2a71a5209c9a46a1d68815ee3c3d7924ef6f599995f6ec8ce50d9af87b0ef1e5f9ed6d5a95b9f52c1e1a7a08a72de255a6cc75bfbdb7d4154b2a4faccc5aa1404865a9b6549176809ec779e324d22082daaa1546e83f0a772466bcff867a8e0bf22a532fe0ac0bb71925ff521e901f9c8c239747a5c2a68603a03c5ed5589a2a5fc79a9683507838c824aaba7a21c25bfeeb141b8bcf53c6569073009fa2801087cdd387aa3c7bd920634bae8dcece5d67bb088591b53e84e85900190e1c10e75cfe1e829ffd44f984891486877213a5e632726e74735a0735e24a1d6908e50bd84bfee752d2f371ac2cfd4dc692e59630a0252ac53bc39c139048c7e4ac9ea8426aa53b431ff5ada23f237a26f8f2cef90da49100691bd683ef107d8476a68f0e46d43de6681b2b871e8817c21038bb532f6d9ce99caedff12c2809fe97a3361a491fb9d2bbf72636e0507f9c0c6fa6b277f02c2cb9d5c5ce27decbbee8dd915d9219e74bf1f60dd730b4fd6195b401acc335b9b47a24839991776ae1ea0bed04997c8c1fa0e2f14bdfefe5b8ad523fd8437da71e248cf4f49ed728438c1e63fc0e3409e0c76365c9ba7ec93394f80040e1a2fa0ae4e76e88769ec2f18fbe7199c346e4905aa2f0bab21929733a22ccd65052be088c04eac6f7699dfe695e4d855f49eb2513ba18e338ae841c53f13eb650fa91480a4cc33122986aabb1f34e6f9f6bf1abac71a578d5410bcb8c5a728e08a8ce2d29caed4753014b9b281e417a1b6b507adf255de97c0c6981a745142064beaf1fee3713f0e2ee9967b74dff22187124beb8d178d30ebf613078ecd3df2de66667896be0901cb79448c9363f2f8318555d9d7294e37149c1c0896903308099cb5d43e31a63cf1fb64e8def7adc5172cf5cb3cf69790969de7856b814effd36aec423e2046f7a4619b9cef6bb310043b7a6a94160506127497156c90eb762767957ef3e4492f2e74edd182c0d962b8754dabe33e1784f3d285223b9357cdddae1cbf7545d28811c389518e120d2869d296bbfaf6f8272240622652ecd4d5bfcc61c15eb6f9097f52637f55d46b921228895eac4c33501dde203958c1bbf48f3e4804b103333994ce3809348773f8f2ae7ba0347716f6a6509b613aa1f986aa783d83e38464da608b05e5920fc395099496841251055145599d35a8ae0e9d3cffa9e60d4e611fc10c2d13a383fae0355d132992c1a952070c279434428c1c557302325e27466c4d57f27f3ff968e28a93d1d118a5f274470f5ef6514521c8b7c6f97bb1293e62ba88e8775561782c6a86234827a001b2adb645d210fab015767d0af13333f42e6ee1ac3e9ae5d4dfec9d025ae771da3ec2902639d29185687c1d05bb706b2e69e6c488e3d2905192878af2cbe3a0a571a3257883d7deda3df3a225b13d387348a3baab4480fac0f93091953df4e9d9d43288b9160b5fa0fd58adaa7fbe0592dca3aa41b9eab98f224b9353b3df871cd475544a1dd9ec7a2606b4c12c72a7a4d5fcab2370098209104239bbc120bc951032d7a8f3d4ff1e6a2e1f2a1a0505145af3ad5328efdd10b1eb2c0fd310c9be06e48b120ad16da4ae0f544c765a8afb7b55649611688011a2ce82317c4101173c327d5b4186120f5707e64d966041cbfad98c7b352d5d79ea7343da22b68050b7c64bad50e72440c0c629331c3e25124d48e776cdb6c34c7c3a0bba91527ef101f691a9365e06ba0dcc7bdc8d8a98816200b48320501adfe0ed6a025071a7d7976d3f937a66a4bcd62fc89f336c21bd1ffc9aa711aced0208bb70fd747ab7ddf1389e951e89944121e11b7511a812c41386684a53c373e5ae11799944802cfd5528339fe373e7a6af1388faa44ae8843236e0be7e0eba230d83494a327f31a719424dc5ce6b55d649dd8185c7e8cce9baa783099dc94bf4fc81981e8a1b031ba05a42f84a256ee9e164819d5c7fcf73ff62318a87701c0a9878a3e9761e95120747ba2f9c7fac08972be9192d163c93bf84c290948eb3602a52b7c9505fabaf76f18f0b2895dfa76910d1b18437ce9b2e6f95750487c1b00a553300508c7f3e0ff8318f4140051b21008c1f08eb0fb31bba0aad94bec6e6b354c5414058c97551479ffa69ceaefcd0bd14c04e3725ec517eb08d6e3d29576f02fdfdc8e9db0aaa0f4f148699cca24620e5496a24f7cd9a25272347b4174d1a6c0d3adca44efc7c48061ba46ca8fc02dad6680b7949e31b8e4b590fe5b94f217f070b1ee1fa80c7e6f75bf5032088e985b116f714a27286bb4da71e78d8be76b6768b12d6b45bddd160f7cc5ce6150258bc7d5e2e67f88795eba33f182735bc99078f8c0230020eaa19b4fe7d5c822e18bb2f737a078f296a8cf2207974b8fc9c82629daef2789b33a6c3d792de4b78332955a5028f7653a7c61be533f2f7c816baab1033d6e74d76fdb41f9c09130af20cd6edae680de2d13eea87b0c53864505adf69e621fd221de0cc01281ef7a87a624237f88e7bc6d89107f823c8fd2df469a5b196e25607dfffd21ba8aa9c5e29034e4536fc4ded73b44953f9d97186449bd4b81b83974f62c2cce99e120e94ff468248c47ab6146e1c11d307aa38baa49f94050340fc6de6aaa4b7ce9f5e4a0bd52bb238deb2d52b53249e7b0f43aa9aa07f941fe3091e07b0db3c8826dce3116ab7279e564b13cbaca636fc1fe3b3040b9a06</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-up">      <input class="hbe hbe-input-field hbe-input-field-up" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-up" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-up">此文档不共享</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。</summary>
    
    
    
    <category term="idea-jrebel插件激活" scheme="http://ann-zhgy.github.io/categories/idea-jrebel%E6%8F%92%E4%BB%B6%E6%BF%80%E6%B4%BB/"/>
    
    
    <category term="idea-jrebel插件激活" scheme="http://ann-zhgy.github.io/tags/idea-jrebel%E6%8F%92%E4%BB%B6%E6%BF%80%E6%B4%BB/"/>
    
    <category term="passwd-b" scheme="http://ann-zhgy.github.io/tags/passwd-b/"/>
    
  </entry>
  
  <entry>
    <title>拜占庭将军问题</title>
    <link href="http://ann-zhgy.github.io/2023/04/fc431d4d.html"/>
    <id>http://ann-zhgy.github.io/2023/04/fc431d4d.html</id>
    <published>2023-04-28T06:08:53.000Z</published>
    <updated>2023-11-15T06:22:06.590Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>拜占庭将军问题（The Byzantine GeneralsProblem），它其实是借拜占庭将军的故事展现了分布式共识问题，还探讨和论证了解决的办法。</p></blockquote><span id="more"></span><h1 id="苏秦的困境">苏秦的困境</h1><p>战国时期，齐、楚、燕、韩、赵、魏、秦七雄并立，后来秦国的势力不断强大起来，成了其余六国的共同威胁。于是，这六个国家决定联合，全力抗秦，免得被秦国各个击破。一天，苏秦作为合纵长，挂六国相印，带着六国的军队叩关函谷，驻军在了秦国边境，为围攻秦国作准备。但是，因为各国军队分别驻扎在秦国边境的不同地方，所以军队之间只能通过信使互相联系，这时，苏秦面临了一个很严峻的问题：如何统一大家的作战计划？</p><p>万一一些诸侯国在暗通秦国，发送误导性的作战信息，怎么办？如果信使被敌人截杀，甚至被敌人间谍替换，又该怎么办？这些都会导致自己的作战计划被扰乱，然后出现有的诸侯国在进攻，有的诸侯国在撤退的情况，而这时，秦国一定会趁机出兵，把他们逐一击破的。</p><p><strong>所以，如何达成共识，制定统一的作战计划呢？苏秦他很愁。</strong></p><p>这个故事，是拜占庭将军问题的一个简化表述，苏秦面临的就是典型的共识难题，也就是如何在可能有误导信息的情况下，采用合适的通讯机制，让多个将军达成共识，制定一致性的作战计划？</p><h1 id="二忠一叛难题">二忠一叛难题</h1><p>先假设只有三个国家要攻打秦国，这三个国家有三个将军，分别叫齐、楚、燕。同时，又因为秦国很强大，所以只有半数以上的将军参与进攻，才能击败敌人，在这个期间，将军们彼此之间需要通过信使传递消息，然后协商一致之后，才能在同一时间点发动进攻。</p><p>有一天，这三位将军各自一脸严肃地讨论明天是进攻还是撤退，并让信使传递信息，按照 “少数服从多数” 的原则投票表决，两个人意见一致就可以了，比如：</p><ol type="1"><li>齐根据侦查情况决定撤退；</li><li>楚和燕根据侦查信息，决定进攻。</li></ol><p>那么按照原则，齐也会进攻。最终，3 支军队同时进攻，大败秦军。（本身的决定也是影响最终决定的因素之一，比如齐准备撤退，楚燕准备进攻，按照少数服从多数原则，2 进攻&gt; 1 撤退，最终齐进攻）</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230505095625" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230505095625.png" style="width: 100%;"></p></div><hr><p>问题来了：如果有人暗通秦国，做了叛徒，就会出现作战不一致的情况</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230911103611" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230911103611.png" style="width: 100%;"></p></div><ul><li>如上图所示，齐最终选择撤退，楚选择进攻，叛徒随机而变，最终的结果就是楚军失败，最终齐楚被秦逐一蚕食。这就是<strong>二忠一叛</strong>难题</li></ul><h2 id="二忠一叛难题怎么解决">二忠一叛难题怎么解决</h2><h3 id="解决办法一口信消息型拜占庭问题之解">解决办法一：口信消息型拜占庭问题之解</h3><p>三位将军分别拨出一部分军队交给苏秦带领，苏芩参与作战计划的讨论并执行命令。这样，原本的3 位将军的作战讨论就变成了 4位将军的作战讨论，这样可以增加讨论中忠诚将军的数量。</p><p>按照上面的约定，如果没有命令，就执行预设的默认命令：“撤退 "。除此之外，还约定一些流程来发送作战信息、执行作战指令，比如，<strong>进行两轮作战信息协商</strong>。</p><p><strong>第一轮：</strong></p><ul><li>先发送作战消息的将军作为指挥官，其他将军作为副官</li><li>指挥官将其作战消息发送给每位副官</li><li>每位副官，将从指挥官处收到左展信息，作为其作战指令；如果没有收到消息，使用 “撤退 " 作为作战指令</li></ul><p><strong>第二轮：</strong></p><ul><li>除了第一轮的指挥官外，剩余的 3 位将军将分别作为指挥官想另外两位见滚发送作战消息</li><li>这三位将军将按照 “少数服从多数 " 的原则执行收到的作战指令</li></ul><p><strong>图示：</strong></p><p>叛徒作为副将</p><p>第一轮：</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230911143342" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230911143342.png" style="width: 100%;"></p></div><p>第二轮：</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230911144114" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230911144114.png" style="width: 100%;"></p></div><ul><li>在叛徒作为副将捣乱的情况下，按照少数服从多数的原则，在第二轮投票统计中，齐楚燕都会选择进攻</li></ul><p>叛徒作为统领</p><p>第一轮：</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230911144557" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230911144557.png" style="width: 100%;"></p></div><p>第二轮：</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230911144643" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230911144643.png" style="width: 100%;"></p></div><ul><li>在叛徒作为统领时，在第二轮投票中，最终齐楚燕也是会选择进攻</li></ul><p>这个解决办法是兰伯特在论文《<a href="https://www.microsoft.com/en-us/research/publication/byzantine-generals-problem/">TheByzantine GeneralsProblem</a>》中提到的口信消息型拜占庭问题之解：<strong>如果叛将人数为m，将军人数不能少于 3m + 1</strong>，那么拜占庭将军问题就能解决了。</p><hr><p>这个算法有个前提，也就是叛将人数 m，或者说能容忍的叛将数m，是已知的。在这个算法中，叛将数 m 决定递归循环的次数（也就是说，叛将数m 决定将军们要进行多少轮作战信息协商），即 <span class="math inline">\(m+1\)</span>轮（所以，你看，只有楚是叛变的，那么就进行了两轮）。你也可以从另外一个角度理解：n位将军，最多能容忍 <span class="math inline">\((n - 1) / 3\)</span>位叛将。关于这个公式，你只需要记住就好了，推导过程你可以参考论文。</p><p>不过，这个算法虽然能解决拜占庭将军问题，但它有一个限制：如果叛将人数为 m，那么将军总人数必须不小于<span class="math inline">\(3m + 1\)</span>。</p><p>在二忠一叛的问题中，在存在 1 位叛将的情况下，必须增加 1 位将军，将 3 位将军协商共识，转换为 4 位将军协商共识，这样才能实现忠诚将军的一致性作战计划。</p><h3 id="解决办法二签名消息型拜占庭问题之解">解决办法二：签名消息型拜占庭问题之解</h3><p>苏秦还可以通过签名的方式，在不增加将军人数的情况下，解决二忠一叛的难题。首先，苏秦要通过印章、虎符等信物，实现这样几个特性：</p><ul><li>忠诚将军的签名无法伪造，而且对他签名消息的内容进行任何更改都会被发现；</li><li>任何人都能验证将军签名的真伪。</li></ul><p>这时，如果忠诚的将军，比如齐先发起作战信息协商，一旦叛将小楚修改或伪造收到的作战信息，那么燕在接收到楚的作战信息的时候，会发现齐的作战信息被修改，楚已叛变，这时他将忽略来自楚的作战信息，最终执行齐发送的作战信息。</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230912112238" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230912112238.png" style="width: 100%;"></p></div><p>如果是叛徒楚先发送误导的消息，那么，齐燕将按照一定的规则在排序后的所有接收到的指令中选取一个指令执行，最终执行一致的作战计划。</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230912112916" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230912112916.png" style="width: 100%;"></p></div><p>这个解决办法，是兰伯特在论文中提到的签名消息型拜占庭问题之解。而通过签名机制约束叛将的叛变行为，任何叛变行为都会被发现，也就会实现无论有多少忠诚的将军和多少叛将，忠诚的将军们总能达成一致的作战计划。</p><p>签名消息的拜占庭问题之解，也是需要进行 m+1 轮（其中 m 为叛将数，所以你看，只有楚、燕是叛变的，那么就进行了三轮协商）。你也可以从另外一个角度理解：n 位将军，能容忍 (n- 2)位叛将（只有一位忠将没有意义，因为此时不需要达成共识了）。同时，这也是一个比较理论化的算法。</p><hr><p>拜占庭问题是最为复杂的分布式故障的场景，因为其同时包含了故障场景和恶意场景。在存在恶意场景时，必须使用<strong>拜占庭容错算法</strong>；仅存在故障场景时，只需要使用<strong>非拜占庭容错算法 | 故障容错算法</strong>就可以了</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;拜占庭将军问题（The Byzantine Generals
Problem），它其实是借拜占庭将军的故事展现了分布式共识问题，还探讨和论证了解决的办法。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="拜占庭问题" scheme="http://ann-zhgy.github.io/tags/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>学习路径</title>
    <link href="http://ann-zhgy.github.io/2023/04/32213c97.html"/>
    <id>http://ann-zhgy.github.io/2023/04/32213c97.html</id>
    <published>2023-04-28T02:12:10.000Z</published>
    <updated>2023-11-15T06:22:06.590Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>随着项目的发展，企业在实际生产中使用的是都是分布式进行部署，但是既然是分布式，那就会涉及到分布式不得不面对的问题：容错、可用、一致性</p></blockquote><span id="more"></span><h1 id="分布式算法的四度空间四个重要指标">分布式算法的四度空间（四个重要指标）</h1><table><thead><tr class="header"><th style="text-align: center;"></th><th style="text-align: center;">拜占庭容错</th><th style="text-align: center;">一致性</th><th style="text-align: center;">性能</th><th style="text-align: center;">可用性</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;"> 2PC</td><td style="text-align: center;"> 否</td><td style="text-align: center;">强一致</td><td style="text-align: center;">低</td><td style="text-align: center;">低</td></tr><tr class="even"><td style="text-align: center;"> TCC</td><td style="text-align: center;"> 否</td><td style="text-align: center;">最终一致</td><td style="text-align: center;">低</td><td style="text-align: center;">低</td></tr><tr class="odd"><td style="text-align: center;"> Paxos</td><td style="text-align: center;"> 否</td><td style="text-align: center;">强一致</td><td style="text-align: center;">中</td><td style="text-align: center;">中</td></tr><tr class="even"><td style="text-align: center;"> ZAB</td><td style="text-align: center;"> 否</td><td style="text-align: center;">最终一致</td><td style="text-align: center;">中</td><td style="text-align: center;">中</td></tr><tr class="odd"><td style="text-align: center;"> Raft</td><td style="text-align: center;"> 否</td><td style="text-align: center;">强一致</td><td style="text-align: center;">中</td><td style="text-align: center;">中</td></tr><tr class="even"><td style="text-align: center;"> Gossip</td><td style="text-align: center;"> 否</td><td style="text-align: center;">最终一致</td><td style="text-align: center;">高</td><td style="text-align: center;">高</td></tr><tr class="odd"><td style="text-align: center;"> Quorum NWR</td><td style="text-align: center;"> 否</td><td style="text-align: center;">强一致</td><td style="text-align: center;">中</td><td style="text-align: center;">中</td></tr><tr class="even"><td style="text-align: center;"> PBFT</td><td style="text-align: center;"> 是</td><td style="text-align: center;"> N/A</td><td style="text-align: center;"> 低</td><td style="text-align: center;">中</td></tr><tr class="odd"><td style="text-align: center;"> POW</td><td style="text-align: center;"> 是</td><td style="text-align: center;"> N/A</td><td style="text-align: center;"> 低</td><td style="text-align: center;">中</td></tr></tbody></table><h2 id="拜占庭容错">拜占庭容错</h2><p>拜占庭错误是莱斯利・兰伯特在《拜占庭将军问题》中提出的一个错误模型，描述了一个完全不可信的场景，除了存在故障行为，还存在恶意行为。顾名思义，拜占庭容错（ByzantineFault Tolerance，BFT），就是指能容忍拜占庭错误了。</p><p>斐拜占庭容错又叫做<strong>故障容错（Crash FaultTolerance，CFT）</strong>，解决的是分布式系统中存在故障，但不存在恶意节点的共识问题，比如进程奔溃，服务器硬件故障等等。</p><p>一般而言，在可信环境（比如企业内网）中，系统具有故障容错能力就可以了，常见的算法有二阶段提交协议（2PC）、TCC（Try-Confirm-Cancel）、Paxos 算法、ZAB 协议、Raft 算法、Gossip 协议、QuorumNWR 算法。</p><p>而在不可信的环境（比如有人做恶）中，这时系统需要具备拜占庭容错能力，常见的拜占庭容错算法有 POW 算法、PBFT 算法。</p><h2 id="一致性">一致性</h2><p>分布式系统中，一致性分为三类：</p><ul><li>强一致性：保证写操作完成后，任何后续访问都能马上读取到更新后的值</li><li>弱一致性：写操作完成后，系统不能保证后续访问都能读取到更新后的值</li><li>最终一致性：保证如果对某个对象没有新的写操作了，最终后续访问都能读取到相同的最近更新的值</li></ul><p>但是，强一致性是有多重含义的：</p><ol type="1"><li>在埃里克・布鲁尔的猜想中，CAP 中的强一致性（也就是 C）是指 ACID 的 C，系统状态的一致性，而这种一致性，可以通过二阶段提交协议来实现。</li><li>在 CAP 定理中，CAP 中的强一致性（也就是 C）是指原子一致性（也就是线性一致性）。其中，Paxos、Raft 能实现线性一致性，而 ZooKeeper 基于读性能的考虑，它通过 ZAB 协议提供的是最终一致性。</li></ol><p>一般而言，在需要系统状态的一致性时，你可以考虑采用二阶段提交协议、TCC。在需要数据访问是的强一致性时，你可考虑 Raft 算法。在可用性优先的系统，你可以采用 Gossip 协议来实现最终一致性，并实现 QuorumNWR 来提供强一致性。</p><p>另外，很多人将 Consensus（共识）当成了一致性，也就是称为 Paxos、Raft 为一致性算法，其实 Paxos 和 Raft 是共识算法。而之所以出现这个问题，是因为在很多中文文章中，将 Consensus 和 Consistency 都翻译成了一致性，其实这样是不合适的，因为共识（Consensus）和一致性（Consistency）是两个完全不同的概念。</p><ul><li>共识：各节点就指定值（Value）达成共识，而且达成共识后的值，就不再改变了。</li><li>一致性：是指写操作完成后，能否从各节点上读到最新写入的数据，如果立即能读到，就是强一致性，如果最终能读到，就是最终一致性。</li></ul><p>提到共识算法，Paxos 是一个必须要提及的话题，而且 ZAB 协议、Raft 算法都可以看作是 Paxos 变种，所以，你需要了解 Paxos 算法。</p><p>但因为 Paxos 算法的可理解性和可编程性痛点突出，所以在实际场景中，最常的共识算法是 Raft，我们可以基于 Raft 实现强一致性系统</p><h2 id="可用性">可用性</h2><p>可用性说的是任何来自客户端的请求，不管访问哪个非故障节点，都能得到响应数据，但不保证是同一份最新数据，可用性强调的是服务可用。</p><p>一般来讲，采用 Gossip 协议实现最终一致性系统，它的可用性是最高的，因为哪怕只有一个节点，集群还能在运行并提供服务。其次是 Paxos 算法、ZAB 协议、Raft 算法、QuorumNWR 算法、PBFT 算法、POW 算法，它们能容忍一定数节点故障。</p><p>最后是二阶段提交协议、TCC，只有当所有节点都在运行时，才能工作，可用性最低。</p><h2 id="性能">性能</h2><p>一般来讲，采用 Gossip 协议的 AP 型分布式系统，具备水平扩展能力，读写性能是最高的。其次是 Paxos 算法、ZAB 协议、Raft 算法，因为它们都是领导者模型，写性能受限于领导者，读性能取决于一致性实现。最后是二阶段提交协议和 TCC，因为在实现事务时，需要预留和锁定资源，性能相对低。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;随着项目的发展，企业在实际生产中使用的是都是分布式进行部署，但是既然是分布式，那就会涉及到分布式不得不面对的问题：容错、可用、一致性&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="分布式算法" scheme="http://ann-zhgy.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="分布式算法学习路径" scheme="http://ann-zhgy.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84/"/>
    
  </entry>
  
  <entry>
    <title>动归 ——（四）动态规划是啥？</title>
    <link href="http://ann-zhgy.github.io/2023/04/61a8be5c.html"/>
    <id>http://ann-zhgy.github.io/2023/04/61a8be5c.html</id>
    <published>2023-04-18T08:45:53.000Z</published>
    <updated>2023-11-15T06:22:06.593Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动态规划是一种思想">动态规划是一种思想</h1><p>“动态规划算法 "，相信有很多人这个叫，但是更贴切的来说，动态规划是一种思想，指导我们解决问题的思想</p><span id="more"></span><h2 id="算法思想">算法？思想？</h2><p>我们知道<strong>算法 +数据结构</strong>，这是一个紧密的组合，比如说要对一个无序数组排序，数据结构就是数组，可供选择的算法比如：快速排序、选择排序等</p><p>所以，算法其实是一类问题的经验总结，是解决问题的套路。那么思想是什么呢？在学习《数据结构与算法》这门课时，应该都听过很多算法都是使用的<strong>分治思想</strong>，尤其是在归并排序中经常被提及。</p><p>动态规划的思想在于：<strong>你需要利用已经计算好的结果来推导你的计算，即：大规模问题的结果是由小规模问题的结果运算得来的</strong></p><p><strong>算法是一种经验总结，而思想是用来指导我们解决问题的</strong></p><h1 id="动态规划问题的典型特点">动态规划问题的典型特点</h1><h2 id="求最优解问题最大值最小值">求 “最” 优解问题（最大值、最小值）</h2><p>除非碰到的问题是简单到找出一个数组中最大的值这样，对这种问题来说，你可以对数组进行排序，然后取数组头或尾部的元素，如果觉得麻烦，你也可以直接遍历得到最值。否则，你就得考虑使用动态规划来解决这个问题了。这样的问题一般都会让你求最大子数组、求最长递增子数组、求最长递增子序列或求最长公共子串、子序列等等。</p><p>既然是要求最值，不妨先想一下核心问题是什么。其实在真的解决最值问题的时候，你应该按照这样的思考顺序来解决问题：</p><ul><li>优先考虑使用贪心算法的可能性；</li><li>然后是暴力递归进行穷举（但这里的数据规模不大）；</li><li>还是不行呢？选择动态规划！</li></ul><h3 id="乘积最大子数组">1. <strong>乘积最大子数组</strong></h3><p>问题：给你一个整数数组numbers，找出数组中乘积最大的连续子数组（该子数组中至少包含一个数字），返回该子数组的乘积。</p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line"><span class="section">输入: [2,7,-2,4]</span></span><br><span class="line"><span class="section">输出: 14</span></span><br><span class="line"><span class="section">解释: 子数组 [2,7] 有最大乘积 14。</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight subunit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例2：</span><br><span class="line">输入: [<span class="string">-5</span>,0,3,<span class="string">-1</span>]</span><br><span class="line">输出: 3</span><br><span class="line">解释: 结果不能为 15, 因为 [<span class="string">-5</span>,3,<span class="string">-1</span>] 不是子数组，是子序列。</span><br></pre></td></tr></tbody></table></figure><p>首先，很明显这个题目当中包含一个 “最” 字，使用动态规划求解的概率就很大。这个问题的目的就是从数组中寻找一个最大的连续区间，确保这个区间的乘积最大。由于每个连续区间可以划分成两个更小的连续区间，而且大的连续区间的结果是两个小连续区间的乘积，因此这个问题还是求解满足条件的最大值，同样可以进行问题分解，而且属于求最值问题。同时，这个问题与求最大连续子序列和比较相似，唯一的区别就是你需要在这个问题里考虑正负号的问题，其它就相同了。</p><h3 id="最长回文子串">2. <strong>最长回文子串</strong></h3><p>问题：给定一个字符串 s，找到 s 中最长的回文子串。你可以假设 s 的最大长度为 1000。</p><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例<span class="number">1</span>：</span><br><span class="line">输入: <span class="string">"babad"</span></span><br><span class="line">输出: <span class="string">"bab"</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例<span class="number">2</span>：</span><br><span class="line">输入: <span class="string">"cbbd"</span></span><br><span class="line">输出: <span class="string">"bb"</span></span><br></pre></td></tr></tbody></table></figure><p>这个问题依然包含一个 “最” 字，同样由于求解的最长回文子串肯定包含一个更短的回文子串，因此我们依然可以使用动态规划来求解这个问题。</p><h3 id="最长上升子序列">3. <strong>最长上升子序列</strong></h3><p>问题：给定一个无序的整数数组，找到其中最长上升子序列的长度。可能会有多种最长上升子序列的组合，你只需要输出对应的长度即可。</p><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">输入: [<span class="number">10,9,2,5</span>,<span class="number">3,7,66,18</span>]</span><br><span class="line">输出: <span class="number">4</span></span><br><span class="line">解释: 最长的上升子序列是 [<span class="number">2,3,7,66</span>]，它的长度是 <span class="number">4</span>。</span><br></pre></td></tr></tbody></table></figure><p>这个问题依然是一个最优解问题，假设我们要求一个长度为 5 的字符串中的上升自序列，我们只需要知道长度为 4 的字符串最长上升子序列是多长，就可以根据剩下的数字确定最后的结果。</p><h2 id="求可行性true或false">求可行性（True 或 False）</h2><p>判断是否存在一条总和为 x 的路径（如果找到了，就是 True；如果找不到，自然就是 False），或者让你判断能否找到一条符合某种条件的路径，那么这类问题都可以归纳为求可行性问题，硬币找零就属于求可行性的一种</p><h3 id="凑零兑换问题">1. <strong>凑零兑换问题</strong></h3><p>问题：给你 k 种面值的硬币，面值分别为 c1, c2 …ck，每种硬币的数量无限，再给一个总金额amount，问你最少需要几枚硬币凑出这个金额，如果不可能凑出，算法返回 -1。</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line">输入: <span class="attribute">c1</span>=1, <span class="attribute">c2</span>=2, <span class="attribute">c3</span>=5, <span class="attribute">c4</span>=7, amount = 15</span><br><span class="line">输出: 3</span><br><span class="line">解释: 11 = 7 + 7 + 1。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例2：</span><br><span class="line"><span class="section">输入: c1=3, amount =7</span></span><br><span class="line"><span class="section">输出: -1</span></span><br><span class="line"><span class="section">解释: 3怎么也凑不到7这个值。</span></span><br></pre></td></tr></tbody></table></figure><h3 id="字符串交错组成问题">2. <strong>字符串交错组成问题</strong></h3><p>问题：给定三个字符串 s1, s2, s3, 验证 s3 是否是由 s1 和 s2交错组成的。</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line">输入: <span class="attribute">s1</span>=<span class="string">"aabcc"</span>,s2 =<span class="string">"dbbca"</span>,<span class="attribute">s3</span>=<span class="string">"aadbbcbcac"</span></span><br><span class="line">输出: <span class="literal">true</span></span><br><span class="line">解释: 可以交错组成。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight armasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例<span class="number">2</span>：</span><br><span class="line">输入: <span class="built_in">s1</span>=<span class="string">"aabcc"</span>,<span class="built_in">s2</span>=<span class="string">"dbbca"</span>,<span class="built_in">s3</span>=<span class="string">"aadbbbaccc"</span></span><br><span class="line">输出: false</span><br><span class="line">解释:无法交错组成。</span><br></pre></td></tr></tbody></table></figure><h2 id="求方案总数">求方案总数</h2><p>比如给定一个数据结构和限定条件，让你计算出一个方案的所有可能的路径，那么这种问题就属于求方案总数的问题。</p><h3 id="硬币组合问题">1. <strong>硬币组合问题</strong></h3><p>问题：英国的英镑硬币有 1p, 2p, 5p, 10p, 20p, 50p, £1 (100p), 和 £2(200p)。比如我们可以用以下方式来组成 2 英镑：1×£1 + 1×50p + 2×20p + 1×5p +1×2p + 3×1p。问题是一共有多少种方式可以组成 n 英镑？注意不能有重复，比如1 英镑 + 2 个 50P 和 50P+50P+1 英镑是一样的。</p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line"><span class="section">输入: 2</span></span><br><span class="line"><span class="section">输出: 73682 </span></span><br></pre></td></tr></tbody></table></figure><h3 id="路径规划问题">2. 路径规划问题</h3><p>问题：一个机器人位于一个 m x n网格的左上角。机器人每次只能向下或者向右移动一步。机器人试图达到网格的右下角，共有多少路径？</p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line"><span class="section">输入: 2 2</span></span><br><span class="line"><span class="section">输出: 2</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line"><span class="section">输入: 3 3</span></span><br><span class="line"><span class="section">输出: 6</span></span><br></pre></td></tr></tbody></table></figure><ul><li>求方案总数的动态规划问题一般都指的是求 “一个” 方案的所有具体形式。如果是求 “所有” 方案的具体形式，那这种肯定不是动态规划问题，而是使用递归来遍历出所有方案的具体形式。</li></ul><h1 id="有些问题并不是动态规划的问题">有些问题并不是动态规划的问题</h1><h2 id="数据不可排序">数据不可排序</h2><h3 id="最小的k个数"><strong>最小的 k 个数</strong></h3><p>问题：输入整数数组 arr ，找出其中最小的 k个数。例如，输入 4、5、1、6、2、7、3、8 这 8 个数字，则最小的 4 个数字是 1、2、3、4。</p><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line">输入：arr = <span class="comment">[3,2,1]</span>, k = 2</span><br><span class="line">输出：<span class="comment">[1,2]</span> 或者 <span class="comment">[2,1]</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例2：</span><br><span class="line">输入：arr = <span class="comment">[0,1,2,1]</span>, k = 1</span><br><span class="line">输出：<span class="comment">[0]</span></span><br></pre></td></tr></tbody></table></figure><p>我们发现虽然这个问题也是求 “最” 值，但其实只要通过排序就能解决</p><h2 id="数据不可交换non-swapable">数据不可交换（Non-swapable）</h2><p>还有一类问题，可以归类到我们总结的几类问题里去，但是不存在动态规划要求的重叠子问题（比如经典的八皇后问题），那么这类问题就无法通过动态规划求解</p><h3 id="全排列"><strong>全排列</strong></h3><p>问题：给定一个没有重复数字的序列，返回其所有可能的全排列。</p><figure class="highlight inform7"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">输入: <span class="comment">[1,2,3]</span></span><br><span class="line">输出:</span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">  <span class="comment">[1,2,3]</span>,</span></span><br><span class="line"><span class="comment">  <span class="comment">[1,3,2]</span>,</span></span><br><span class="line"><span class="comment">  <span class="comment">[2,1,3]</span>,</span></span><br><span class="line"><span class="comment">  <span class="comment">[2,3,1]</span>,</span></span><br><span class="line"><span class="comment">  <span class="comment">[3,1,2]</span>,</span></span><br><span class="line"><span class="comment">  <span class="comment">[3,2,1]</span></span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>这个问题虽然是求组合，但没有重叠子问题，更不存在最优化的要求</p><h1 id="由于本人对于动归看的很迷所以暂时停止了之后还会继续的">由于本人对于动归看的很迷，所以暂时停止了，之后还会继续的</h1>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;动态规划是一种思想&quot;&gt;动态规划是一种思想&lt;/h1&gt;
&lt;p&gt;“动态规划算法 &quot;，相信有很多人这个叫，但是更贴切的来说，动态规划是一种思想，指导我们解决问题的思想&lt;/p&gt;</summary>
    
    
    
    <category term="动态规划" scheme="http://ann-zhgy.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="动态规划使用" scheme="http://ann-zhgy.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%BD%BF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>动归 ——（三）前置 —— 贪心算法</title>
    <link href="http://ann-zhgy.github.io/2023/04/dd74b71d.html"/>
    <id>http://ann-zhgy.github.io/2023/04/dd74b71d.html</id>
    <published>2023-04-16T06:20:57.000Z</published>
    <updated>2023-11-15T06:22:06.593Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>贪心算法是求解整体最优的真正思路源头，但是这个算法是有局限性的，它只能在局部最优的思想下工作，<strong>那么当贪心算法失效了怎么办？</strong></p></blockquote><h1 id="从最优化问题到递归">从最优化问题到递归</h1><blockquote><p>贪心算法失效的很大一部分原因在于它算的是<strong>局部最优解</strong>，所谓局部最优，就是只考虑当前的最大利益，所以在绝大多数情况下，贪心算法获取的是最优解的一个最大近似解</p></blockquote><span id="more"></span><h2 id="最优化问题的本质">最优化问题的本质</h2><p>所谓最优化问题，就是指在某些约束条件下，决定可选择的变量应该取何值，使所选定的目标函数达到最优的问题。</p><p>从数学意义上说，最优化方法是一种求极值的方法，即在一组约束为等式或不等式的条件下，使系统的目标函数达到极值，即最大值或最小值。</p><p>如果只是从概念上来看最优化问题真的是玄而又玄，所以用硬币找零的例子，引出最优化的概念。</p><p>在数学里一切都是函数，现在我们先把这个问题用函数形式来表示。为了易于理解，下面我们不会使用向量。</p><p>我们假定需要给出<span class="math inline"> \(y\)</span> 元硬币，硬币面额是 5 元和 3 元，求出需要的最少硬币数量。所谓的最少硬币数量就是 5 元硬币和 3 元硬币的总数，假定 5 元硬币数量为<span class="math inline"> \(x_{0}\)</span>，3 元硬币数量为<span class="math inline"> \(x_{1}\)</span>，那么用函数表示就是：</p><p><span class="math display">\[f(x_{0}, x_{1})=x_{0}+x_{1}\]</span></p><p>这就是所谓的 “目标函数”。</p><p>但是这个函数现在是没有任何限制的，我们希望对此进行约束，使得 5 元硬币和 3 元硬币的面值综合为<span class="math inline"> \(y\)</span>。为此我们需要给出一个约束：</p><p><span class="math display">\[5x_{0}+3x_{1}=y\]</span></p><p>这个时候我们的问题就变成了，当满足这个约束条件的时候，求解函数中的变量<span class="math inline"> \(x_{0}\)</span> 和<span class="math inline"> \(x_{1}\)</span>，使得目标函数<span class="math inline"> \(f(x_{0},x_{1})\)</span> 的取值最小。如果用数学的描述方法来说的话，就是下面这样：</p><p><span class="math display">\[{argmin}_{(x_0,x_1)in S} (x_0+x_1)\]</span></p><p>这个就是我们常见的<span class="math inline"> \(argmin\)</span> 表示方式。它的意思是：当<span class="math inline"> \((x_{0}, x_{1})\)</span> 属于<span class="math inline"> \(S\)</span> 这个集合的时候，希望知道<span class="math inline"> \(x_{0} + x_{1}\)</span> 的最小值是多少。其中<span class="math inline"> \(S\)</span> 集合的条件就是上面的约束。</p><p>所以最优化问题在我们生活中是非常普遍的，只不过大多数问题可能都像硬币找零问题这样看起来普普通通，概念其实是不难理解的。</p><p>回到硬币找零这个问题上。由于<span class="math inline"> \((x_{0},x_{1})\)</span> 都是离散的值，因此所有满足上述约束的<span class="math inline"> \((x_{0},x_{1})\)</span> 组合，就是我们最终所求的集合！而这个最优化问题的本质就是：从所有满足条件的组合<span class="math inline"> \((x_{0},x_{1})\)</span> 中找出一个组合，使得<span class="math inline"> \(x_{0}+x_{1}\)</span> 的值最小。</p><p>所以，你会发现在这种离散型的最优化问题中，本质就是从所有满足条件的组合（能够凑出<span class="math inline"> \(y\)</span> 元）中选择出使得我们的目标函数（所有硬币数量之和）最小的那个组合。而这个所谓满足条件的组合不就是<span class="math inline"> \(argmin\)</span> 公式中的那个集合<span class="math inline"> \(S\)</span> 吗？</p><p>因此，这种离散型的最优化问题就是去所有满足条件的组合里找出最优解的组合。我曾多次提到的<strong>局部最优</strong>就是在一定条件下的最优解，而<strong>整体最优</strong>就是我们真正希望得到的最优解。</p><p>那么我们的视角就转到另一边了：如何去找到这个最优解呢？</p><h2 id="最优组合的求解策略枚举与递归">最优组合的求解策略：枚举与递归</h2><p>对于大多数问题来说，最直接暴力的方法就是穷举，但是基本上也是效率最低的方法</p><p>在硬币找零问题中，假设现在需要给出 25 元的硬币，有两种组合，分别是 (5,0) 和 (2,5)，也就是 5 个 5 元硬币，或者 2 个 5 元硬币加上 5 个 3 元硬币，那么硬币数量最小的组合肯定就是 (5,0)。</p><p>所以最简单的方法就是找出所有满足条件的组合，也就是上面两个组合，然后去看这些组合中的最优解。</p><p>现在问题来了，怎么获取那些组合呢？递归</p><h1 id="递归与问题表达">递归与问题表达</h1><p>其实最优化问题使用递归处理是很清晰的，递归是处理组合搜索的一种最直观的思路。那么，什么是递归？</p><h2 id="斐波那契数列">斐波那契数列</h2><p>斐波那契数列可以很好的展示递归的概念</p><blockquote><p>斐波那契数通常用 F (n) 表示，形成的序列称为斐波那契数列。该数列由 0 和1 开始，后面的每一项数字都是前面两项数字的和：</p><p><span class="math display">\[F(n)=F(n-1)+F(n-2),n&gt;1\]</span></p><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例 <span class="number">1</span>：</span><br><span class="line"></span><br><span class="line">输入：<span class="number">2</span></span><br><span class="line">输出：<span class="number">1</span></span><br><span class="line">解释：F<span class="comment">(2)</span> = F<span class="comment">(1)</span> + F<span class="comment">(0)</span> = <span class="number">1</span> + <span class="number">0</span> = <span class="number">1</span>。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例 <span class="number">2</span>：</span><br><span class="line"></span><br><span class="line">输入：<span class="number">3</span></span><br><span class="line">输出：<span class="number">2</span></span><br><span class="line">解释：F<span class="comment">(3)</span> = F<span class="comment">(2)</span> + F<span class="comment">(1)</span> = <span class="number">1</span> + <span class="number">1</span> = <span class="number">2.</span></span><br></pre></td></tr></tbody></table></figure></blockquote><p>这个问题最简单的实现：</p><blockquote><p><code>AbstraceFibonacci</code> 为了测试方便，抽取抽象类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractFibonacci</span> {</span><br><span class="line">    <span class="meta">@Getter(AccessLevel.PROTECTED)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取计算结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 第几个斐波那契数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFibonacciResult</span><span class="params">(<span class="type">int</span> n)</span> {</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        }</span><br><span class="line">        startStatisticsCalcCount();</span><br><span class="line">        preCalcHandle(n);</span><br><span class="line">        <span class="keyword">return</span> calcResult(n);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取计算的次数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">calcCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 具体的计算的逻辑</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 第几个斐波那契数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">calcResult</span><span class="params">(<span class="type">int</span> n)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算前处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 第几个斐波那契数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">preCalcHandle</span><span class="params">(<span class="type">int</span> n)</span> {}</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算次数自增</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">countAutoincrementOne</span><span class="params">()</span> {</span><br><span class="line">        count++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化计算次数，开始统计</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">startStatisticsCalcCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">this</span>.count = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></blockquote><ul><li><p>循环实现</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopFibonacci</span> <span class="keyword">extends</span> <span class="title class_">AbstractFibonacci</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcResult</span><span class="params">(<span class="type">int</span> n)</span> {</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">int</span> <span class="variable">fib1</span> <span class="operator">=</span> <span class="number">0</span>, fib2 = <span class="number">1</span>, temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) {</span><br><span class="line">            countAutoincrementOne();</span><br><span class="line">            temp = fib1 + fib2;</span><br><span class="line">            fib1 = fib2;</span><br><span class="line">            fib2 = temp;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getCount();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>递归实现</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecursionFibonacci</span> <span class="keyword">extends</span> <span class="title class_">AbstractFibonacci</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcResult</span><span class="params">(<span class="type">int</span> n)</span> {</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        countAutoincrementOne();</span><br><span class="line">        <span class="keyword">return</span> calcResult(n - <span class="number">2</span>) + calcResult(n - <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getCount();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>可以比较一下循环实现和递归实现的不同：递归的实现看起来更加符合题目，更容易理解；循环理解起来相对复杂</p></li></ul><hr><p>上文中最后的实现就使用到了递归</p><h1 id="深入理解递归">深入理解递归</h1><h2 id="堆栈与方法状态存储">堆栈与方法状态存储</h2><p>拿 <code>Java</code> 举例，程序运行时，JVM为每个线程提供了一个虚拟机栈，当方法 A 调用方法 B 时，JVM 会先保存方法 A在调用点的上下文信息，比如：局部变量、代码行数…… 之后将方法 B需要的参数、返回类型等信息封装为一个栈帧压入到虚拟机栈中，因为栈是一个先进后出的结构，方法B 执行完成后，方法 B 的栈帧就会弹栈，方法 A 再继续执行</p><ul><li>递归调用一定会有保存现场、封装栈帧等操作，所以一般来说效率是要比循环低很多的</li></ul><h2 id="递归与回溯">递归与回溯</h2><p>在求解最优化的问题时我们经常使用 <strong>回溯</strong>这个策略，对于这类问题，回溯和递归一样重要</p><h2 id="斐波那契数列递归存在的问题">斐波那契数列：递归存在的问题</h2><p>以递归版的斐波那契数列的递归实现为例，画出执行流程：n = 7</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20230417175449" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230417175449.png" style="width: 100%;"></p></div><p>从上面图片可以看出递归形式的斐波那契是包含很多重复计算的，上文的硬币求解问题一样，存在很多重复计算，这就是暴力穷举的弊端</p><h1 id="暴力递归的问题与优化">暴力递归的问题与优化</h1><h2 id="问题">问题</h2><p>暴力递归会穷举所有的情况，但是这种穷举法执行效率低下</p><p>上图中看到的那些重复的节点其实就是重叠子的问题</p><h2 id="优化">优化</h2><p>递归最重要的优化点就是如何避免重复计算</p><h3 id="备忘录">备忘录</h3><p>所谓备忘录就是将递归的中间计算结果缓存起来，等到再次调用到相同计算时，直接获取结果</p><ol type="1"><li><p>斐波那契数列 + 备忘录</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecursionFibonacciWithMemorandum</span> <span class="keyword">extends</span> <span class="title class_">AbstractFibonacci</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] cache = {};</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcResult</span><span class="params">(<span class="type">int</span> n)</span> {</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (cache[n - <span class="number">1</span>] != -<span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> cache[n - <span class="number">1</span>];</span><br><span class="line">        }</span><br><span class="line">        countAutoincrementOne();</span><br><span class="line">        <span class="type">int</span> <span class="variable">fibonacciN</span> <span class="operator">=</span> calcResult(n - <span class="number">2</span>) + calcResult(n - <span class="number">1</span>);</span><br><span class="line">        cache[n - <span class="number">1</span>] = fibonacciN;</span><br><span class="line">        <span class="keyword">return</span> fibonacciN;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calcCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getCount();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">preCalcHandle</span><span class="params">(<span class="type">int</span> n)</span> {</span><br><span class="line">        cache = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        Arrays.fill(cache, -<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>我们可以比较一下三种实现计算次数的区别：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    List&lt;AbstractFibonacci&gt; fibonacciList = Arrays.asList(<span class="keyword">new</span> <span class="title class_">LoopFibonacci</span>(), <span class="keyword">new</span> <span class="title class_">RecursionFibonacci</span>(), <span class="keyword">new</span> <span class="title class_">RecursionFibonacciWithMemorandum</span>());</span><br><span class="line">    fibonacciList.forEach(fibonacci -&gt; {</span><br><span class="line">        System.out.println(<span class="string">"------"</span> + fibonacci.getClass().getName() + <span class="string">"------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"result = "</span> + fibonacci.getFibonacciResult(<span class="number">21</span>));</span><br><span class="line">        System.out.println(<span class="string">"calcCount = "</span> + fibonacci.calcCount());</span><br><span class="line">     });</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure><div style="max-width: 75%; margin: auto; opacity: 0.95;"><pre><code>&lt;img alt="20230417200313" src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230417200313.png" style="width: 100%;"&gt;</code></pre></div></li><li><p>硬币问题 + 备忘录</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03</span> <span class="keyword">extends</span> <span class="title class_">AbstractCoinChange</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span>[] cache;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Demo03</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span>[] parValue)</span> {</span><br><span class="line">        <span class="built_in">super</span>(total, parValue);</span><br><span class="line">        cache = <span class="keyword">new</span> <span class="title class_">int</span>[total];</span><br><span class="line">        Arrays.fill(cache, Integer.MIN_VALUE);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getMinCount(getTotal(), <span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span> parValueIndex)</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">parValueLength</span> <span class="operator">=</span> getParValue().length;</span><br><span class="line">        <span class="keyword">if</span> (parValueLength == parValueIndex) {</span><br><span class="line">            <span class="keyword">return</span> NO_RESULT_CODE;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">int</span> <span class="variable">currCoinValue</span> <span class="operator">=</span> getParValue()[parValueIndex];</span><br><span class="line">        <span class="type">int</span> <span class="variable">currCoinValueMaxCount</span> <span class="operator">=</span> total / currCoinValue;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> currCoinValueMaxCount; count &gt;= <span class="number">0</span>; count--) {</span><br><span class="line">            <span class="type">int</span> <span class="variable">rest</span> <span class="operator">=</span> total - currCoinValue * count;</span><br><span class="line">            <span class="comment">// 如果余额为 0，说明组合完毕了，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (rest == <span class="number">0</span>) {</span><br><span class="line">                cache[total - <span class="number">1</span>] = count;</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (cache[rest - <span class="number">1</span>] != Integer.MIN_VALUE) {</span><br><span class="line">                <span class="keyword">return</span> cache[rest - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// 使用剩余的面额尝试组合</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">restCount</span> <span class="operator">=</span> getMinCount(rest, parValueIndex + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 如果没有返回 NO_RESULT_CODE，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (restCount != NO_RESULT_CODE) {</span><br><span class="line">                <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> count + restCount;</span><br><span class="line">                cache[rest - <span class="number">1</span>] = result;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> NO_RESULT_CODE;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>运行结果：</p><blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">794729356</span>;</span><br><span class="line">    <span class="type">int</span>[] parValue = {<span class="number">25</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">3</span>};</span><br><span class="line">    List&lt;AbstractCoinChange&gt; coinChangeList = Arrays.asList(<span class="keyword">new</span> <span class="title class_">Demo01</span>(total, parValue), <span class="keyword">new</span> <span class="title class_">Demo02</span>(total, parValue), <span class="keyword">new</span> <span class="title class_">Demo03</span>(total, parValue));</span><br><span class="line">    coinChangeList.forEach(coinChange -&gt; {</span><br><span class="line">        System.out.println(<span class="string">"------"</span> + coinChange.getClass().getName() + <span class="string">"------"</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">int</span> <span class="variable">minCount</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10000000</span>; i &gt; <span class="number">0</span>; i--) {</span><br><span class="line">            minCount = coinChange.getMinCount();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"result = "</span> + minCount);</span><br><span class="line">        System.out.println(<span class="string">"time = "</span> + (System.currentTimeMillis() - start));</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></blockquote><div style="max-width: 75%; margin: auto; opacity: 0.95;"><pre><code>&lt;img alt="20230418102559" src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic20230418102559.png" style="width: 100%;"&gt;</code></pre></div><p><code>Demo01</code> 是错误的实现，可以不用看，<code>Demo02</code>是不包含备忘录的实现，<code>Demo03</code>是包含备忘录的实现，可以看出其运行时间差距是很大的</p></li></ol><h1 id="硬币问题">硬币问题</h1><p>我们提到过递归的运行效率通常要比循环慢得多，所以对于硬币问题，或许我们也可以找到使用循环解决的方法呢？</p><h2 id="递归和循环解决问题思路的不同">递归和循环解决问题思路的不同</h2><p>我们可以对比斐波那契的两种实现方式：</p><ol type="1"><li>递归：当使用递归实现时，可以很明显地看到斐波那契的计算公式及定义<span class="math inline">\(f(n) = f(n-1) +f(n-2)\)</span>，所以，使用递归其实是自顶向下的进行计算。我先计算 <span class="math inline">\(f(n)\)</span> 的值，但是我在计算 <span class="math inline">\(f(n)\)</span> 的值的时候发现我需要计算 <span class="math inline">\(f(n-1)\)</span> 和 <span class="math inline">\(f(n-2)\)</span> 的值，那我就去计算 <span class="math inline">\(f(n-1)\)</span> 和 <span class="math inline">\(f(n-2)\)</span> 的值，直到计算到 <span class="math inline">\(f(1)\)</span> 和 <span class="math inline">\(f(2)\)</span>，因为 <span class="math inline">\(f(1)\)</span> 和 <span class="math inline">\(f(2)\)</span>是计算斐波那契的最基础的两个值。</li><li>循环：当使用循环实现时，我们其实是先定义好的 <span class="math inline">\(f(1)\)</span> 和 <span class="math inline">\(f(2)\)</span>，然后开始计算 <span class="math inline">\(f(3)\)</span>，直到计算到 <span class="math inline">\(f(n)\)</span>，所以使用循环其实是自底向上的进行计算</li></ol><p>所以，<strong>当我们使用递归加备忘录时，我们需要查询子问题是否计算过，而我们使用循环时，我们是先处理的子问题，然后才处理的大问题，我们可以保证所有的子问题一定是处理过的</strong></p><h2 id="循环实现">循环实现</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo04</span> <span class="keyword">extends</span> <span class="title class_">AbstractCoinChange</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Demo04</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span>[] parValue)</span> {</span><br><span class="line">        <span class="built_in">super</span>(total, parValue);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[getTotal() + <span class="number">1</span>];</span><br><span class="line">        Arrays.fill(result, NO_RESULT_CODE);</span><br><span class="line">        result[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= getTotal(); i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> value : getParValue()) {</span><br><span class="line">                <span class="keyword">if</span> (i - value &lt; <span class="number">0</span>) {</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (result[i - value] == NO_RESULT_CODE) {</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                result[i] = result[i - value] + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> result[getTotal()];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>其实在实际测试的时候我们会发现这种方式花费的时间会更长，个人理解应该是计算了很多不必要的计算，比如 11 块钱，本来计算一下3、6、11 就好了，但是这种方式从 0 到 11全部计算了一遍，所以花费时间更长</li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;贪心算法是求解整体最优的真正思路源头，但是这个算法是有局限性的，它只能在局部最优的思想下工作，&lt;strong&gt;那么当贪心算法失效了怎么办？&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;从最优化问题到递归&quot;&gt;从最优化问题到递归&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;贪心算法失效的很大一部分原因在于它算的是
&lt;strong&gt;局部最优解&lt;/strong&gt;，所谓局部最优，就是只考虑当前的最大利益，所以在绝大多数情况下，贪心算法获取的是最优解的一个最大近似解&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="动态规划" scheme="http://ann-zhgy.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="贪心算法" scheme="http://ann-zhgy.github.io/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>动归 ——（二）前置 —— 贪心算法</title>
    <link href="http://ann-zhgy.github.io/2023/03/7311facc.html"/>
    <id>http://ann-zhgy.github.io/2023/03/7311facc.html</id>
    <published>2023-03-16T03:27:26.000Z</published>
    <updated>2023-11-15T06:22:06.593Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>任何算法都有它的局限性，贪心算法也如此</strong></p></blockquote><span id="more"></span><h1 id="硬币找零问题">硬币找零问题</h1><blockquote><p>问题：给定 n 种不同面值的硬币，分别记为 c [0], c [1], c [2], …c [n]，同时还有一个总金额 k，编写一个函数计算出<strong>最少</strong>需要几枚硬币凑出这个金额 k？每种硬币的个数不限，且如果没有任何一种硬币组合能组成总金额时，返回-1。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例 1：</span><br><span class="line"></span><br><span class="line">输入：c[0]=1, c[1]=2, c[2]=5, k=12</span><br><span class="line">输出：3 </span><br><span class="line">解释：12 = 5 + 5 + 2</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例 2：</span><br><span class="line"></span><br><span class="line">输入：c[0]=5, k=7</span><br><span class="line">输出：-1</span><br><span class="line">解释：只有一种面值为5的硬币，怎么都无法凑出总价值为7的零钱。</span><br></pre></td></tr></tbody></table></figure></blockquote><p>题目中有一个醒目的提示词，那就是 “最少”。嗯，看起来这是一个求最值的问题，其实也好理解，如果题目不在这里设定这一条件，那么所求结果就不唯一了。</p><p>所以，这是一个求最值的问题。那么求最值的核心问题是什么呢？嗯，无非就是<strong>穷举</strong>，显然，就是把所有可能的凑硬币方法都穷举出来，然后找找看最少需要多少枚硬币，那么最少的凑法，就是这道题目的答案。</p><p>在面试中，一般来说穷举从来都不是一个好方法。除非你要的结果就是所有的不同组合，而不是一个最值。但即便是求所有的不同组合，在计算的过程中也仍然会出现重复计算的问题，我们将这种现象称之为<strong>重叠子问题</strong> 。</p><p>这个关键概念是动态规划当中的一个重要概念。但现在你只需要知道所谓重叠子问题就是：我们在罗列所有可能答案的过程中，可能存在重复计算的情况。</p><h1 id="贪心算法">贪心算法</h1><p>所谓贪心算法，就是指它的每一步计算作出的都是在当前看起来最好的选择，也就是说它所作出的选择只是在某种意义上的局部最优选择，并不从整体最优考虑。这两种选择的思路称作<strong>局部最优解</strong> 和 <strong>整体最优解</strong>。</p><p>因此，我们可以得到贪心算法的基本思路：</p><ol type="1"><li>根据问题来建立数学模型，一般面试题会定义一个简单模型；</li><li>把待求解问题划分成若干个子问题，对每个子问题进行求解，得到子问题的局部最优解；</li><li>把子问题的局部最优解进行合并，得到最后基于局部最优解的一个解，即原问题的答案。</li></ol><hr><p>回到硬币找零的问题，尝试用贪心算法解决问题：从最大的面值开始兑换，最后得出的硬币总数很有可能就是最少的。</p><p>使用一个例子试一试：我们从 c [0]=5, c [1]=3 且 k=11的情况下寻求最少硬币数。按照 “贪心原则”，我们先挑选面值最大的，即为 5 的硬币放入钱包。接着，还有 6 元待解（即 11-5= 6）。这时，我们再次 “贪心”，放入 5 元面值的硬币。</p><blockquote><p>Java 实现</p></blockquote><blockquote><p><code>AbstractCoinChange</code>：因为我们会有多个测试的实现，所以我们使用一个抽象类定义测试的入口，方便我们随时测试</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter(AccessLevel.PROTECTED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractCoinChange</span> {</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">NO_RESULT_CODE</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 总值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 面值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span>[] parValue;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AbstractCoinChange</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span>[] parValue)</span> {</span><br><span class="line">        <span class="built_in">this</span>.total = total;</span><br><span class="line">        <span class="comment">// 确保数组可以从大到小排序</span></span><br><span class="line">        <span class="built_in">this</span>.parValue = Arrays.stream(parValue)</span><br><span class="line">                .boxed()</span><br><span class="line">                .sorted(Comparator.comparing(Integer::intValue).reversed())</span><br><span class="line">                .mapToInt(Integer::intValue)</span><br><span class="line">                .toArray();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 具体算法实现，返回 -1 表示没有结果</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01</span> <span class="keyword">extends</span> <span class="title class_">AbstractCoinChange</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Demo01</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span>[] parValue)</span> {</span><br><span class="line">        <span class="built_in">super</span>(total, parValue);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> getTotal();</span><br><span class="line">        <span class="type">int</span>[] parValue = getParValue();</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> value : parValue) {</span><br><span class="line">            <span class="type">int</span> <span class="variable">currCount</span> <span class="operator">=</span> total / value;</span><br><span class="line">            <span class="type">int</span> <span class="variable">rest</span> <span class="operator">=</span> total - value * currCount;</span><br><span class="line">            result += currCount;</span><br><span class="line">            <span class="keyword">if</span> (rest == <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            }</span><br><span class="line">            total = rest;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NO_RESULT_CODE;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这段代码就是简单地从最大的面值开始尝试，每次都会把当前面值的硬币尽量用光，然后才会尝试下一种面值的货币。</p><p>但是，有没有发现一个问题？上面的例子中，最后剩余 1 块钱，但是我们可以轻易地知道<span class="math inline">\(11 = 5 + 3 +3\)</span>，所以现在是有问题的。</p><p>我们将第二次放入的 5 元硬币取出，放入面值是 3 元的硬币，就会发现得到的结果是符合要求的，所以我们需要对贪心做改进，使用回溯来解决<code>Demo1</code> 过于贪心的问题</p><blockquote><p>Java 实现</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo02</span> <span class="keyword">extends</span> <span class="title class_">AbstractCoinChange</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Demo02</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span>[] parValue)</span> {</span><br><span class="line">        <span class="built_in">super</span>(total, parValue);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">minCount</span> <span class="operator">=</span> getMinCount(getTotal(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> minCount;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getMinCount</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span> parValueIndex)</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">parValueLength</span> <span class="operator">=</span> getParValue().length;</span><br><span class="line">        <span class="keyword">if</span> (parValueLength == parValueIndex) {</span><br><span class="line">            <span class="keyword">return</span> NO_RESULT_CODE;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">int</span> <span class="variable">currCoinValue</span> <span class="operator">=</span> getParValue()[parValueIndex];</span><br><span class="line">        <span class="type">int</span> <span class="variable">currCoinValueMaxCount</span> <span class="operator">=</span> total / currCoinValue;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> currCoinValueMaxCount; count &gt;= <span class="number">0</span>; count--) {</span><br><span class="line">            <span class="type">int</span> <span class="variable">rest</span> <span class="operator">=</span> total - currCoinValue * count;</span><br><span class="line">            <span class="comment">// 如果余额为 0，说明组合完毕了，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (rest == <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// 使用剩余的面额尝试组合</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">restCount</span> <span class="operator">=</span> getMinCount(rest, parValueIndex + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 如果没有返回 NO_RESULT_CODE，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (restCount != NO_RESULT_CODE) {</span><br><span class="line">                <span class="keyword">return</span> count + restCount;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> NO_RESULT_CODE;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>通过添加回溯，我们得到了符合题目要求的解法。</p><h1 id="贪心算法的局限性">贪心算法的局限性</h1><p>由于贪心算法是为了获取局部最优解，所以我们遇到了第一个解法的问题，局部最优没办法获取到结果。但是，局部最优这个思路是对的，整体最优就是多个局部最优的组合！</p><p>贪心的思路就是我们最优化求解的根本思想，所有的方法只不过是针对贪心思路的改进和优化。回溯解决的是正确性问题，而动态规划则是解决时间复杂度的问题。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;任何算法都有它的局限性，贪心算法也如此&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="动态规划" scheme="http://ann-zhgy.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="贪心算法" scheme="http://ann-zhgy.github.io/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>动归 ——（一）动态规划学习方法</title>
    <link href="http://ann-zhgy.github.io/2023/03/91e3fecf.html"/>
    <id>http://ann-zhgy.github.io/2023/03/91e3fecf.html</id>
    <published>2023-03-16T03:02:07.000Z</published>
    <updated>2023-11-15T06:22:06.592Z</updated>
    
    <content type="html"><![CDATA[<h1 id="建立扎实的基础知识体系">1、建立扎实的基础知识体系</h1><ol type="1"><li><p>先掌握基础的数据结构和算法，再来谈动态规划</p><blockquote><p>动态规划不仅名字听起来十分高级，它也的确是一种高级的解决问题的思想。为了更好地理解这个思想，掌握基础数据结构就显得尤为重要了，比如高维数组这样的数据结构，就经常出现在动态规划解法当中。其次是算法，像是递归、搜索和迭代这些常见的算法，都会作为工具在动态规划解法中使用。</p></blockquote></li></ol><span id="more"></span><ol start="2" type="1"><li><p>锻炼编码能力</p><blockquote><p>比如：是否该给循环添加等号？</p><ol type="1"><li>加等号？<code>for (int i = 0; i &lt;= MAX_COUNT; i++) { ... }</code></li><li>不加等号？<code>for (int i = 0; i &lt; MAX_COUNT; i++) { ... }</code></li><li>换个方法？<code>for (int i = 0; i &lt; MAX_COUNT + 1; i++) { ... }</code></li></ol><p>在练习的过程中一定要<strong>注重细节！</strong></p></blockquote></li></ol><h1 id="透彻理解动态规划基本方法论">2、透彻理解动态规划基本方法论</h1><ol type="1"><li>动态规划是一种思想，是一种高级方法。相比较而言，算法是一种经验总结和套路，是很容易落实到实践上的，但是思想是一种指导，<strong>指导我们怎么解决问题</strong>，所以这个东西是比较难落实到实践上来的</li><li>我们必须找一些规律来指导我们解决动态规划的问题。比如：寻找子问题、递归求解、重叠子问题与无后效性、状态存储。</li><li>在理解这些概念及其背后的深意之后，我们需要对其进行归纳总结。目的在于：你可以拥有一个清晰的判断标准：<strong>哪些问题应该使用动态规划来解，而哪些不应该或不能使用动态规划来解。</strong>避免盲目地使用动态规划来解题，弄清楚这个问题后，我们才能有的放矢地解决算法难题。</li></ol><h1 id="掌握经典问题总结解题思路">3、掌握经典问题，总结解题思路</h1><ul><li>掌握经典的动态规划问题特别重要，因为很多问题都是从这些经典问题延伸出来的</li></ul><h1 id="及时总结举一反三">4、及时总结，举一反三</h1><p>我们常说人工智能是人工智障，这么说并不过分，因为计算机真的很笨，它唯一能解决的问题就是穷举，穷举所有可能性。</p><p>动态规划的思想是从一系列算法中演进而来的。贪心算法是求解整体最优的真正思路源头，我们从那里开始，考虑穷举的问题，最终通过优化形成了一个比较完美的总结。而这个总结，正是动态规划思想。</p><p>所以你看，即便是高级如动态规划这样的思想，也是通过不断的总结而得到的。而经过我们前面这一系列的总结，便形成了下面这幅脑图，你可以通过这幅图对学习动态规划有一个全面的了解。</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1678937170805" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1678937170805.png" style="width: 100%;"></p></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;建立扎实的基础知识体系&quot;&gt;1、建立扎实的基础知识体系&lt;/h1&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;先掌握基础的数据结构和算法，再来谈动态规划&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;动态规划不仅名字听起来十分高级，它也的确是一种高级的解决问题的思想。为了更好地理解这个思想，掌握基础数据结构就显得尤为重要了，比如高维数组这样的数据结构，就经常出现在动态规划解法当中。其次是算法，像是递归、搜索和迭代这些常见的算法，都会作为工具在动态规划解法中使用。&lt;/p&gt;
&lt;/blockquote&gt;&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="动态规划" scheme="http://ann-zhgy.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="动态规划学习方法" scheme="http://ann-zhgy.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Java12～17 新特</title>
    <link href="http://ann-zhgy.github.io/2023/03/ced4de58.html"/>
    <id>http://ann-zhgy.github.io/2023/03/ced4de58.html</id>
    <published>2023-03-07T09:49:41.000Z</published>
    <updated>2023-11-15T06:22:06.578Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ps:Java 的新特性有一个预览版本，预览版本的新特性会在两个版本后更新到正式版，编译执行代码预览版本的特性的Java 文件需要添加 <code>--enable-preview</code> 参数</p><p>本篇所有内容摘自：<a href="https://pdai.tech/md/java/java8up/java12.html">https://pdai.tech/md/java/java8up/java12.html</a></p></blockquote><h1 id="java12">Java12</h1><h2 id="新的-switch-语句支持preview">新的 switch语句支持（preview）</h2><span id="more"></span><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">outputSeasonByMonth1</span><span class="params">(<span class="type">int</span> month)</span> {</span><br><span class="line">    <span class="keyword">switch</span> (month) {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>:</span><br><span class="line">            System.out.println(<span class="string">"spring"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>:</span><br><span class="line">            System.out.println(<span class="string">"summer"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>:</span><br><span class="line">            System.out.println(<span class="string">"autumn"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>:</span><br><span class="line">            System.out.println(<span class="string">"winter"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">"wrong"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">outputSeasonByMonth2</span><span class="params">(<span class="type">int</span> month)</span> {</span><br><span class="line">    <span class="keyword">switch</span> (month) {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> -&gt; System.out.println(<span class="string">"spring"</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> -&gt; System.out.println(<span class="string">"summer"</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span> -&gt; System.out.println(<span class="string">"autumn"</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span> -&gt; System.out.println(<span class="string">"winter"</span>);</span><br><span class="line">        <span class="keyword">default</span> -&gt; System.out.println(<span class="string">"wrong"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>case 项支持合并在一起</li><li> case 的执行语句支持使用 lambda 的形式</li></ul><h2 id="shenandoah-低暂停时间垃圾回收器实验">Shenandoah低暂停时间垃圾回收器（实验）</h2><blockquote><p>JDK 12 引入的回收算法（实验阶段），该算法通过与正在运行的 Java线程同时进行疏散工作来减少 GC 暂停时间。Shenandoah的暂停时间与堆大小无关，无论堆栈是 200 MB 还是 200GB，都具有相同的一致暂停时间。</p><p>ps: Shenandoah 只存在于 OpenJDK 中，可以使用<code>-XX:+UseShenandoahGC</code> 命令行参数打开</p></blockquote><p><strong>Shenandoah 适用于高吞吐和大内存场景，不适合高实时性场景</strong>。Shenandoah 算法设计目标主要是响应性和一致可控的短暂停顿，对于垃圾回收生命周期中安全点停顿（TTSP) 和内存增长监控的时间开销并无帮助。</p><p>Shenandoah 算法为每个 Java 对象添加了一个间接指针，使得 GC 线程能够在 Java 线程运行时压缩堆。标记和压缩是同时执行的，因此我们只需要暂停 Java 线程在一致可控的时间内扫描线程堆栈以查找和更新对象图的根。</p><h1 id="java13">Java13</h1><h2 id="switch-支持返回结果preview">switch 支持返回结果（preview）</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">outputSeasonByMonth1</span><span class="params">(<span class="type">int</span> month)</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (month) {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> -&gt; <span class="string">"spring"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> -&gt; <span class="string">"summer"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span> -&gt; <span class="string">"autumn"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span> -&gt; <span class="string">"winter"</span>;</span><br><span class="line">        <span class="keyword">default</span> -&gt; <span class="string">"wrong"</span>;</span><br><span class="line">    };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">outputSeasonByMonth2</span><span class="params">(<span class="type">int</span> month)</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (month) {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">"spring"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">"summer"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">"autumn"</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">"winter"</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">"wrong"</span>;</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>上述两种 <code>switch</code> 的写法都不需要添加 <code>break</code>关键字来中断 <code>case</code>，所以也不会出现忘写 break 而出现 switch穿透的问题</li><li>如果是使用 case 后面添加代码块的方式，需要使用 <code>yield</code>关键字返回当前 case 块需要返回的数据<ul><li>ps：<code>yield</code>：产出、提供 的意思</li></ul></li></ul><h2 id="文本块preview">文本块（preview）</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">textBlock</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">"""</span></span><br><span class="line"><span class="string">            床前明月光，</span></span><br><span class="line"><span class="string">            疑是地上霜。</span></span><br><span class="line"><span class="string">            举头望明月，</span></span><br><span class="line"><span class="string">            低头思故乡。</span></span><br><span class="line"><span class="string">            """</span>;</span><br><span class="line">    System.out.println(text);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>文本块可以省去我们手动添加 <code>\n</code>和拼接字符串的烦恼，可以联系 js 中使用 `` 包裹的字符串，除了不能使用<code>${}</code> 来直接替换变量，其他的也差不多</li></ul><h1 id="java14">Java14</h1><h2 id="switch-特性提升为正式版">switch 特性提升为正式版</h2><p>switch 表达式的新特性使得 switch语句在编码方式上简化不少，但是同时还是需要注意：</p><ul><li>需要保持与之前 switch 语句同样的 case 分支情况。</li><li>switch 表达式中不再需要显式地使用 return、break 或者 continue来跳出当前分支。</li></ul><h2 id="npe-提示增强可以提示到是哪个变量引起的-npe">NPE提示增强，可以提示到是哪个变量引起的 NPE</h2><p>使用 <code>-XX:+ShowCodeDetailsInExceptionMessages</code> 开启</p><h2 id="instanceof-模式匹配语法增强preview"><code>instanceof</code>模式匹配语法增强（preview）</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">instanceOfDemo</span><span class="params">(Object obj)</span> {</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Serializable serial) {</span><br><span class="line">        System.out.println(<span class="string">"is serializable"</span>);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String str &amp;&amp; !str.isBlank()) {</span><br><span class="line">        System.out.println(<span class="string">"is String"</span>);</span><br><span class="line">        <span class="keyword">if</span> (str.contains(<span class="string">"aab"</span>)) {</span><br><span class="line">            System.out.println(<span class="string">"str contains aab"</span>);</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> List&lt;?&gt; list) {</span><br><span class="line">        System.out.println(<span class="string">"is List"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><code>instanceof</code>后面可以直接声明的变量，声明的变量是判断的类型，作用范围是之后的<code>if</code> 块</li><li>在 <code>&amp;&amp;</code> 运算符中，<code>&amp;&amp;</code>前面使用 <code>instanceof</code> 声明的变量可以在<code>&amp;&amp;</code>之后使用，即：变量的作用范围延长了，但是这种延长不适用于 <code>||</code>运算符，因为 <code>||</code>运算符即使前面没有匹配成功，也会执行后面的判断，此时使用会产生问题</li></ul><h2 id="record-类型preview"><code>Record</code> 类型（preview）</h2><blockquote><p>Record类型允许在代码中使用紧凑的语法形式来声明类，而这些类能够作为不可变数据类型的封装持有者。Record这一特性主要用在特定领域的类上；与枚举类型一样，Record类型是一种受限形式的类型，主要用于存储、保存数据，并且没有其它额外自定义行为的场景下。</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Person</span><span class="params">(String name)</span> {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>record 类型的实体反编译后会继承于 <code>java.lang.Record</code>类【与枚举类型类似】，且拥有部分特征：</p><ul><li>有且仅有一个构造方法</li><li>拥有获取成员属性的方法：<code>name()</code></li><li>重写了 <code>hashcode()</code> 和 <code>equals()</code></li><li>重写了 <code>toString()</code></li><li>类对象和属性均被 <code>final</code>修饰，表示类不可被继承，属性不可被再次赋值</li></ul><p>同时，<code>Class</code> 中也引入了新的方法</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RecordComponent[] getRecordComponents() <span class="comment">// 返回类中 Recode 类型的字段</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isRecord</span><span class="params">()</span> <span class="comment">// 判断当前类是否是 Record 类型</span></span><br></pre></td></tr></tbody></table></figure><h2 id="文本块增强preview">文本块增强（preview）</h2><p>引入了 <code>\</code> 和 <code>\s</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">textBlockEnhance</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">"""</span></span><br><span class="line"><span class="string">            床前明月光，\</span></span><br><span class="line"><span class="string">            疑是地上霜。\</span></span><br><span class="line"><span class="string">            举头望明月，\</span></span><br><span class="line"><span class="string">            低头思故乡。</span></span><br><span class="line"><span class="string">            """</span>;</span><br><span class="line">    System.out.println(str1);</span><br><span class="line">    <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">"""</span></span><br><span class="line"><span class="string">            床前明月光，\s</span></span><br><span class="line"><span class="string">            疑是地上霜。 \s</span></span><br><span class="line"><span class="string">            举头望明月， </span></span><br><span class="line"><span class="string">            低头思故乡。</span></span><br><span class="line"><span class="string">            """</span>;</span><br><span class="line">    System.out.println(str2);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><code>\</code> 与各种配置文件中的用法一致，表示当前行没有结束</li><li><code>\s</code> 表示一行末尾的空格，因为文本块会删掉一行末尾的<code>\r\n</code>，同时也会删除末尾的空格<ul><li>注意：代码第 12 行的空格并不会在控制台打印出来</li></ul></li></ul><hr><blockquote><p>接下来的特性对于使用 <code>Java</code> 进行开发的开发人员关系不大</p></blockquote><h2 id="打包工具孵化版">打包工具（孵化版）</h2><p>用于将 Java 项目打包成可在 windows、macos、linux系统直接运行的程序包</p><p>在 <strong>Java13</strong> 发布前的最后一刻被从外围移除的打包工具 jpackage 终于可以在 Java14 中使用了。但是要注意，它只在 Incubator 版本中提供。</p><p>这个打包工具应该可以让开发人员创建自主的 Java 应用程序，它以 JavaFXjavapackager 这个打包工具为基础。它的主要特点有如下三个：</p><ul><li>支持本地打包格式，为用户提供自然的安装体验；</li><li>打包时可以指定启动参数；</li><li>通过命令行或使用 ToolProvider API 的程序来启动。</li></ul><h2 id="某个组合垃圾回收器被弃用">某个组合垃圾回收器被弃用</h2><p>Java 14 打算弃用 ParallelScavenge + SerialOld 垃圾收集器组合。</p><p>支持这一改变的 JEP366 清楚地表明，他们的目的不是要删除掉这个组合，而是要弃用它。</p><p>弃用这种算法组合的原因是：它很少被使用，同时需要大量的维护工作。</p><h1 id="java15">Java15</h1><h2 id="密封的类和接口preview">密封的类和接口（preview）</h2><p>密封的类和接口用于显示那些类可以继承当前类，限制了类的层次结构，是一个很实用的特性</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加sealed修饰符，permits后面跟上只能被继承的子类名称</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">permits</span> Teacher, Worker, Student{ } <span class="comment">//人</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 子类可以被修饰为 final</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span> { }<span class="comment">//教师</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 子类可以被修饰为 non-sealed，此时 Worker类就成了普通类，谁都可以继承它</span></span><br><span class="line"><span class="keyword">non-sealed</span> <span class="keyword">class</span> <span class="title class_">Worker</span> <span class="keyword">extends</span> <span class="title class_">Person</span> { }  <span class="comment">//工人</span></span><br><span class="line"><span class="comment">// 任何类都可以继承Worker</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnyClass</span> <span class="keyword">extends</span> <span class="title class_">Worker</span>{}</span><br><span class="line"> </span><br><span class="line"><span class="comment">//子类可以被修饰为 sealed,同上</span></span><br><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> <span class="keyword">permits</span> MiddleSchoolStudent,GraduateStudent{ } <span class="comment">//学生</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">MiddleSchoolStudent</span> <span class="keyword">extends</span> <span class="title class_">Student</span> { }  <span class="comment">//中学生</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">GraduateStudent</span> <span class="keyword">extends</span> <span class="title class_">Student</span> { }  <span class="comment">//研究生</span></span><br></pre></td></tr></tbody></table></figure><h1 id="java16">Java16</h1><h2 id="instanceof-模式匹配增强提升为正式版">instanceof模式匹配增强提升为正式版</h2><h2 id="record-类型提升为正式版">Record 类型提升为正式版</h2><h2 id="向量api孵化版">向量 API（孵化版）</h2><blockquote><p>向量 API 存在于 <code>jdk.incubator.vector</code> 包中，属于<code>jdk.incubator.vector</code>模块。向量计算也成为矢量计算，指的是充分运用多核 CPU 的特性，使多个计算<strong>并行</strong>进行，同时计算</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义256bit的向量浮点运算</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_256;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">vectorComputation</span><span class="params">(<span class="type">float</span>[] a, <span class="type">float</span>[] b, <span class="type">float</span>[] c)</span> {</span><br><span class="line">    <span class="type">var</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">var</span> <span class="variable">upperBound</span> <span class="operator">=</span> SPECIES.loopBound(a.length);</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; upperBound; i += SPECIES.length()) {</span><br><span class="line">        <span class="type">var</span> <span class="variable">va</span> <span class="operator">=</span> FloatVector.fromArray(SPECIES, a, i);</span><br><span class="line">        <span class="type">var</span> <span class="variable">vb</span> <span class="operator">=</span> FloatVector.fromArray(SPECIES, b, i);</span><br><span class="line">        <span class="type">var</span> <span class="variable">vc</span> <span class="operator">=</span> va.mul(va).</span><br><span class="line">                add(vb.mul(vb)).</span><br><span class="line">                neg();</span><br><span class="line">        vc.intoArray(c, i);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; a.length; i++) {</span><br><span class="line">        c[i] = (a[i] * a[i] + b[i] * b[i]) * -<span class="number">1.0f</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="java17">Java17</h1><h2 id="密封类提升为正式版">密封类提升为正式版</h2><h2 id="伪随机数生成器重构及增强">伪随机数生成器重构及增强</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RandomGenerator</span> <span class="variable">g</span> <span class="operator">=</span> RandomGenerator.of(<span class="string">"L64X128MixRandom"</span>);</span><br></pre></td></tr></tbody></table></figure><p>关于参数，建议看 javadoc 或注释</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1678267319255" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1678267319255.png" style="width: 100%;"></p></div><ul><li>这一大坨就是可选的参数</li></ul><h1 id="下一次更新将是-java23-发布时">下一次更新将是 Java23 发布时</h1><p>Java19 开放了预览版的虚拟线程，结构化并发也已进入孵化阶段，推测这两块新的 API将是很大的亮点</p><p>关于 Java 各个版本的新特性信息，可以关注 <a href="https://openjdk.org/projects/jdk/20/">https://openjdk.org/projects/jdk/20/</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ps:
Java 的新特性有一个预览版本，预览版本的新特性会在两个版本后更新到正式版，编译执行代码预览版本的特性的
Java 文件需要添加 &lt;code&gt;--enable-preview&lt;/code&gt; 参数&lt;/p&gt;
&lt;p&gt;本篇所有内容摘自：&lt;a href=&quot;https://pdai.tech/md/java/java8up/java12.html&quot;&gt;https://pdai.tech/md/java/java8up/java12.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;java12&quot;&gt;Java12&lt;/h1&gt;
&lt;h2 id=&quot;新的-switch-语句支持preview&quot;&gt;新的 switch
语句支持（preview）&lt;/h2&gt;</summary>
    
    
    
    <category term="Java新特性" scheme="http://ann-zhgy.github.io/categories/Java%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="Java12～17新特性" scheme="http://ann-zhgy.github.io/tags/Java12%EF%BD%9E17%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>Java10、11 新特</title>
    <link href="http://ann-zhgy.github.io/2023/03/ca210e65.html"/>
    <id>http://ann-zhgy.github.io/2023/03/ca210e65.html</id>
    <published>2023-03-07T09:06:43.000Z</published>
    <updated>2023-11-15T06:22:06.578Z</updated>
    
    <content type="html"><![CDATA[<h1 id="java10">Java10</h1><h2 id="局部变量类型推断">局部变量类型推断</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="type">var</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">"string"</span>;</span><br><span class="line"><span class="type">var</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10010</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>此特性仅用于局部变量</li></ul><h1 id="java11">Java11</h1><h2 id="支持通过-java-命令直接运行">支持通过 <code>java</code>命令直接运行</h2><p>在之前的版本中，运行 <code>Java</code> 文件需要先编译，之后再运行</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br><span class="line">java HelloWorld</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><p>在 Java11 中，可以通过 <code>java</code> 命令直接运行 Java 文件</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java HelloWorld.java</span><br></pre></td></tr></tbody></table></figure><h2 id="string-中新增的方法">String 中新增的方法</h2><blockquote><p>通过代码及运行结果直接看吧，还包括 <code>line()</code>等方法，如果需要，建议自行查阅 API 文档</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">'\u2000'</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> c + <span class="string">"abc"</span> + c;</span><br><span class="line">    System.out.printf(<span class="string">"[%s]\n"</span>, str.trim());</span><br><span class="line">    System.out.printf(<span class="string">"[%s]\n"</span>, str.strip());</span><br><span class="line">    System.out.printf(<span class="string">"[%s]\n"</span>, str.stripLeading());</span><br><span class="line">    System.out.printf(<span class="string">"[%s]\n"</span>, str.stripTrailing());</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">" "</span>;</span><br><span class="line">    System.out.println(name.isBlank());</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> <span class="string">"ann-zhgy"</span>;</span><br><span class="line">    System.out.println(desc.repeat(<span class="number">3</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>运行结果：</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1678181355478" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1678181355478.png" style="width: 100%;"></p></div><h2 id="var-可以修饰-lambda-局部变量">var 可以修饰 Lambda 局部变量</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Function</span> <span class="variable">functionInterface</span> <span class="operator">=</span> (<span class="keyword">var</span> a) -&gt; a == <span class="literal">null</span> ? Optional.empty() : a;</span><br></pre></td></tr></tbody></table></figure><ul><li>感觉很鸡肋</li></ul><h2 id="集合转对应类型数组">集合转对应类型数组</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; sampleList = Arrays.asList(<span class="string">"张三"</span>, <span class="string">"java 11"</span>);</span><br><span class="line"><span class="comment">// array = {"张三", "java 11"};</span></span><br><span class="line"><span class="comment">// 11 之前最简单的写法 </span></span><br><span class="line"><span class="comment">// String[] array = sampleList.toArray(new String[0]);</span></span><br><span class="line">String[] array = sampleList.toArray(String[]::<span class="keyword">new</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="java11-最值得关注的特性zgc">Java11 最值得关注的特性：ZGC</h2><blockquote><p>ZGC 是 Java11 中最值得关注的特性，没有之一</p></blockquote><p>关于 ZGC 的详细介绍，建议查看 <a href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/JVM%20%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%2032%20%E8%AE%B2%EF%BC%88%E5%AE%8C%EF%BC%89/15%20Java11%20ZGC%20%E5%92%8C%20Java12%20Shenandoah%20%E4%BB%8B%E7%BB%8D%EF%BC%9A%E8%8B%9F%E6%97%A5%E6%96%B0%E3%80%81%E6%97%A5%E6%97%A5%E6%96%B0%E3%80%81%E5%8F%88%E6%97%A5%E6%96%B0.md">Java11ZGC 和 Java12 Shenandoah 介绍：苟日新、日日新、又日新</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;java10&quot;&gt;Java10&lt;/h1&gt;
&lt;h2 id=&quot;局部变量类型推断&quot;&gt;局部变量类型推断&lt;/h2&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Object&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;string&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10010&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;此特性仅用于局部变量&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;java11&quot;&gt;Java11&lt;/h1&gt;
&lt;h2 id=&quot;支持通过-java-命令直接运行&quot;&gt;支持通过 &lt;code&gt;java&lt;/code&gt;
命令直接运行&lt;/h2&gt;
&lt;p&gt;在之前的版本中，运行 &lt;code&gt;Java&lt;/code&gt; 文件需要先编译，之后再运行&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;javac HelloWorld.java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java HelloWorld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Java新特性" scheme="http://ann-zhgy.github.io/categories/Java%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="Java10、11新特性" scheme="http://ann-zhgy.github.io/tags/Java10%E3%80%8111%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>Java 项目开发相关的 tips</title>
    <link href="http://ann-zhgy.github.io/2023/03/8a1412e9.html"/>
    <id>http://ann-zhgy.github.io/2023/03/8a1412e9.html</id>
    <published>2023-03-02T08:40:07.000Z</published>
    <updated>2023-11-15T06:22:06.578Z</updated>
    
    <content type="html"><![CDATA[<blockquote><ol type="1"><li>开写之前，建议先阅读一下阿里孤尽【大漠孤烟直，白日依山尽】老师出品的 Java 代码开发规范：<a href="https://edu.aliyun.com/article/103">https://edu.aliyun.com/article/103</a></li><li> 本篇基于极客时间郑晔老师的课程《代码之丑》</li><li>本片提出的一些建议并不是仅适用于 Java</li></ol></blockquote><p><strong>代码是给人看的，所以需要注意阅读性</strong></p><span id="more"></span><h2 id="变量命名">1、变量命名</h2><ul><li>命名要能够描述出这段代码在做的事情，一个好的名字应该描述意图，而非细节！</li><li>用技术术语命名是一个很不好的习惯，比如：xxxMap、xxxList、xxxSet。技术代码的出现代表着它缺少一个应有的模型</li><li>编写可维护的代码要使用业务语言，建立团队的词汇表</li><li>对于英语，最低限度的要求是写出来的代码像是在用英语表达<ul><li>类名是一个名词，表示一类对象</li><li>方法名是一个动词或动宾短语，表示一个动作，一个行为</li></ul></li></ul><h2 id="重复代码">2、重复代码</h2><ul><li>大量的重复代码，可以通过 idea 看到警告的重复的代码，最直接的 diss 点就是：封装、继承、多态中的封装是啥。在编码时，要注意一定不要复制粘贴</li><li>关于 if-else：如果 <code>if</code> 和 <code>else</code>中的代码长得比较像，这点代码多半是有共通的逻辑的，需要改</li><li><strong>不要重复自己，不要复制粘贴</strong></li></ul><h2 id="长函数">3、长函数</h2><ul><li>在阿里的 Java 代码规约中，会认为一个方法超过 80行就已经算是长函数了</li><li><strong>一个好的程序员面对代码库时要有不同尺度的观察能力，看设计时，要能够高屋建瓴，看代码时，要能细致入微</strong>。</li><li>长函数往往还隐含着变量命名问题：类似含义的变量在同一方法 (代码块) 中是不可以重复声明的，抽取出方法之后，基本上不会有这个问题</li><li>写出长函数的常见原因：<ul><li>以性能为由</li><li>平铺直叙</li><li>每次迭代加一点</li></ul></li></ul><h2 id="大类">4、大类</h2><ul><li>大类的产生：<ul><li>类的职责不单一：这个类做的事情很多，但是实际上这些事情可以是被细分的</li><li>字段未分组：</li></ul></li><li><strong>所谓的将大类拆解成小类，本质上在做的工作是一个设计工作</strong>。</li></ul><h2 id="长参数列表">5、长参数列表</h2><ul><li>将参数封装为对象，之后再添加参数时直接在对象里面添加即可<ul><li><strong>一个模型的封装应该是以行为为基础的</strong>。所以，在封装对象时也不能把参数一股脑的放到一个对象里面</li><li>动静分离：不变的变量可以设置为全局变量</li></ul></li><li>去除标记：对于设置状态及根据状态执行不同的处理逻辑的代码，可以分别抽成单独的方法</li></ul><h2 id="滥用控制语句">6、滥用控制语句</h2><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1677756167092" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1677756167092.png" style="width: 100%;"></p></div><blockquote><p>这传说中的招法，他的名字叫做 —— かめはめ波 (ka mi ha mi ha)！</p></blockquote><p>多层的嵌套关系其实是非常影响阅读的，我个人可能读到第四层或者第五层就完全读不下去了。对于这种代码的改进，比较出名的就是 “卫语句 " 这种写法。</p><p>在开发时或许我们可以先想异常情况，之后写正常的处理逻辑。</p><h2 id="过长的调用链">7、过长的调用链</h2><ul><li>过长的调用链也是一种坏味道，最直接的方式就是将调用链封装为一个方法，隐藏中间的委托关系</li></ul><h2 id="基本类型偏执">8、基本类型偏执</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getEpubPrice</span><span class="params">(<span class="keyword">final</span> <span class="type">boolean</span> highQuality, <span class="keyword">final</span> <span class="type">int</span> chapterSequence)</span> {</span><br><span class="line">  ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>通过方法名，我们可以明确知道这个方法是返回一个表示价格的数据，但是使用的类型却是double。double 表示的范围有点大，价格没有负数的，或者价格的精度只有 2 位……</li><li> 改进方案：建立一个关于价格的模型 (类)<ul><li><p>```java public class Price { private double price;</p><pre><code>public Price(final double price) {    if (price &lt;= 0) {        throw new IllegalArgumentException("Price should be positive");    }    this.price = price;}public double getDisplayPrice() {    BigDecimal decimal = new BigDecimal(this.price)；    return decimal.setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();}</code></pre><p>} </p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> <span class="strong">**封装之所以有难度，主要在于它是一个构建模型的过程**</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 9、移除设值函数</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 对于读取数据来说，修改是一个更加危险的操作，而对于修改数据来说，更可怕的是不可控的变化</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 可以看一些 Java 中已经存在的一些方法声明，我们可以发现它其实是基于不变量返回的新的变量，所以这类问题的一个解决方案就是创建不变类</span><br><span class="line"><span class="bullet">  *</span> <span class="code">```java</span></span><br><span class="line"><span class="code">    String replace(char oldChar, char newChar)</span></span><br></pre></td></tr></tbody></table></figure><p></p></li><li><p>```java LocalDateTime twoDaysLater = now.plusDays(2);</p><figure class="highlight vbscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    饱受诟病的 Date 类在 Java8 修改之后，同样是基于原有的日期计算，返回计算结果，而不是修改原来的日期</span><br><span class="line">* 在项目中创建不变类是一件不太可能的事情，更实用的一个方案是：**区分类的性质**。</span><br><span class="line">  * 如果是实体对象就要限时数据的变化</span><br><span class="line">  * 如果是值对象就创建不变类</span><br><span class="line"></span><br><span class="line">## <span class="number">10</span>、变量声明与赋值分离</span><br><span class="line"></span><br><span class="line">先看一段代码</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">EpubStatus status = <span class="literal">null</span>;</span><br><span class="line">CreateEpubResponse <span class="built_in">response</span> = createEpub(<span class="built_in">request</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">response</span>.getCode() == <span class="number">201</span>) {</span><br><span class="line">    status = EpubStatus.CREATED;</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    status = EpubStatus.TO_CREATE;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p></p></li></ul></li><li>这段代码的问题在于第一行的赋值操作其实是没有意义的，如果第一行与真正赋值的操作隔了很远，这将极大的降低代码的可读性</li><li>所以，我们编程时要有一个基本原则：<strong>变量一次性完成初始化</strong> 。</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">CreateEpubResponse</span> <span class="variable">response</span> <span class="operator">=</span> createEpub(request);</span><br><span class="line"><span class="keyword">final</span> <span class="type">EpubStatus</span> <span class="variable">status</span> <span class="operator">=</span> toEpubStatus(response);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> EpubStatus <span class="title function_">toEpubStatus</span><span class="params">(<span class="keyword">final</span> CreateEpubResponse response)</span> {</span><br><span class="line">    <span class="keyword">if</span> (response.getCode() == <span class="number">201</span>) {</span><br><span class="line">     <span class="keyword">return</span> EpubStatus.CREATED;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> EpubStatus.TO_CREATE;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>从改进的代码中我们还看到了<code>final</code>，基于尽可能使用不变的量的考虑：<strong>在能够使用<code>final</code> 的地方尽量使用<code>final</code>，限制变量再赋值操作</strong></li></ul><p>对于集合的初始化</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">permissions</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">permissions.add(Permission.BOOK_READ);</span><br><span class="line">permissions.add(Permission.BOOK_WRITE);</span><br><span class="line">check.grantTo(Role.AUTHOR, permissions);</span><br></pre></td></tr></tbody></table></figure><ul><li>这段代码是一个简单的几何初始化的过程，但是在 <code>Java9</code>之后，这种写法就已经是一个很不好的写法了 </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">permissions</span> <span class="operator">=</span> List.of(</span><br><span class="line">  Permission.BOOK_READ, </span><br><span class="line">  Permission.BOOK_WRITE</span><br><span class="line">);</span><br><span class="line">check.grantTo(Role.AUTHOR, permissions);</span><br></pre></td></tr></tbody></table></figure><ul><li>List.of返回的还是一个不支持增删改操作的集合类型，同样是<strong>尽量使用不可变的量</strong>这个规则</li><li>对比我们改造前后的代码，二者之间还有一个更关键的区别：前面的代码是命令式的代码，而后面的代码是声明式的代码。<ul><li>命令式的代码，就是告诉你 “怎么做” 的代码，就像改造前的代码，声明一个集合，然后添加一个元素，再添加一个元素。</li><li>声明式的代码，是告诉你 “做什么” 的代码，改造后就是，我要一个包含了这两个元素的集合。</li></ul></li><li><strong>用声明式的标准来看代码，是一个发现代码坏味道的重要参考</strong></li></ul><h2 id="依赖混乱你可能还没发现问题代码就已经无法挽救了">11、依赖混乱：你可能还没发现问题，代码就已经无法挽救了</h2><p>先看一段代码</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> NewBookResponse <span class="title function_">createBook</span><span class="params">(<span class="keyword">final</span> NewBookRequest request)</span> {</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> <span class="built_in">this</span>.service.createBook(request);</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>上面的问题在于：属于 controller/resource 层的<code>NewBookRequest</code>实体进入了业务处理层，业务处理层应该有相对稳定的参数、返回结构等信息，这样才可以实现每一层的隔离</li></ul><p>最好的解决方案：</p><ol type="1"><li>每一层都有各自的参数，返回结果</li><li>面向接口编程</li></ol><h2 id="不一致的代码为什么你的代码总是被吐槽">12、不一致的代码：为什么你的代码总是被吐槽</h2><h3 id="命名的不一致">12.1 命名的不一致</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">DistributionChannel</span> {</span><br><span class="line">    WEBSITE</span><br><span class="line">    KINDLE_ONLY</span><br><span class="line">    ALL</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><p>如上代码所示，代表分发渠道包括网站（WEBSITE）、只在 Kindle（KINDLE_ONLY），还是全渠道（ALL）</p><blockquote><p>面对这段代码，我有些疑惑，于是我提了一个问题：</p><p>我：这里的 WEBSITE 和 KINDLE_ONLY 分别表示的是什么？ 同事：WEBSITE表示作品只会在我们自己的网站发布，KINDLE_ONLY 表示这部作品只会在 Kindle的电子书商店里上架。 我：二者是不是都表示只在单独一个渠道发布？同事：是啊！ 我：既然二者都有只在一个平台上架发布的含义，为什么不都叫XXX 或者 XXX_ONLY？ 同事：呃，你说得有道理。</p></blockquote></li><li><p>表示<strong>类似含义的代码应该有一致的名字</strong>，而<strong>一旦出现了不一致的名字，通常都表示不同的含义</strong></p></li></ul><h3 id="方案的不一致">12.2 方案的不一致</h3><p>比如两块代码中都用到了对于日期的操作，一个使用的 <code>Date</code>类，另一个是使用的 <code>LocalDateTime</code>类，在同一项目中，我们使用的方案应该是一致的</p><h3 id="代码中的不一致">12.3 代码中的不一致</h3><blockquote><p>我们再来看一段代码：</p><figure class="highlight actionscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> createBook(<span class="keyword">final</span> List</span><br></pre></td></tr></tbody></table></figure><p>这是一段在翻译引擎中创建作品的代码。首先，根据要处理的作品 ID获取其中已经审核通过的作品，然后，发送一个 HTTP请求在翻译引擎中创建出这个作品。</p><p>这么短的一段代码有什么问题吗？问题就在于这段代码中的不一致。你可能会想：“不一致？不一致体现在哪里呢？” 答案就是，这些代码不是一个层次的代码。</p><p>通过了解这段代码的背景，你可能已经看出一些端倪了。首先是获取审核通过的作品，这是一个业务动作，接下来的三行其实是在做一件事，也就是发送创建作品的请求。具体到代码上，这三行代码分别是创建请求的参数，根据参数创建请求，最后，再把请求发送出去。这三行代码合起来完成了一个发送创建作品请求这么一件事，而这件事才是一个完整的业务动作。</p><p>所以，我说这个函数里的代码并不在一个层次上，有的是业务动作，有的是业务动作的细节。理解了这一点，我们就可以把这些业务细节的代码提取到一个函数里：</p><figure class="highlight actionscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> createBook(<span class="keyword">final</span> List</span><br></pre></td></tr></tbody></table></figure><p>从结果上看，原来的函数（createBook）里面全都是业务动作，而提取出来的函数（createRemoteBook）则都是业务动作的细节，各自的语句都是在一个层次上了。</p></blockquote><ul><li>很多程序员纠结的技术问题，其实是一个软件设计问题，不要通过奇技淫巧去解决一个本来不应该被解决的问题。</li></ul><h2 id="落后的代码风格使用新的语言特性和程序库升级你的代码">13落后的代码风格：使用 “新” 的语言特性和程序库升级你的代码</h2><h2 id="写代码是一个值得一生精进的事情">14写代码是一个值得一生精进的事情♪</h2>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;开写之前，建议先阅读一下阿里
孤尽【大漠孤烟直，白日依山尽】老师出品的 Java 代码开发规范：&lt;a href=&quot;https://edu.aliyun.com/article/103&quot;&gt;https://edu.aliyun.com/article/103&lt;/a&gt;&lt;/li&gt;
&lt;li&gt; 本篇基于极客时间郑晔老师的课程《代码之丑》&lt;/li&gt;
&lt;li&gt;本片提出的一些建议并不是仅适用于 Java&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;代码是给人看的，所以需要注意阅读性&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="经验之谈" scheme="http://ann-zhgy.github.io/categories/%E7%BB%8F%E9%AA%8C%E4%B9%8B%E8%B0%88/"/>
    
    
    <category term="Java开发规范" scheme="http://ann-zhgy.github.io/tags/Java%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>Java 扩展 ——Manifold 插件</title>
    <link href="http://ann-zhgy.github.io/2023/03/394b666a.html"/>
    <id>http://ann-zhgy.github.io/2023/03/394b666a.html</id>
    <published>2023-03-01T07:16:28.000Z</published>
    <updated>2023-11-15T06:22:06.577Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>原文指引：<a href="https://developer.aliyun.com/article/1135549">https://developer.aliyun.com/article/1135549</a></p></blockquote><h1 id="什么是扩展方法">什么是扩展方法</h1><p>扩展方法，就是能够向<strong>现有类型</strong>直接 “添加” 方法，而无需创建新的派生类型、重新编译或以其他方式修改现有类型。调用扩展方法的时候，与调用在类型中实际定义的方法相比没有明显的差异。</p><ul><li>所以，Java 其实是不支持扩展方法的</li></ul><h1 id="manifold-使用">Manifold 使用</h1><span id="more"></span><h2 id="准备条件">准备条件</h2><ol type="1"><li><p>在 IDEA 上安装 Manifold 插件</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1677656179082" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1677656179082.png" style="width: 100%;"></p></div></li><li><p>在项目 pom 的编译插件 <em>maven-compiler-plugin</em> 中加入<em>annotationProcessorPaths</em> ：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">manifold.version</span>&gt;</span>2023.1.3<span class="tag">&lt;/<span class="name">manifold.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>systems.manifold<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>manifold-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${manifold.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Add the -Xplugin:Manifold argument for the javac compiler--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-Xplugin:Manifold no-bootstrap<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>systems.manifold<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>manifold-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${manifold.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>如果项目使用了 Lombok，需要把 Lombok 也加入annotationProcessorPaths</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>${lombok.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>systems.manifold<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>manifold-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>${manifold.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">annotationProcessorPaths</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ol><h2 id="编写扩展方法">编写扩展方法</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.extensions.java.lang.String;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> manifold.ext.rt.api.Extension;</span><br><span class="line"><span class="keyword">import</span> manifold.ext.rt.api.This;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String类型扩展</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ann-zhgy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> StringExt.class 2023-02-24 15:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Extension</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StringExt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] split(<span class="meta">@This</span> String str, <span class="type">char</span> separator) {</span><br><span class="line">        <span class="keyword">return</span> StringUtils.split(str, separator);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>扩展方法类必须在 <code>extensions</code>包下，包名必须是要扩展的类的全路径名</li><li>扩展方法需要添加 <code>@Extension</code> 注解</li><li>普通方法的扩展方法需要持有要扩展的类对象，并且使用<code>@This</code> 注解标记 </li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.extensions.java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> manifold.ext.rt.api.Extension;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * List扩展</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ann-zhgy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> ListExt.class 2023-02-24 15:50</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Extension</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ListExt</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Extension</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">of</span><span class="params">(E elem)</span> {</span><br><span class="line">        <span class="keyword">return</span> Collections.singletonList(elem);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Extension</span></span><br><span class="line">    <span class="meta">@SafeVarargs</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">of</span><span class="params">(E ...elem)</span> {</span><br><span class="line">        <span class="keyword">return</span> Collections.unmodifiableList(Arrays.asList(elem));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><p>静态方法的扩展需要在方法上面添加 <code>@Extension</code> 注解</p><p>ps：<code>@SafeVarargs</code> 仅用来抑制 “堆污染 " 警告</p></li></ul><p><strong>数组扩展方法</strong>：可以参考 Manifold 自带的<code>manifold.ext.rt.extensions.manifold.rt.api.Array.ManArrayExt</code></p><h1 id="扩展方法需要谨慎添加">扩展方法需要谨慎添加</h1><p>扩展方法是极其通用的方法，所以必须谨慎添加！！！</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;原文指引：&lt;a href=&quot;https://developer.aliyun.com/article/1135549&quot;&gt;https://developer.aliyun.com/article/1135549&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;什么是扩展方法&quot;&gt;什么是扩展方法&lt;/h1&gt;
&lt;p&gt;扩展方法，就是能够向&lt;strong&gt;现有类型&lt;/strong&gt;直接 “添加” 方法，而无需创建新的派生类型、重新编译或以其他方式修改现有类型。调用扩展方法的时候，与调用在类型中实际定义的方法相比没有明显的差异。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所以，Java 其实是不支持扩展方法的&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;manifold-使用&quot;&gt;Manifold 使用&lt;/h1&gt;</summary>
    
    
    
    <category term="Java 插件" scheme="http://ann-zhgy.github.io/categories/Java-%E6%8F%92%E4%BB%B6/"/>
    
    
    <category term="Java 扩展方法" scheme="http://ann-zhgy.github.io/tags/Java-%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95/"/>
    
    <category term="Manifold" scheme="http://ann-zhgy.github.io/tags/Manifold/"/>
    
  </entry>
  
  <entry>
    <title>GibHub commit emoji 表情对照表（也可适用于 markdown 表情）</title>
    <link href="http://ann-zhgy.github.io/2023/02/d0090e46.html"/>
    <id>http://ann-zhgy.github.io/2023/02/d0090e46.html</id>
    <published>2023-02-14T06:12:47.000Z</published>
    <updated>2023-11-15T06:22:06.576Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>参考 <a href="https://github.com/liuchengxu/git-commit-emoji-cn" title="git commit emoji 使用指南">git commit emoji 使用指南</a>、<a href="https://github.com/zhouie/markdown-emoji" title="markdown-emoji">markdown-emoji</a></p></blockquote><span id="more"></span><h1 id="提交-emoji">提交 emoji</h1><table><colgroup><col style="width: 18%"><col style="width: 47%"><col style="width: 33%"></colgroup><thead><tr class="header"><th>emoji</th><th>emoji 代码</th><th> commit 说明</th></tr></thead><tbody><tr class="odd"><td>🎉</td><td><code>:tada:</code></td><td>初次提交</td></tr><tr class="even"><td>🆕</td><td><code>:new:</code></td><td>引入新功能</td></tr><tr class="odd"><td>🔖</td><td><code>:bookmark:</code></td><td>发行 / 版本标签</td></tr><tr class="even"><td>🐛</td><td><code>:bug:</code></td><td>修复 bug</td></tr><tr class="odd"><td>🚑</td><td><code>:ambulance:</code></td><td>重要补丁</td></tr><tr class="even"><td>🌐</td><td><code>:globe_with_meridians:</code></td><td>国际化与本地化</td></tr><tr class="odd"><td>💄</td><td><code>:lipstick:</code></td><td>更新 UI 和样式文件</td></tr><tr class="even"><td>🎬</td><td><code>:clapper:</code></td><td>更新演示 / 示例</td></tr><tr class="odd"><td>🚨</td><td><code>:rotating_light:</code></td><td>移除 linter 警告</td></tr><tr class="even"><td>🔧</td><td><code>:wrench:</code></td><td>修改配置文件</td></tr><tr class="odd"><td>➕</td><td><code>:heavy_plus_sign:</code></td><td>增加一个依赖</td></tr><tr class="even"><td>➖</td><td><code>:heavy_minus_sign:</code></td><td>减少一个依赖</td></tr><tr class="odd"><td>⬆️</td><td><code>:arrow_up:</code></td><td>升级依赖</td></tr><tr class="even"><td>⬇️</td><td><code>:arrow_down:</code></td><td>降级依赖</td></tr><tr class="odd"><td>⚡️<br>🐎</td><td><code>:zap:</code><br><code>:racehorse:</code></td><td>提升性能</td></tr><tr class="even"><td>📈</td><td><code>:chart_with_upwards_trend:</code></td><td>添加分析或跟踪代码</td></tr><tr class="odd"><td>🚀</td><td><code>:rocket:</code></td><td>部署功能</td></tr><tr class="even"><td>✅</td><td><code>:white_check_mark:</code></td><td>增加测试</td></tr><tr class="odd"><td>📝<br>📖</td><td><code>:memo:</code><br><code>:book:</code></td><td>撰写文档</td></tr><tr class="even"><td>🔨</td><td><code>:hammer:</code></td><td>重大重构</td></tr><tr class="odd"><td>🎨</td><td><code>:art:</code></td><td>改进代码结构 / 代码格式</td></tr><tr class="even"><td>🔥</td><td><code>:fire:</code></td><td>移除代码或文件</td></tr><tr class="odd"><td>✏️</td><td><code>:pencil2:</code></td><td>修复 typo</td></tr><tr class="even"><td>🚧</td><td><code>:construction:</code></td><td>工作进行中</td></tr><tr class="odd"><td>🗑</td><td><code>:wastebasket:</code></td><td>废弃或删除</td></tr><tr class="even"><td>♿️</td><td><code>:wheelchair:</code></td><td>可访问性</td></tr><tr class="odd"><td>👷</td><td><code>:construction_worker:</code></td><td>添加 CI 构建系统</td></tr><tr class="even"><td>💚</td><td><code>:green_heart:</code></td><td>修复 CI 构建问题</td></tr><tr class="odd"><td>🔒</td><td><code>:lock:</code></td><td>修复安全问题</td></tr><tr class="even"><td>🐳</td><td><code>:whale:</code></td><td>Docker 相关工作</td></tr><tr class="odd"><td>🍎</td><td><code>:apple:</code></td><td>修复 macOS 下的问题</td></tr><tr class="even"><td>🐧</td><td><code>:penguin:</code></td><td>修复 Linux 下的问题</td></tr><tr class="odd"><td>🏁</td><td><code>:checkered_flag:</code></td><td>修复 Windows&nbsp;下的问题</td></tr><tr class="even"><td>🔀</td><td><code>:twisted_rightwards_arrows:</code></td><td>分支合并</td></tr></tbody></table><h1 id="emoji-表情">emoji 表情</h1><h2 id="人物">人物</h2><table><colgroup><col style="width: 1%"><col style="width: 10%"><col style="width: 1%"><col style="width: 12%"><col style="width: 51%"><col style="width: 12%"><col style="width: 1%"><col style="width: 9%"></colgroup><thead><tr class="header"><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th></tr></thead><tbody><tr class="odd"><td>😄</td><td><code>:smile:</code></td><td>😆</td><td><code>:laughing:</code></td><td>😊</td><td><code>:blush:</code></td><td>😃</td><td><code>:smiley:</code></td></tr><tr class="even"><td>😏</td><td><code>:smirk:</code></td><td>😍</td><td><code>:heart_eyes:</code></td><td>😘</td><td><code>:kissing_heart:</code></td><td>😚</td><td><code>:kissing_closed_eyes:</code></td></tr><tr class="odd"><td>😌</td><td><code>:satisfied:</code></td><td>😁</td><td><code>:grin:</code></td><td>☺️</td><td><code>:relaxed:</code></td><td>😳</td><td><code>:flushed:</code></td></tr><tr class="even"><td>😉</td><td><code>:wink:</code></td><td>😜</td><td><code>:stuck_out_tongue_winking_eye:</code></td><td>😝</td><td><code>:stuck_out_tongue_closed_eyes:</code></td><td>😀</td><td><code>:grinning:</code></td></tr><tr class="odd"><td>😗</td><td><code>:kissing:</code></td><td>😙</td><td><code>:kissing_smiling_eyes:</code></td><td>😛</td><td><code>:stuck_out_tongue:</code></td><td>😴</td><td><code>:sleeping:</code></td></tr><tr class="even"><td>😟</td><td><code>:worried:</code></td><td>😦</td><td><code>:frowning:</code></td><td>😧</td><td><code>:anguished:</code></td><td>😮</td><td><code>:open_mouth:</code></td></tr><tr class="odd"><td>😬</td><td><code>:grimacing:</code></td><td>😕</td><td><code>:confused:</code></td><td>😯</td><td><code>:hushed:</code></td><td>😑</td><td><code>:expressionless:</code></td></tr><tr class="even"><td>😒</td><td><code>:unamused:</code></td><td>😅</td><td><code>:sweat_smile:</code></td><td>😓</td><td><code>:sweat:</code></td><td>😥</td><td><code>:disappointed_relieved:</code></td></tr><tr class="odd"><td>😩</td><td><code>:weary:</code></td><td>😔</td><td><code>:pensive:</code></td><td>😞</td><td><code>:disappointed:</code></td><td>😖</td><td><code>:fearful:</code></td></tr><tr class="even"><td>😰</td><td><code>:cold_sweat:</code></td><td>😣</td><td><code>:persevere:</code></td><td>😢</td><td><code>:cry:</code></td><td>😭</td><td><code>:sob:</code></td></tr><tr class="odd"><td>😂</td><td><code>:joy:</code></td><td>😲</td><td><code>:astonished:</code></td><td>😱</td><td><code>:scream:</code></td><td>😫</td><td><code>:tired_face:</code></td></tr><tr class="even"><td>😠</td><td><code>:angry:</code></td><td>😡</td><td><code>:rage:</code></td><td>😤</td><td><code>:triumph:</code></td><td>😪</td><td><code>:sleepy:</code></td></tr><tr class="odd"><td>😋</td><td><code>:yum:</code></td><td>😷</td><td><code>:mask:</code></td><td>😎</td><td><code>:sunglasses:</code></td><td>😵</td><td><code>:dizzy_face:</code></td></tr><tr class="even"><td>👿</td><td><code>:imp:</code></td><td>😈</td><td><code>:smiling_imp:</code></td><td>😐</td><td><code>:neutral_face:</code></td><td>😶</td><td><code>:no_mouth:</code></td></tr><tr class="odd"><td>😇</td><td><code>:innocent:</code></td><td>👽</td><td><code>:alien:</code></td><td>💛</td><td><code>:yellow_heart:</code></td><td>💙</td><td><code>:blue_heart:</code></td></tr><tr class="even"><td>💜</td><td><code>:purple_heart:</code></td><td>❤️</td><td><code>:heart:</code></td><td>💚</td><td><code>:green_heart:</code></td><td>💔</td><td><code>:broken_heart:</code></td></tr><tr class="odd"><td>💓</td><td><code>:heartbeat:</code></td><td>💗</td><td><code>:heartpulse:</code></td><td>💕</td><td><code>:two_hearts:</code></td><td>💞</td><td><code>:revolving_hearts:</code></td></tr><tr class="even"><td>💘</td><td><code>:cupid:</code></td><td>💖</td><td><code>:sparkling_heart:</code></td><td>✨</td><td><code>:sparkles:</code></td><td>⭐️</td><td><code>:star:</code></td></tr><tr class="odd"><td>🌟</td><td><code>:star2:</code></td><td>💫</td><td><code>:dizzy:</code></td><td>💥</td><td><code>:boom:</code></td><td>💥</td><td><code>:collision:</code></td></tr><tr class="even"><td>💢</td><td><code>:anger:</code></td><td>❗️</td><td><code>:exclamation:</code></td><td>❓</td><td><code>:question:</code></td><td>❕</td><td><code>:grey_exclamation:</code></td></tr><tr class="odd"><td>❔</td><td><code>:grey_question:</code></td><td>💤</td><td>💤</td><td>💨</td><td><code>:dash:</code></td><td>💦</td><td><code>:sweat_drops:</code></td></tr><tr class="even"><td>🎶</td><td><code>:notes:</code></td><td>🎵</td><td><code>:musical_note:</code></td><td>🔥</td><td><code>:fire:</code></td><td>💩</td><td><code>:hankey:</code></td></tr><tr class="odd"><td>💩</td><td><code>:poop:</code></td><td>💩</td><td><code>:shit:</code></td><td>👍</td><td><code>:+1:</code></td><td>👍</td><td><code>:thumbsup:</code></td></tr><tr class="even"><td>👎</td><td><code>:-1:</code></td><td>👎</td><td><code>:thumbsdown:</code></td><td>👌</td><td><code>:ok_hand:</code></td><td>👊</td><td><code>:punch:</code></td></tr><tr class="odd"><td>👊</td><td><code>:facepunch:</code></td><td>✊</td><td><code>:fist:</code></td><td>✌️</td><td><code>:v:</code></td><td>👋</td><td><code>:wave:</code></td></tr><tr class="even"><td>✋</td><td><code>:hand:</code></td><td>✋</td><td><code>:raised_hand:</code></td><td>👐</td><td><code>:open_hands:</code></td><td>☝️</td><td><code>:point_up:</code></td></tr><tr class="odd"><td>👇</td><td><code>:point_down:</code></td><td>👈</td><td><code>:point_left:</code></td><td>👉</td><td><code>:point_right:</code></td><td>🙌</td><td><code>:raised_hands:</code></td></tr><tr class="even"><td>🙏</td><td><code>:pray:</code></td><td>👆</td><td><code>:point_up_2:</code></td><td>👏</td><td><code>:clap:</code></td><td>💪</td><td><code>:muscle:</code></td></tr><tr class="odd"><td>🤘</td><td><code>:metal:</code></td><td>🖕</td><td><code>:fu:</code></td><td>🚶</td><td><code>:walking:</code></td><td>🏃</td><td><code>:runner:</code></td></tr><tr class="even"><td>🏃</td><td><code>:running:</code></td><td>👫</td><td><code>:couple:</code></td><td>👪</td><td><code>:family:</code></td><td>👬</td><td><code>:two_men_holding_hands:</code></td></tr><tr class="odd"><td>👭</td><td><code>:two_women_holding_hands:</code></td><td>💃</td><td><code>:dancer:</code></td><td>👯</td><td><code>:dancers:</code></td><td>🙆</td><td><code>:ok_woman:</code></td></tr><tr class="even"><td>🙅</td><td><code>:no_good:</code></td><td>💁</td><td><code>:information_desk_person:</code></td><td>🙋</td><td><code>:raising_hand:</code></td><td>👰</td><td><code>:bride_with_veil:</code></td></tr><tr class="odd"><td>🙎</td><td><code>:person_with_pouting_face:</code></td><td>🙍</td><td><code>:person_frowning:</code></td><td>🙇</td><td><code>:bow:</code></td><td>👦</td><td><code>:boy:</code></td></tr><tr class="even"><td>💑</td><td><code>:couple_with_heart:</code></td><td>💆</td><td><code>:massage:</code></td><td>💇</td><td><code>:haircut:</code></td><td>💅</td><td><code>:nail_care:</code></td></tr><tr class="odd"><td>👧</td><td><code>:girl:</code></td><td>👩</td><td><code>:woman:</code></td><td>👨</td><td><code>:man:</code></td><td>👶</td><td><code>:baby:</code></td></tr><tr class="even"><td>👵</td><td><code>:older_woman:</code></td><td>👴</td><td><code>:older_man:</code></td><td>👱</td><td><code>:person_with_blond_hair:</code></td><td>👲</td><td><code>:man_with_gua_pi_mao:</code></td></tr><tr class="odd"><td>👳</td><td><code>:man_with_turban:</code></td><td>👷</td><td><code>:construction_worker:</code></td><td>👮</td><td><code>:cop:</code></td><td>👼</td><td><code>:angel:</code></td></tr><tr class="even"><td>👸</td><td><code>:princess:</code></td><td>😺</td><td><code>:smiley_cat:</code></td><td>😸</td><td><code>:smile_cat:</code></td><td>😻</td><td><code>:heart_eyes_cat:</code></td></tr><tr class="odd"><td>😽</td><td><code>:kissing_cat:</code></td><td>😼</td><td><code>:smirk_cat:</code></td><td>🙀</td><td><code>:scream_cat:</code></td><td>😿</td><td><code>:crying_cat_face:</code></td></tr><tr class="even"><td>😹</td><td><code>:joy_cat:</code></td><td>😾</td><td><code>:pouting_cat:</code></td><td>👹</td><td><code>:japanese_ogre:</code></td><td>👺</td><td><code>:japanese_goblin:</code></td></tr><tr class="odd"><td>🙈</td><td><code>:see_no_evil:</code></td><td>🙉</td><td><code>:hear_no_evil:</code></td><td>🙊</td><td><code>:speak_no_evil:</code></td><td>💂</td><td><code>:guardsman:</code></td></tr><tr class="even"><td>💀</td><td><code>:skull:</code></td><td>🐾</td><td><code>:feet:</code></td><td>👄</td><td><code>:lips:</code></td><td>💋</td><td><code>:kiss:</code></td></tr><tr class="odd"><td>💧</td><td><code>:droplet:</code></td><td>👂</td><td><code>:ear:</code></td><td>👀</td><td><code>:eyes:</code></td><td>👃</td><td><code>:nose:</code></td></tr><tr class="even"><td>👅</td><td><code>:tongue:</code></td><td>💌</td><td><code>:love_letter:</code></td><td>👤</td><td><code>:bust_in_silhouette:</code></td><td>👥</td><td><code>:busts_in_silhouette:</code></td></tr><tr class="odd"><td>💬</td><td><code>:speech_balloon:</code></td><td>💭</td><td><code>:thought_balloon:</code></td><td>:trollface:</td><td><code>:trollface:</code></td><td></td><td></td></tr></tbody></table><h2 id="自然">自然</h2><table style="width:100%;"><colgroup><col style="width: 1%"><col style="width: 12%"><col style="width: 51%"><col style="width: 12%"><col style="width: 1%"><col style="width: 9%"><col style="width: 1%"><col style="width: 9%"></colgroup><thead><tr class="header"><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th></tr></thead><tbody><tr class="odd"><td>☀️</td><td><code>:sunny:</code></td><td>☔️</td><td><code>:umbrella:</code></td><td>☁️</td><td><code>:cloud:</code></td><td>❄️</td><td><code>:snowflake:</code></td></tr><tr class="even"><td>⛄️</td><td><code>:snowman:</code></td><td>⚡️</td><td><code>:zap:</code></td><td>🌀</td><td><code>:cyclone:</code></td><td>🌁</td><td><code>:foggy:</code></td></tr><tr class="odd"><td>🌊</td><td><code>:ocean:</code></td><td>🐱</td><td><code>:cat:</code></td><td>🐶</td><td><code>:dog:</code></td><td>🐭</td><td><code>:mouse:</code></td></tr><tr class="even"><td>🐹</td><td><code>:hamster:</code></td><td>🐰</td><td><code>:rabbit:</code></td><td>🐺</td><td><code>:wolf:</code></td><td>🐸</td><td><code>:frog:</code></td></tr><tr class="odd"><td>🐯</td><td><code>:tiger:</code></td><td>🐨</td><td><code>:koala:</code></td><td>🐻</td><td><code>:bear:</code></td><td>🐷</td><td><code>:pig:</code></td></tr><tr class="even"><td>🐽</td><td><code>:pig_nose:</code></td><td>🐮</td><td><code>:cow:</code></td><td>🐗</td><td><code>:boar:</code></td><td>🐵</td><td><code>:monkey_face:</code></td></tr><tr class="odd"><td>🐒</td><td><code>:monkey:</code></td><td>🐴</td><td><code>:horse:</code></td><td>🐎</td><td><code>:racehorse:</code></td><td>🐫</td><td><code>:camel:</code></td></tr><tr class="even"><td>🐑</td><td><code>:sheep:</code></td><td>🐘</td><td><code>:elephant:</code></td><td>🐼</td><td><code>:panda_face:</code></td><td>🐍</td><td><code>:snake:</code></td></tr><tr class="odd"><td>🐦</td><td><code>:bird:</code></td><td>🐤</td><td><code>:baby_chick:</code></td><td>🐥</td><td><code>:hatched_chick:</code></td><td>🐣</td><td><code>:hatching_chick:</code></td></tr><tr class="even"><td>🐔</td><td><code>:chicken:</code></td><td>🐧</td><td><code>:penguin:</code></td><td>🐢</td><td><code>:turtle:</code></td><td>🐛</td><td><code>:bug:</code></td></tr><tr class="odd"><td>🐝</td><td><code>:honeybee:</code></td><td>🐜</td><td><code>:ant:</code></td><td>🐞</td><td><code>:beetle:</code></td><td>🐌</td><td><code>:snail:</code></td></tr><tr class="even"><td>🐙</td><td><code>:octopus:</code></td><td>🐠</td><td><code>:tropical_fish:</code></td><td>🐟</td><td><code>:fish:</code></td><td>🐳</td><td><code>:whale:</code></td></tr><tr class="odd"><td>🐋</td><td><code>:whale2:</code></td><td>🐬</td><td><code>:dolphin:</code></td><td>🐄</td><td><code>:cow2:</code></td><td>🐏</td><td><code>:ram:</code></td></tr><tr class="even"><td>🐀</td><td><code>:rat:</code></td><td>🐃</td><td><code>:water_buffalo:</code></td><td>🐅</td><td><code>:tiger2:</code></td><td>🐇</td><td><code>:rabbit2:</code></td></tr><tr class="odd"><td>🐉</td><td><code>:dragon:</code></td><td>🐐</td><td>🐐</td><td>🐓</td><td><code>:rooster:</code></td><td>🐕</td><td><code>:dog2:</code></td></tr><tr class="even"><td>🐖</td><td><code>:pig2:</code></td><td>🐁</td><td><code>:mouse2:</code></td><td>🐂</td><td><code>:ox:</code></td><td>🐲</td><td><code>:dragon_face:</code></td></tr><tr class="odd"><td>🐡</td><td><code>:blowfish:</code></td><td>🐊</td><td><code>:crocodile:</code></td><td>🐪</td><td><code>:dromedary_camel:</code></td><td>🐆</td><td><code>:leopard:</code></td></tr><tr class="even"><td>🐈</td><td><code>:cat2:</code></td><td>🐩</td><td><code>:poodle:</code></td><td>🐾</td><td><code>:paw_prints:</code></td><td>💐</td><td><code>:bouquet:</code></td></tr><tr class="odd"><td>🌸</td><td><code>:cherry_blossom:</code></td><td>🌷</td><td><code>:tulip:</code></td><td>🍀</td><td><code>:four_leaf_clover:</code></td><td>🌹</td><td><code>:rose:</code></td></tr><tr class="even"><td>🌻</td><td><code>:sunflower:</code></td><td>🌺</td><td><code>:hibiscus:</code></td><td>🍁</td><td><code>:maple_leaf:</code></td><td>🍃</td><td><code>:leaves:</code></td></tr><tr class="odd"><td>🍂</td><td><code>:fallen_leaf:</code></td><td>🌿</td><td><code>:herb:</code></td><td>🍄</td><td><code>:mushroom:</code></td><td>🌵</td><td><code>:cactus:</code></td></tr><tr class="even"><td>🌴</td><td><code>:palm_tree:</code></td><td>🌲</td><td><code>:evergreen_tree:</code></td><td>🌳</td><td><code>:deciduous_tree:</code></td><td>🌰</td><td><code>:chestnut:</code></td></tr><tr class="odd"><td>🌱</td><td><code>:seedling:</code></td><td>🌼</td><td><code>:blossom:</code></td><td>🌾</td><td><code>:ear_of_rice:</code></td><td>🐚</td><td><code>:shell:</code></td></tr><tr class="even"><td>🌐</td><td><code>:globe_with_meridians:</code></td><td>🌞</td><td><code>:sun_with_face:</code></td><td>🌝</td><td><code>:full_moon_with_face:</code></td><td>🌚</td><td><code>:new_moon_with_face:</code></td></tr><tr class="odd"><td>🌑</td><td><code>:new_moon:</code></td><td>🌒</td><td><code>:waxing_crescent_moon:</code></td><td>🌓</td><td><code>:first_quarter_moon:</code></td><td>🌔</td><td><code>:waxing_gibbous_moon:</code></td></tr><tr class="even"><td>🌕</td><td><code>:full_moon:</code></td><td>🌖</td><td><code>:waning_gibbous_moon:</code></td><td>🌗</td><td><code>:last_quarter_moon:</code></td><td>🌘</td><td><code>:waning_crescent_moon:</code></td></tr><tr class="odd"><td>🌜</td><td><code>:last_quarter_moon_with_face:</code></td><td>🌛</td><td><code>:first_quarter_moon_with_face:</code></td><td>🌔</td><td><code>:moon:</code></td><td>🌍</td><td><code>:earth_africa:</code></td></tr><tr class="even"><td>🌎</td><td><code>:earth_americas:</code></td><td>🌏</td><td><code>:earth_asia:</code></td><td>🌋</td><td><code>:volcano:</code></td><td>🌌</td><td><code>:milky_way:</code></td></tr><tr class="odd"><td>⛅️</td><td><code>:partly_sunny:</code></td><td>:octocat:</td><td><code>:octocat:</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="事物">事物</h2><table><colgroup><col style="width: 2%"><col style="width: 21%"><col style="width: 2%"><col style="width: 17%"><col style="width: 2%"><col style="width: 22%"><col style="width: 2%"><col style="width: 26%"></colgroup><thead><tr class="header"><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th></tr></thead><tbody><tr class="odd"><td>🎍</td><td><code>:bamboo:</code></td><td>💝</td><td><code>:gift_heart:</code></td><td>🎎</td><td><code>:dolls:</code></td><td>🎒</td><td><code>:school_satchel:</code></td></tr><tr class="even"><td>🎓</td><td><code>:mortar_board:</code></td><td>🎏</td><td><code>:flags:</code></td><td>🎆</td><td><code>:fireworks:</code></td><td>🎇</td><td><code>:sparkler:</code></td></tr><tr class="odd"><td>🎐</td><td><code>:wind_chime:</code></td><td>🎑</td><td><code>:rice_scene:</code></td><td>🎃</td><td><code>:jack_o_lantern:</code></td><td>👻</td><td><code>:ghost:</code></td></tr><tr class="even"><td>🎅</td><td><code>:santa:</code></td><td>🎄</td><td><code>:christmas_tree:</code></td><td>🎁</td><td><code>:gift:</code></td><td>🔔</td><td><code>:bell:</code></td></tr><tr class="odd"><td>🔕</td><td><code>:no_bell:</code></td><td>🎋</td><td><code>:tanabata_tree:</code></td><td>🎉</td><td><code>:tada:</code></td><td>🎊</td><td><code>:confetti_ball:</code></td></tr><tr class="even"><td>🎈</td><td><code>:balloon:</code></td><td>🔮</td><td><code>:crystal_ball:</code></td><td>💿</td><td><code>:cd:</code></td><td>📀</td><td><code>:dvd:</code></td></tr><tr class="odd"><td>💾</td><td><code>:floppy_disk:</code></td><td>📷</td><td><code>:camera:</code></td><td>📹</td><td><code>:video_camera:</code></td><td>🎥</td><td><code>:movie_camera:</code></td></tr><tr class="even"><td>💻</td><td><code>:computer:</code></td><td>📺</td><td><code>:tv:</code></td><td>📱</td><td><code>:iphone:</code></td><td>☎️</td><td><code>:phone:</code></td></tr><tr class="odd"><td>☎️</td><td><code>:telephone:</code></td><td>📞</td><td><code>:telephone_receiver:</code></td><td>📟</td><td><code>:pager:</code></td><td>📠</td><td><code>:fax:</code></td></tr><tr class="even"><td>💽</td><td><code>:minidisc:</code></td><td>📼</td><td><code>:vhs:</code></td><td>🔉</td><td><code>:sound:</code></td><td>🔈</td><td><code>:speaker:</code></td></tr><tr class="odd"><td>🔇</td><td><code>:mute:</code></td><td>📢</td><td><code>:loudspeaker:</code></td><td>📣</td><td><code>:mega:</code></td><td>⌛️</td><td><code>:hourglass:</code></td></tr><tr class="even"><td>⏳</td><td><code>:hourglass_flowing_sand:</code></td><td>⏰</td><td><code>:alarm_clock:</code></td><td>⌚️</td><td><code>:watch:</code></td><td>📻</td><td><code>:radio:</code></td></tr><tr class="odd"><td>📡</td><td><code>:satellite:</code></td><td>➿</td><td><code>:loop:</code></td><td>🔍</td><td><code>:mag:</code></td><td>🔎</td><td><code>:mag_right:</code></td></tr><tr class="even"><td>🔓</td><td><code>:unlock:</code></td><td>🔒</td><td><code>:lock:</code></td><td>🔏</td><td><code>:lock_with_ink_pen:</code></td><td>🔐</td><td><code>:closed_lock_with_key:</code></td></tr><tr class="odd"><td>🔑</td><td><code>:key:</code></td><td>💡</td><td><code>:bulb:</code></td><td>🔦</td><td><code>:flashlight:</code></td><td>🔆</td><td><code>:high_brightness:</code></td></tr><tr class="even"><td>🔅</td><td><code>:low_brightness:</code></td><td>🔌</td><td><code>:electric_plug:</code></td><td>🔋</td><td><code>:battery:</code></td><td>📲</td><td><code>:calling:</code></td></tr><tr class="odd"><td>✉️</td><td><code>:email:</code></td><td>📫</td><td><code>:mailbox:</code></td><td>📮</td><td><code>:postbox:</code></td><td>🛀</td><td><code>:bath:</code></td></tr><tr class="even"><td>🛁</td><td><code>:bathtub:</code></td><td>🚿</td><td><code>:shower:</code></td><td>🚽</td><td><code>:toilet:</code></td><td>🔧</td><td><code>:wrench:</code></td></tr><tr class="odd"><td>🔩</td><td><code>:nut_and_bolt:</code></td><td>🔨</td><td><code>:hammer:</code></td><td>💺</td><td><code>:seat:</code></td><td>💰</td><td><code>:moneybag:</code></td></tr><tr class="even"><td>💴</td><td><code>:yen:</code></td><td>💵</td><td><code>:dollar:</code></td><td>💷</td><td><code>:pound:</code></td><td>💶</td><td><code>:euro:</code></td></tr><tr class="odd"><td>💳</td><td><code>:credit_card:</code></td><td>💸</td><td><code>:money_with_wings:</code></td><td>📧</td><td><code>:e-mail:</code></td><td>📥</td><td><code>:inbox_tray:</code></td></tr><tr class="even"><td>📤</td><td><code>:outbox_tray:</code></td><td>✉️</td><td><code>:envelope:</code></td><td>📨</td><td><code>:incoming_envelope:</code></td><td>📯</td><td><code>:postal_horn:</code></td></tr><tr class="odd"><td>📪</td><td><code>:mailbox_closed:</code></td><td>📬</td><td><code>:mailbox_with_mail:</code></td><td>📭</td><td><code>:mailbox_with_no_mail:</code></td><td>🚪</td><td><code>:door:</code></td></tr><tr class="even"><td>🚬</td><td><code>:smoking:</code></td><td>💣</td><td><code>:bomb:</code></td><td>🔫</td><td><code>:gun:</code></td><td>🔪</td><td><code>:hocho:</code></td></tr><tr class="odd"><td>💊</td><td><code>:pill:</code></td><td>💉</td><td><code>:syringe:</code></td><td>📄</td><td><code>:page_facing_up:</code></td><td>📃</td><td><code>:page_with_curl:</code></td></tr><tr class="even"><td>📑</td><td><code>:bookmark_tabs:</code></td><td>📊</td><td><code>:bar_chart:</code></td><td>📈</td><td><code>:chart_with_upwards_trend:</code></td><td>📉</td><td><code>:chart_with_downwards_trend:</code></td></tr><tr class="odd"><td>📜</td><td><code>:scroll:</code></td><td>📋</td><td><code>:clipboard:</code></td><td>📆</td><td><code>:calendar:</code></td><td>📅</td><td><code>:date:</code></td></tr><tr class="even"><td>📇</td><td><code>:card_index:</code></td><td>📁</td><td><code>:file_folder:</code></td><td>📂</td><td><code>:open_file_folder:</code></td><td>✂️</td><td><code>:scissors:</code></td></tr><tr class="odd"><td>📌</td><td><code>:pushpin:</code></td><td>📎</td><td><code>:paperclip:</code></td><td>✒️</td><td><code>:black_nib:</code></td><td>✏️</td><td><code>:pencil2:</code></td></tr><tr class="even"><td>📏</td><td><code>:straight_ruler:</code></td><td>📐</td><td><code>:triangular_ruler:</code></td><td>📕</td><td><code>:closed_book:</code></td><td>📗</td><td><code>:green_book:</code></td></tr><tr class="odd"><td>📘</td><td><code>:blue_book:</code></td><td>📙</td><td><code>:orange_book:</code></td><td>📓</td><td><code>:notebook:</code></td><td>📔</td><td><code>:notebook_with_decorative_cover:</code></td></tr><tr class="even"><td>📒</td><td><code>:ledger:</code></td><td>📚</td><td><code>:books:</code></td><td>🔖</td><td><code>:bookmark:</code></td><td>📛</td><td><code>:name_badge:</code></td></tr><tr class="odd"><td>🔬</td><td><code>:microscope:</code></td><td>🔭</td><td><code>:telescope:</code></td><td>📰</td><td><code>:newspaper:</code></td><td>🏈</td><td><code>:football:</code></td></tr><tr class="even"><td>🏀</td><td><code>:basketball:</code></td><td>⚽️</td><td><code>:soccer:</code></td><td>⚾️</td><td><code>:baseball:</code></td><td>🎾</td><td><code>:tennis:</code></td></tr><tr class="odd"><td>🎱</td><td><code>:8ball:</code></td><td>🏉</td><td><code>:rugby_football:</code></td><td>🎳</td><td><code>:bowling:</code></td><td>⛳️</td><td><code>:golf:</code></td></tr><tr class="even"><td>🚵</td><td><code>:mountain_bicyclist:</code></td><td>🚴</td><td><code>:bicyclist:</code></td><td>🏇</td><td><code>:horse_racing:</code></td><td>🏂</td><td><code>:snowboarder:</code></td></tr><tr class="odd"><td>🏊</td><td><code>:swimmer:</code></td><td>🏄</td><td><code>:surfer:</code></td><td>🎿</td><td><code>:ski:</code></td><td>♠️</td><td><code>:spades:</code></td></tr><tr class="even"><td>♥️</td><td><code>:hearts:</code></td><td>♣️</td><td><code>:clubs:</code></td><td>♦️</td><td><code>:diamonds:</code></td><td>💎</td><td><code>:gem:</code></td></tr><tr class="odd"><td>💍</td><td><code>:ring:</code></td><td>🏆</td><td><code>:trophy:</code></td><td>🎼</td><td><code>:musical_score:</code></td><td>🎹</td><td><code>:musical_keyboard:</code></td></tr><tr class="even"><td>🎻</td><td><code>:violin:</code></td><td>👾</td><td><code>:space_invader:</code></td><td>🎮</td><td><code>:video_game:</code></td><td>🃏</td><td><code>:black_joker:</code></td></tr><tr class="odd"><td>🎴</td><td><code>:flower_playing_cards:</code></td><td>🎲</td><td><code>:game_die:</code></td><td>🎯</td><td><code>:dart:</code></td><td>🀄️</td><td><code>:mahjong:</code></td></tr><tr class="even"><td>🎬</td><td><code>:clapper:</code></td><td>📝</td><td><code>:memo:</code></td><td>📝</td><td><code>:pencil:</code></td><td>📖</td><td><code>:book:</code></td></tr><tr class="odd"><td>🎨</td><td><code>:art:</code></td><td>🎤</td><td><code>:microphone:</code></td><td>🎧</td><td><code>:headphones:</code></td><td>🎺</td><td><code>:trumpet:</code></td></tr><tr class="even"><td>🎷</td><td><code>:saxophone:</code></td><td>🎸</td><td><code>:guitar:</code></td><td>👞</td><td><code>:shoe:</code></td><td>👡</td><td><code>:sandal:</code></td></tr><tr class="odd"><td>👠</td><td><code>:high_heel:</code></td><td>💄</td><td><code>:lipstick:</code></td><td>👢</td><td><code>:boot:</code></td><td>👕</td><td><code>:shirt:</code></td></tr><tr class="even"><td>👕</td><td><code>:tshirt:</code></td><td>👔</td><td><code>:necktie:</code></td><td>👚</td><td><code>:womans_clothes:</code></td><td>👗</td><td><code>:dress:</code></td></tr><tr class="odd"><td>🎽</td><td><code>:running_shirt_with_sash:</code></td><td>👖</td><td><code>:jeans:</code></td><td>👘</td><td><code>:kimono:</code></td><td>👙</td><td><code>:bikini:</code></td></tr><tr class="even"><td>🎀</td><td><code>:ribbon:</code></td><td>🎩</td><td><code>:tophat:</code></td><td>👑</td><td><code>:crown:</code></td><td>👒</td><td><code>:womans_hat:</code></td></tr><tr class="odd"><td>👞</td><td><code>:mans_shoe:</code></td><td>🌂</td><td><code>:closed_umbrella:</code></td><td>💼</td><td><code>:briefcase:</code></td><td>👜</td><td><code>:handbag:</code></td></tr><tr class="even"><td>👝</td><td><code>:pouch:</code></td><td>👛</td><td><code>:purse:</code></td><td>👓</td><td><code>:eyeglasses:</code></td><td>🎣</td><td><code>:fishing_pole_and_fish:</code></td></tr><tr class="odd"><td>☕️</td><td><code>:coffee:</code></td><td>🍵</td><td><code>:tea:</code></td><td>🍶</td><td><code>:sake:</code></td><td>🍼</td><td><code>:baby_bottle:</code></td></tr><tr class="even"><td>🍺</td><td><code>:beer:</code></td><td>🍻</td><td><code>:beers:</code></td><td>🍸</td><td><code>:cocktail:</code></td><td>🍹</td><td><code>:tropical_drink:</code></td></tr><tr class="odd"><td>🍷</td><td><code>:wine_glass:</code></td><td>🍴</td><td><code>:fork_and_knife:</code></td><td>🍕</td><td><code>:pizza:</code></td><td>🍔</td><td><code>:hamburger:</code></td></tr><tr class="even"><td>🍟</td><td><code>:fries:</code></td><td>🍗</td><td><code>:poultry_leg:</code></td><td>🍖</td><td><code>:meat_on_bone:</code></td><td>🍝</td><td><code>:spaghetti:</code></td></tr><tr class="odd"><td>🍛</td><td><code>:curry:</code></td><td>🍤</td><td><code>:fried_shrimp:</code></td><td>🍱</td><td><code>:bento:</code></td><td>🍣</td><td><code>:sushi:</code></td></tr><tr class="even"><td>🍥</td><td><code>:fish_cake:</code></td><td>🍙</td><td><code>:rice_ball:</code></td><td>🍘</td><td><code>:rice_cracker:</code></td><td>🍚</td><td><code>:rice:</code></td></tr><tr class="odd"><td>🍜</td><td><code>:ramen:</code></td><td>🍲</td><td><code>:stew:</code></td><td>🍢</td><td><code>:oden:</code></td><td>🍡</td><td><code>:dango:</code></td></tr><tr class="even"><td>🥚</td><td><code>:egg:</code></td><td>🍞</td><td><code>:bread:</code></td><td>🍩</td><td><code>:doughnut:</code></td><td>🍮</td><td><code>:custard:</code></td></tr><tr class="odd"><td>🍦</td><td><code>:icecream:</code></td><td>🍨</td><td><code>:ice_cream:</code></td><td>🍧</td><td><code>:shaved_ice:</code></td><td>🎂</td><td><code>:birthday:</code></td></tr><tr class="even"><td>🍰</td><td><code>:cake:</code></td><td>🍪</td><td><code>:cookie:</code></td><td>🍪</td><td><code>:cookie:</code></td><td>🍫</td><td><code>:chocolate_bar:</code></td></tr><tr class="odd"><td>🍬</td><td><code>:candy:</code></td><td>🍭</td><td><code>:lollipop:</code></td><td>🍯</td><td><code>:honey_pot:</code></td><td>🍎</td><td><code>:apple:</code></td></tr><tr class="even"><td>🍏</td><td><code>:green_apple:</code></td><td>🍊</td><td><code>:tangerine:</code></td><td>🍋</td><td><code>:lemon:</code></td><td>🍒</td><td><code>:cherries:</code></td></tr><tr class="odd"><td>🍇</td><td><code>:grapes:</code></td><td>🍉</td><td><code>:watermelon:</code></td><td>🍓</td><td><code>:strawberry:</code></td><td>🍑</td><td><code>:peach:</code></td></tr><tr class="even"><td>🍈</td><td><code>:melon:</code></td><td>🍌</td><td><code>:banana:</code></td><td>🍐</td><td><code>:pear:</code></td><td>🍍</td><td><code>:pineapple:</code></td></tr><tr class="odd"><td>🍠</td><td><code>:sweet_potato:</code></td><td>🍆</td><td><code>:eggplant:</code></td><td>🍅</td><td><code>:tomato:</code></td><td>🌽</td><td><code>:corn:</code></td></tr></tbody></table><h2 id="地点">地点</h2><table><colgroup><col style="width: 3%"><col style="width: 18%"><col style="width: 3%"><col style="width: 22%"><col style="width: 3%"><col style="width: 23%"><col style="width: 3%"><col style="width: 22%"></colgroup><thead><tr class="header"><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th></tr></thead><tbody><tr class="odd"><td>🏠</td><td><code>:house:</code></td><td>🏡</td><td><code>:house_with_garden:</code></td><td>🏫</td><td><code>:school:</code></td><td>🏢</td><td><code>:office:</code></td></tr><tr class="even"><td>🏣</td><td><code>:post_office:</code></td><td>🏥</td><td><code>:hospital:</code></td><td>🏦</td><td><code>:bank:</code></td><td>🏪</td><td><code>:convenience_store:</code></td></tr><tr class="odd"><td>🏩</td><td><code>:love_hotel:</code></td><td>🏨</td><td><code>:hotel:</code></td><td>💒</td><td><code>:wedding:</code></td><td>⛪️</td><td><code>:church:</code></td></tr><tr class="even"><td>🏬</td><td><code>:department_store:</code></td><td>🏤</td><td><code>:european_post_office:</code></td><td>🌇</td><td><code>:city_sunrise:</code></td><td>🌆</td><td><code>:city_sunset:</code></td></tr><tr class="odd"><td>🏯</td><td><code>:japanese_castle:</code></td><td>🏰</td><td><code>:european_castle:</code></td><td>⛺️</td><td><code>:tent:</code></td><td>🏭</td><td><code>:factory:</code></td></tr><tr class="even"><td>🗼</td><td><code>:tokyo_tower:</code></td><td>🗾</td><td><code>:japan:</code></td><td>🗻</td><td><code>:mount_fuji:</code></td><td>🌄</td><td><code>:sunrise_over_mountains:</code></td></tr><tr class="odd"><td>🌅</td><td><code>:sunrise:</code></td><td>🌠</td><td><code>:stars:</code></td><td>🗽</td><td><code>:statue_of_liberty:</code></td><td>🌉</td><td><code>:bridge_at_night:</code></td></tr><tr class="even"><td>🎠</td><td><code>:carousel_horse:</code></td><td>🌈</td><td><code>:rainbow:</code></td><td>🎡</td><td><code>:ferris_wheel:</code></td><td>⛲️</td><td><code>:fountain:</code></td></tr><tr class="odd"><td>🎢</td><td><code>:roller_coaster:</code></td><td>🚢</td><td><code>:ship:</code></td><td>🚤</td><td><code>:speedboat:</code></td><td>⛵️</td><td><code>:boat:</code></td></tr><tr class="even"><td>⛵️</td><td><code>:sailboat:</code></td><td>🚣</td><td><code>:rowboat:</code></td><td>⚓️</td><td><code>:anchor:</code></td><td>🚀</td><td><code>:rocket:</code></td></tr><tr class="odd"><td>✈️</td><td><code>:airplane:</code></td><td>🚁</td><td><code>:helicopter:</code></td><td>🚂</td><td><code>:steam_locomotive:</code></td><td>🚊</td><td><code>:tram:</code></td></tr><tr class="even"><td>🚞</td><td><code>:mountain_railway:</code></td><td>🚲</td><td><code>:bike:</code></td><td>🚡</td><td><code>:aerial_tramway:</code></td><td>🚟</td><td><code>:suspension_railway:</code></td></tr><tr class="odd"><td>🚠</td><td><code>:mountain_cableway:</code></td><td>🚜</td><td><code>:tractor:</code></td><td>🚙</td><td><code>:blue_car:</code></td><td>🚘</td><td><code>:oncoming_automobile:</code></td></tr><tr class="even"><td>🚗</td><td><code>:car:</code></td><td>🚗</td><td><code>:red_car:</code></td><td>🚕</td><td><code>:taxi:</code></td><td>🚖</td><td><code>:oncoming_taxi:</code></td></tr><tr class="odd"><td>🚛</td><td><code>:articulated_lorry:</code></td><td>🚌</td><td><code>:bus:</code></td><td>🚍</td><td><code>:oncoming_bus:</code></td><td>🚨</td><td><code>:rotating_light:</code></td></tr><tr class="even"><td>🚓</td><td><code>:police_car:</code></td><td>🚔</td><td><code>:oncoming_police_car:</code></td><td>🚒</td><td><code>:fire_engine:</code></td><td>🚑</td><td><code>:ambulance:</code></td></tr><tr class="odd"><td>🚐</td><td><code>:minibus:</code></td><td>🚚</td><td><code>:truck:</code></td><td>🚋</td><td><code>:train:</code></td><td>🚉</td><td><code>:station:</code></td></tr><tr class="even"><td>🚆</td><td><code>:train2:</code></td><td>🚅</td><td><code>:bullettrain_front:</code></td><td>🚄</td><td><code>:bullettrain_side:</code></td><td>🚈</td><td><code>:light_rail:</code></td></tr><tr class="odd"><td>🚝</td><td><code>:monorail:</code></td><td>🚃</td><td><code>:railway_car:</code></td><td>🚎</td><td><code>:trolleybus:</code></td><td>🎫</td><td><code>:ticket:</code></td></tr><tr class="even"><td>⛽️</td><td><code>:fuelpump:</code></td><td>🚦</td><td><code>:vertical_traffic_light:</code></td><td>🚥</td><td><code>:traffic_light:</code></td><td>⚠️</td><td><code>:warning:</code></td></tr><tr class="odd"><td>🚧</td><td><code>:construction:</code></td><td>🔰</td><td><code>:beginner:</code></td><td>🏧</td><td><code>:atm:</code></td><td>🎰</td><td><code>:slot_machine:</code></td></tr><tr class="even"><td>🚏</td><td><code>:busstop:</code></td><td>💈</td><td><code>:barber:</code></td><td>♨️</td><td><code>:hotsprings:</code></td><td>🏁</td><td><code>:checkered_flag:</code></td></tr><tr class="odd"><td>🎌</td><td><code>:crossed_flags:</code></td><td>🏮</td><td><code>:izakaya_lantern:</code></td><td>🗿</td><td><code>:moyai:</code></td><td>🎪</td><td><code>:circus_tent:</code></td></tr><tr class="even"><td>🎭</td><td><code>:performing_arts:</code></td><td>📍</td><td><code>:round_pushpin:</code></td><td>🚩</td><td><code>:triangular_flag_on_post:</code></td><td>🇯🇵</td><td><code>:jp:</code></td></tr><tr class="odd"><td>🇰🇷</td><td><code>:kr:</code></td><td>🇨🇳</td><td><code>:cn:</code></td><td>🇺🇸</td><td><code>:us:</code></td><td>🇫🇷</td><td><code>:fr:</code></td></tr><tr class="even"><td>🇪🇸</td><td><code>:es:</code></td><td>🇮🇹</td><td><code>:it:</code></td><td>🇷🇺</td><td><code>:ru:</code></td><td>🇬🇧</td><td><code>:gb:</code></td></tr><tr class="odd"><td>🇬🇧</td><td><code>:uk:</code></td><td>🇩🇪</td><td><code>:de:</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="符号">符号</h2><table><colgroup><col style="width: 3%"><col style="width: 22%"><col style="width: 3%"><col style="width: 24%"><col style="width: 3%"><col style="width: 19%"><col style="width: 3%"><col style="width: 20%"></colgroup><thead><tr class="header"><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th><th>表情</th><th>代码</th></tr></thead><tbody><tr class="odd"><td> 1️⃣</td><td><code>:one:</code></td><td>2️⃣</td><td><code>:two:</code></td><td>3️⃣</td><td><code>:three:</code></td><td>4️⃣</td><td><code>:four:</code></td></tr><tr class="even"><td>5️⃣</td><td><code>:five:</code></td><td>6️⃣</td><td><code>:six:</code></td><td>7️⃣</td><td><code>:seven:</code></td><td>8️⃣</td><td><code>:eight:</code></td></tr><tr class="odd"><td>9️⃣</td><td><code>:nine:</code></td><td>🔟</td><td><code>:keycap_ten:</code></td><td>🔢</td><td><code>:1234:</code></td><td>0️⃣</td><td><code>:zero:</code></td></tr><tr class="even"><td>#️⃣</td><td><code>:hash:</code></td><td>🔣</td><td><code>:symbols:</code></td><td>◀️</td><td><code>:arrow_backward:</code></td><td>⬇️</td><td><code>:arrow_down:</code></td></tr><tr class="odd"><td>▶️</td><td><code>:arrow_forward:</code></td><td>⬅️</td><td><code>:arrow_left:</code></td><td>🔠</td><td><code>:capital_abcd:</code></td><td>🔡</td><td><code>:abcd:</code></td></tr><tr class="even"><td>🔤</td><td><code>:abc:</code></td><td>↙️</td><td><code>:arrow_lower_left:</code></td><td>↘️</td><td><code>:arrow_lower_right:</code></td><td>➡️</td><td><code>:arrow_right:</code></td></tr><tr class="odd"><td>⬆️</td><td><code>:arrow_up:</code></td><td>↖️</td><td><code>:arrow_upper_left:</code></td><td>↗️</td><td><code>:arrow_upper_right:</code></td><td>⏬</td><td><code>:arrow_double_down:</code></td></tr><tr class="even"><td>⏫</td><td><code>:arrow_double_up:</code></td><td>🔽</td><td><code>:arrow_down_small:</code></td><td>⤵️</td><td><code>:arrow_heading_down:</code></td><td>⤴️</td><td><code>:arrow_heading_up:</code></td></tr><tr class="odd"><td>↩︎️</td><td><code>:leftwards_arrow_with_hook:</code></td><td>↪️</td><td><code>:arrow_right_hook:</code></td><td>↔︎️</td><td><code>:left_right_arrow:</code></td><td>↕️</td><td><code>:arrow_up_down:</code></td></tr><tr class="even"><td>🔼</td><td><code>:arrow_up_small:</code></td><td>🔃</td><td><code>:arrows_clockwise:</code></td><td>🔄</td><td><code>:arrows_counterclockwise:</code></td><td>⏪</td><td><code>:rewind:</code></td></tr><tr class="odd"><td>⏩</td><td><code>:fast_forward:</code></td><td>ℹ️</td><td><code>:information_source:</code></td><td>🆗</td><td><code>:ok:</code></td><td>🔀</td><td><code>:twisted_rightwards_arrows:</code></td></tr><tr class="even"><td>🔁</td><td><code>:repeat:</code></td><td>🔂</td><td><code>:repeat_one:</code></td><td>🆕</td><td><code>:new:</code></td><td>🔝</td><td><code>:top:</code></td></tr><tr class="odd"><td>🆙</td><td><code>:up:</code></td><td>🆒</td><td><code>:cool:</code></td><td>🆓</td><td><code>:free:</code></td><td>🆖</td><td><code>:ng:</code></td></tr><tr class="even"><td>🎦</td><td><code>:cinema:</code></td><td>🈁</td><td><code>:koko:</code></td><td>📶</td><td><code>:signal_strength:</code></td><td>🈹</td><td><code>:u5272:</code></td></tr><tr class="odd"><td>🈴</td><td><code>:u5408:</code></td><td>🈺</td><td><code>:u55b6:</code></td><td>🈯️</td><td><code>:u6307:</code></td><td>🈷️</td><td><code>:u6708:</code></td></tr><tr class="even"><td>🈶</td><td><code>:u6709:</code></td><td>🈵</td><td><code>:u6e80:</code></td><td>🈚️</td><td><code>:u7121:</code></td><td>🈸</td><td><code>:u7533:</code></td></tr><tr class="odd"><td>🈳</td><td><code>:u7a7a:</code></td><td>🈲</td><td><code>:u7981:</code></td><td>🈂️</td><td><code>:sa:</code></td><td>🚻</td><td><code>:restroom:</code></td></tr><tr class="even"><td>🚹</td><td><code>:mens:</code></td><td>🚺</td><td><code>:womens:</code></td><td>🚼</td><td><code>:baby_symbol:</code></td><td>🚭</td><td><code>:no_smoking:</code></td></tr><tr class="odd"><td>🅿️</td><td><code>:parking:</code></td><td>♿️</td><td><code>:wheelchair:</code></td><td>🚇</td><td><code>:metro:</code></td><td>🛄</td><td><code>:baggage_claim:</code></td></tr><tr class="even"><td>🚰</td><td><code>:potable_water:</code></td><td>🚾</td><td><code>:wc:</code></td><td>🚮</td><td><code>:put_litter_in_its_place:</code></td><td>㊙️</td><td><code>:secret:</code></td></tr><tr class="odd"><td>㊗️</td><td><code>:congratulations:</code></td><td>Ⓜ️</td><td><code>:m:</code></td><td>🛂</td><td><code>:passport_control:</code></td><td>🛅</td><td><code>:left_luggage:</code></td></tr><tr class="even"><td>🛃</td><td><code>:customs:</code></td><td>🉐</td><td><code>:ideograph_advantage:</code></td><td>🆑</td><td><code>:cl:</code></td><td>🆘</td><td><code>:sos:</code></td></tr><tr class="odd"><td>🆔</td><td><code>:id:</code></td><td>🚫</td><td><code>:no_entry_sign:</code></td><td>🔞</td><td><code>:underage:</code></td><td>📵</td><td><code>:no_mobile_phones:</code></td></tr><tr class="even"><td>🚯</td><td><code>:do_not_litter:</code></td><td>🚱</td><td><code>:non-potable_water:</code></td><td>🚳</td><td><code>:no_bicycles:</code></td><td>🚷</td><td><code>:no_pedestrians:</code></td></tr><tr class="odd"><td>🚸</td><td><code>:children_crossing:</code></td><td>⛔️</td><td><code>:no_entry:</code></td><td>✳️</td><td><code>:eight_spoked_asterisk:</code></td><td>✴️</td><td><code>:eight_pointed_black_star:</code></td></tr><tr class="even"><td>💟</td><td><code>:heart_decoration:</code></td><td>🆚</td><td><code>:vs:</code></td><td>📳</td><td><code>:vibration_mode:</code></td><td>📴</td><td><code>:mobile_phone_off:</code></td></tr><tr class="odd"><td>💹</td><td><code>:chart:</code></td><td>💱</td><td><code>:currency_exchange:</code></td><td>♈️</td><td><code>:aries:</code></td><td>♉️</td><td><code>:taurus:</code></td></tr><tr class="even"><td>♊️</td><td><code>:gemini:</code></td><td>♋️</td><td><code>:cancer:</code></td><td>♌️</td><td><code>:leo:</code></td><td>♍️</td><td><code>:virgo:</code></td></tr><tr class="odd"><td>♎️</td><td><code>:libra:</code></td><td>♏️</td><td><code>:scorpius:</code></td><td>♐️</td><td><code>:sagittarius:</code></td><td>♑️</td><td><code>:capricorn:</code></td></tr><tr class="even"><td>♒️</td><td><code>:aquarius:</code></td><td>♓️</td><td><code>:pisces:</code></td><td>⛎</td><td><code>:ophiuchus:</code></td><td>🔯</td><td><code>:six_pointed_star:</code></td></tr><tr class="odd"><td>❎</td><td><code>:negative_squared_cross_mark:</code></td><td>🅰️</td><td><code>:a:</code></td><td>🅱️</td><td><code>:b:</code></td><td>🆎</td><td><code>:ab:</code></td></tr><tr class="even"><td>🅾️</td><td><code>:o2:</code></td><td>💠</td><td><code>:diamond_shape_with_a_dot_inside:</code></td><td>♻️</td><td><code>:recycle:</code></td><td>🔚</td><td><code>:end:</code></td></tr><tr class="odd"><td>🔛</td><td><code>:on:</code></td><td>🔜</td><td><code>:soon:</code></td><td>🕐</td><td><code>:clock1:</code></td><td>🕜</td><td><code>:clock130:</code></td></tr><tr class="even"><td>🕙</td><td><code>:clock10:</code></td><td>🕥</td><td><code>:clock1030:</code></td><td>🕚</td><td><code>:clock11:</code></td><td>🕦</td><td><code>:clock1130:</code></td></tr><tr class="odd"><td>🕛</td><td><code>:clock12:</code></td><td>🕧</td><td><code>:clock1230:</code></td><td>🕑</td><td><code>:clock2:</code></td><td>🕝</td><td><code>:clock230:</code></td></tr><tr class="even"><td>🕒</td><td><code>:clock3:</code></td><td>🕞</td><td><code>:clock330:</code></td><td>🕓</td><td><code>:clock4:</code></td><td>🕟</td><td><code>:clock430:</code></td></tr><tr class="odd"><td>🕔</td><td><code>:clock5:</code></td><td>🕠</td><td><code>:clock530:</code></td><td>🕕</td><td><code>:clock6:</code></td><td>🕡</td><td><code>:clock630:</code></td></tr><tr class="even"><td>🕖</td><td><code>:clock7:</code></td><td>🕢</td><td><code>:clock730:</code></td><td>🕗</td><td><code>:clock8:</code></td><td>🕣</td><td><code>:clock830:</code></td></tr><tr class="odd"><td>🕘</td><td><code>:clock9:</code></td><td>🕤</td><td><code>:clock930:</code></td><td>💲</td><td><code>:heavy_dollar_sign:</code></td><td>©️</td><td><code>:copyright:</code></td></tr><tr class="even"><td>®️</td><td><code>:registered:</code></td><td>™️</td><td><code>:tm:</code></td><td>❌</td><td><code>:x:</code></td><td>❗️</td><td><code>:heavy_exclamation_mark:</code></td></tr><tr class="odd"><td>‼️</td><td><code>:bangbang:</code></td><td>⁉️</td><td><code>:interrobang:</code></td><td>⭕️</td><td><code>:o:</code></td><td>✖️</td><td><code>:heavy_multiplication_x:</code></td></tr><tr class="even"><td>➕</td><td><code>:heavy_plus_sign:</code></td><td>➖</td><td><code>:heavy_minus_sign:</code></td><td>➗</td><td><code>:heavy_division_sign:</code></td><td>💮</td><td><code>:white_flower:</code></td></tr><tr class="odd"><td>💯</td><td><code>:100:</code></td><td>✔️</td><td><code>:heavy_check_mark:</code></td><td>☑️</td><td><code>:ballot_box_with_check:</code></td><td>🔘</td><td><code>:radio_button:</code></td></tr><tr class="even"><td>🔗</td><td><code>:link:</code></td><td>➰</td><td><code>:curly_loop:</code></td><td>〰️</td><td><code>:wavy_dash:</code></td><td>〽️</td><td><code>:part_alternation_mark:</code></td></tr><tr class="odd"><td>🔱</td><td><code>:trident:</code></td><td>✅</td><td><code>:white_check_mark:</code></td><td>🔲</td><td><code>:black_square_button:</code></td><td>🔳</td><td><code>:white_square_button:</code></td></tr><tr class="even"><td>⚫️</td><td><code>:black_circle:</code></td><td>⚪️</td><td><code>:white_circle:</code></td><td>🔴</td><td><code>:red_circle:</code></td><td>🔵</td><td><code>:large_blue_circle:</code></td></tr><tr class="odd"><td>🔷</td><td><code>:large_blue_diamond:</code></td><td>🔶</td><td><code>:large_orange_diamond:</code></td><td>🔹</td><td><code>:small_blue_diamond:</code></td><td>🔸</td><td><code>:small_orange_diamond:</code></td></tr><tr class="even"><td>🔺</td><td><code>:small_red_triangle:</code></td><td>🔻</td><td><code>:small_red_triangle_down:</code></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;参考 &lt;a href=&quot;https://github.com/liuchengxu/git-commit-emoji-cn&quot; title=&quot;git commit emoji 使用指南&quot;&gt;git commit emoji 使用指南&lt;/a&gt;、&lt;a href=&quot;https://github.com/zhouie/markdown-emoji&quot; title=&quot;markdown-emoji&quot;&gt;markdown-emoji&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="emoji" scheme="http://ann-zhgy.github.io/categories/emoji/"/>
    
    
    <category term="markdown emoji" scheme="http://ann-zhgy.github.io/tags/markdown-emoji/"/>
    
    <category term="github emoji" scheme="http://ann-zhgy.github.io/tags/github-emoji/"/>
    
  </entry>
  
  <entry>
    <title>JAVA9 新特性</title>
    <link href="http://ann-zhgy.github.io/2023/02/fb6d7cde.html"/>
    <id>http://ann-zhgy.github.io/2023/02/fb6d7cde.html</id>
    <published>2023-02-13T11:43:29.000Z</published>
    <updated>2023-11-15T06:22:06.577Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>JAVA9 并非一个长期更新版本，但是其中的一些新特性也代表着 Java更新的方向</p></blockquote><span id="more"></span><h1 id="jdk-目录的变化">JDK 目录的变化</h1><p>在 JavaSE 9 之前：</p><ul><li>bin 目录用于包含命令行开发和调试工具，如 javac，jar 和 javadoc。它还用于包含 Java 命令来启动 Java 应用程序。</li><li>include 目录包含在编译本地代码时使用的 C/C++ 头文件。</li><li>lib 目录包含 JDK 工具的几个 JAR 和其他类型的文件。它有一个 tools.jar 文件，其中包含 javac 编译器的 Java 类。</li><li>jre，如 java 命令。在 Windows 平台上，它包含系统的运行时动态链接库（DLL）。</li><li>jre，如.properties 和.policy 文件。</li><li>jre。这允许在 Java 社区进程之外创建的实施标准或独立技术的类和接口的更高版本被并入 Java 平台。这些 JAR 被添加到 JVM 的引导类路径中，从而覆盖了 Java 运行时中存在的这些类和接口的任何定义。</li><li>jre。该机制通过扩展类加载器（该类加载器）加载了该目录中的所有 JAR，该引导类加载器是系统类加载器的子进程，它加载所有应用程序类。通过将 JAR 放在此目录中，可以扩展 Java SE 平台。这些 JAR 的内容对于在此运行时映像上编译或运行的所有应用程序都可见。</li><li>jre。 rt.jar 文件包含运行时的 Java 类和资源文件。许多工具依赖于 rt.jar 文件的位置。</li><li>jre。</li><li>jre，其中包含运行时文件，如字体和图像。</li></ul><p>从 JavaSE 9 开始：</p><ul><li>没有名为 jre 的子目录。</li><li>bin 目录包含所有命令。在 Windows 平台上，它继续包含系统的运行时动态链接库。</li><li>conf 目录包含用户可编辑的配置文件，例如以前位于 jre.properties 和.policy 文件。</li><li>include 目录包含要在以前编译本地代码时使用的 C/C++ 头文件。它只存在于 JDK 中。</li><li>jmods 目录包含 JMOD 格式的平台模块。 创建自定义运行时映像时需要它。它只存在于 JDK 中。</li><li>legal 目录包含法律声明。</li><li>lib 目录包含非 Windows 平台上的动态链接本地库。其子目录和文件不应由开发人员直接编辑或使用。</li></ul><h1 id="接口可以添加私有方法">接口可以添加私有方法</h1><p>继 Java8 可以添加默认方法之后，Java9支持添加私有方法了，给人一种和抽象类越来越像的感觉</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">InterfaceA</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">defaultMethod</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"default method!"</span>);</span><br><span class="line">        System.out.println(<span class="string">"call private method..."</span>);</span><br><span class="line">        privateMethod();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">privateMethod</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"private method!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>接口中的私有方法可以提供给 default修饰的方法调用，在子类中是不可调用的</li></ul><h1 id="try-with-resource-语法糖支持将外部变量写在括号内">try-with-resource语法糖支持将外部变量写在括号内</h1><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TryWithResource</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(Objects.requireNonNull(TryWithResource.class.getResource(<span class="string">"/file.txt"</span>)).getPath());</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fileReader);</span><br><span class="line">        <span class="keyword">try</span> (fileReader; bufferedReader) {</span><br><span class="line">            <span class="comment">// 具体操作</span></span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) {</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>此写法使得 try-resource 的括号中的内容不再臃肿</li></ul><h1 id="变量命名时禁止使用-_">变量命名时禁止使用 ‘_’</h1><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1677650907021" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1677650907021.png" style="width: 100%;"></p></div><ul><li>在 Java8 中，单独使用 <code>_</code> 作为变量名会有警告信息，Java9中已经是会报错了</li></ul><h1 id="deprecated-注解添加属性"><span class="citation" data-cites="Deprecated">@Deprecated</span> 注解添加属性</h1><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2003, 2015, Oracle and/or its affiliates. All rights reserved.</span></span><br><span class="line"><span class="comment"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A program element annotated {<span class="doctag">@code</span> <span class="doctag">@Deprecated</span>} is one that programmers</span></span><br><span class="line"><span class="comment"> * are discouraged from using. An element may be deprecated for any of several</span></span><br><span class="line"><span class="comment"> * reasons, for example, its usage is likely to lead to errors; it may</span></span><br><span class="line"><span class="comment"> * be changed incompatibly or removed in a future version; it has been</span></span><br><span class="line"><span class="comment"> * superseded by a newer, usually preferable alternative; or it is obsolete.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Compilers issue warnings when a deprecated program element is used or</span></span><br><span class="line"><span class="comment"> * overridden in non-deprecated code. Use of the {<span class="doctag">@code</span> <span class="doctag">@Deprecated</span>}</span></span><br><span class="line"><span class="comment"> * annotation on a local variable declaration or on a parameter declaration</span></span><br><span class="line"><span class="comment"> * or a package declaration has no effect on the warnings issued by a compiler.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;When a module is deprecated, the use of that module in {<span class="doctag">@code</span></span></span><br><span class="line"><span class="comment"> * requires}, but not in {<span class="doctag">@code</span> exports} or {<span class="doctag">@code</span> opens} clauses causes</span></span><br><span class="line"><span class="comment"> * a warning to be issued. A module being deprecated does &lt;em&gt;not&lt;/em&gt; cause</span></span><br><span class="line"><span class="comment"> * warnings to be issued for uses of types within the module.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This annotation type has a string-valued element {<span class="doctag">@code</span> since}. The value</span></span><br><span class="line"><span class="comment"> * of this element indicates the version in which the annotated program element</span></span><br><span class="line"><span class="comment"> * was first deprecated.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This annotation type has a boolean-valued element {<span class="doctag">@code</span> forRemoval}.</span></span><br><span class="line"><span class="comment"> * A value of {<span class="doctag">@code</span> true} indicates intent to remove the annotated program</span></span><br><span class="line"><span class="comment"> * element in a future version. A value of {<span class="doctag">@code</span> false} indicates that use of</span></span><br><span class="line"><span class="comment"> * the annotated program element is discouraged, but at the time the program</span></span><br><span class="line"><span class="comment"> * element was annotated, there was no specific intent to remove it.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@apiNote</span></span></span><br><span class="line"><span class="comment"> * It is strongly recommended that the reason for deprecating a program element</span></span><br><span class="line"><span class="comment"> * be explained in the documentation, using the {<span class="doctag">@code</span> <span class="doctag">@deprecated</span>}</span></span><br><span class="line"><span class="comment"> * javadoc tag. The documentation should also suggest and link to a</span></span><br><span class="line"><span class="comment"> * recommended replacement API, if applicable. A replacement API often</span></span><br><span class="line"><span class="comment"> * has subtly different semantics, so such issues should be discussed as</span></span><br><span class="line"><span class="comment"> * well.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;It is recommended that a {<span class="doctag">@code</span> since} value be provided with all newly</span></span><br><span class="line"><span class="comment"> * annotated program elements. Note that {<span class="doctag">@code</span> since} cannot be mandatory,</span></span><br><span class="line"><span class="comment"> * as there are many existing annotations that lack this element value.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;There is no defined order among annotation elements. As a matter of</span></span><br><span class="line"><span class="comment"> * style, the {<span class="doctag">@code</span> since} element should be placed first.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;The {<span class="doctag">@code</span> <span class="doctag">@Deprecated</span>} annotation should always be present if</span></span><br><span class="line"><span class="comment"> * the {<span class="doctag">@code</span> <span class="doctag">@deprecated</span>} javadoc tag is present, and vice-versa.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  Neal Gafter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@jls</span> 9.6.4.6 <span class="doctag">@Deprecated</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(value={CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, MODULE, PARAMETER, TYPE})</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Deprecated {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the version in which the annotated element became deprecated.</span></span><br><span class="line"><span class="comment">     * The version string is in the same format and namespace as the value of</span></span><br><span class="line"><span class="comment">     * the {<span class="doctag">@code</span> <span class="doctag">@since</span>} javadoc tag. The default value is the empty</span></span><br><span class="line"><span class="comment">     * string.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the version string</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 9</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">since</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicates whether the annotated element is subject to removal in a</span></span><br><span class="line"><span class="comment">     * future version. The default value is {<span class="doctag">@code</span> false}.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> whether the element is subject to removal</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 9</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">forRemoval</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li><code>since</code> 属性表示从哪个版本开始弃用</li><li><code>forRemoval</code> 表示未来是否会删除</li></ul><h1 id="string类底层优化">String 类底层优化</h1><ol type="1"><li>底层使用 <code>byte[]</code> 代替 <code>char[]</code>存储，当字符串是全英文的时候，可以节省空间</li><li>新增了 <code>COMPACT_STRINGS</code> 和 <code>coder</code>两个成员变量<ol type="1"><li><code>COMPACT_STRINGS</code>：是否压缩。true - 压缩；false - 不压缩，使用UTF16 编码格式</li><li><code>coder</code>：当前使用的编码。LATIN1 (0)- 拉丁，UTF16 (1)</li></ol></li></ol><h1 id="jmod-模块化">Jmod 模块化</h1><p>当我们开发 web 应用时， <code>Java</code>自带有很多无用的包也必须加载，如：awt、application…… 但是实际上我们用不到这些包。Java9模块化的特性将这些基础的包分成了各个模块，开发者可以通过module-info.java这个文件限制当前模块哪些类是可以开放给外界使用的，哪些类是我需要的</p><blockquote><p>对比 <a href="https://docs.oracle.com/javase/8/docs/api/index.html">Java8</a> 和<a href="https://docs.oracle.com/javase/9/docs/api/overview-summary.html">Java9</a>的官方文档，我们可以发现 Java9 的官方文档首页显示的是 module，而 Java8的是 package</p></blockquote><p>module-info.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> java9Demo {</span><br><span class="line">    <span class="keyword">requires</span> xxx;</span><br><span class="line">    <span class="keyword">exports</span> xxx; <span class="comment">// 导出包，表示允许访问指标包中的 public 成员</span></span><br><span class="line">    opens xxx2; <span class="comment">// 导出包，表示允许在运行时通过反射的形式访问</span></span><br><span class="line">    uses xxxInterface;</span><br><span class="line">    provides xxxInterface with xxxImplClass; <span class="comment">// 语句指定一个或多个服务接口的实现类</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>使用 <code>requires</code> 表示需要本模块依赖哪些接口</li><li>使用 <code>exports</code>表示本模块要开放哪些接口，即依赖方可以访问哪些包下面的 public资源，但是不可以通过反射访问，运行时会报错</li><li>使用 <code>opens</code>表示本模块哪些成员可以在，即依赖方可以在运行时通过反射的方式访问哪些资源，但是不可以直接访问，编译时会报错</li><li>使用 <code>uses</code>表示本模块的接口是需要依赖引用的模块实现的，使用服务接口的名字，当前模块就会发现它，使用<code>java.util.ServiceLoader</code>类进行加载，必须是本模块中的，不能是其他模块中的。其实现类可以由其他模块提供.</li><li> 使用 <code>provides xxxInterface with xxxImplClass</code>表示本模块的接口使用的哪个实现</li></ul><h1 id="jshell-工具">JShell 工具</h1><blockquote><p>类似于 node、ruby 等包含直接运行简单脚本的交互环境，Java9也添加了类似的环境，同时也可以类比一下浏览器的开发者工具的控制台，可以直接运行简单的js 脚本</p></blockquote><ul><li><p>通过 jshell 命令进入终端，然后写简单的语句即可实时获取结果</p><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="1678179847508" data-src="https://blog-pic-bed.oss-cn-beijing.aliyuncs.com/blog-pic1678179847508.png" style="width: 100%;"></p></div></li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;JAVA9 并非一个长期更新版本，但是其中的一些新特性也代表着 Java
更新的方向&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Java新特性" scheme="http://ann-zhgy.github.io/categories/Java%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="Java9新特性" scheme="http://ann-zhgy.github.io/tags/Java9%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>专题 —— 数据结构与算法 - 06 番外 - 表达式求值</title>
    <link href="http://ann-zhgy.github.io/2022/03/ef31f377.html"/>
    <id>http://ann-zhgy.github.io/2022/03/ef31f377.html</id>
    <published>2022-03-23T09:38:59.000Z</published>
    <updated>2023-11-15T06:22:06.589Z</updated>
    
    <content type="html"><![CDATA[<p><code>OperatorEnum</code>: 简单加减乘除的枚举类</p><span id="more"></span><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 操作符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">OperatorEnum</span> {</span><br><span class="line">    ADD(<span class="string">"+"</span>, <span class="number">1</span>) {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Number <span class="title function_">eval</span><span class="params">(<span class="meta">@NonNull</span> Number number1, <span class="meta">@NonNull</span> Number number2)</span> {</span><br><span class="line">            <span class="keyword">return</span> number1.doubleValue() + number2.doubleValue();</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    SUBTRACT(<span class="string">"-"</span>, <span class="number">1</span>) {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Number <span class="title function_">eval</span><span class="params">(<span class="meta">@NonNull</span> Number number1, <span class="meta">@NonNull</span> Number number2)</span> {</span><br><span class="line">            <span class="keyword">return</span> number1.doubleValue() - number2.doubleValue();</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    MULTIPLY(<span class="string">"*"</span>, <span class="number">2</span>) {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Number <span class="title function_">eval</span><span class="params">(<span class="meta">@NonNull</span> Number number1, <span class="meta">@NonNull</span> Number number2)</span> {</span><br><span class="line">            <span class="keyword">return</span> number1.doubleValue() * number2.doubleValue();</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    DIVIDE(<span class="string">"/"</span>, <span class="number">2</span>) {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Number <span class="title function_">eval</span><span class="params">(<span class="meta">@NonNull</span> Number number1, <span class="meta">@NonNull</span> Number number2)</span> {</span><br><span class="line">            <span class="keyword">return</span> number1.doubleValue() / number2.doubleValue();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作符 + - * /</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String operationalCharacter;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作符 优先级权重，越大优先级越高：乘除比加减的优先级高</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer priorityWeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Number <span class="title function_">eval</span><span class="params">(<span class="meta">@NonNull</span> Number number1, <span class="meta">@NonNull</span> Number number2)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OperatorEnum <span class="title function_">valueOfOperationalCharacter</span><span class="params">(String operationalCharacter)</span> {</span><br><span class="line">        <span class="keyword">for</span> (OperatorEnum value : values()) {</span><br><span class="line">            <span class="keyword">if</span> (value.operationalCharacter.equals(operationalCharacter)) {</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="表达式的前缀中缀后缀">表达式的前缀、中缀、后缀</h1><h2 id="中缀表达式中缀记法">中缀表达式（中缀记法）</h2><blockquote><p>a + (b + c) / d</p></blockquote><p>中缀表达式是一种通用的算数或逻辑公式的表示方法，操作符处于操作数之间，是最直观、人脑最容易理解的表达式，但是计算机并不容易理解</p><h2 id="前缀表达式前缀记法波兰式">前缀表达式（前缀记法、波兰式）</h2><blockquote><p>+ / + b c d a</p></blockquote><p>前缀表达式的操作符位于操作数之前</p><h3 id="计算机求值方式">计算机求值方式</h3><p>从右至左扫描表达式，遇到数字的时候，直接压入栈中，遇到运算符时，弹出两个操作数，计算结果并将结果压入栈中，重复此过程直到表达式最左端</p><p>例如 “<span class="math inline">\((3 + 4) \times 5 - 6\)</span>”-&gt;“- × + 3 4 5 6”：</p><ol type="1"><li>从右至左扫描，将 6、5、4、3 压入堆栈</li><li>遇到 <span class="math inline">\(+\)</span>运算符，因此弹出 3 和 4，计算出 <span class="math inline">\(3+4\)</span>的值，得 7，再将 7 入栈</li><li>接下来是 <span class="math inline">\(\times\)</span>运算符，因此弹出 7 和 5，计算出 <span class="math inline">\(7\times5=35\)</span> ，将 35 入栈</li><li>最后是 <span class="math inline">\(-\)</span> 运算符，计算出 <span class="math inline">\(35-6\)</span> 的值，即 29，由此得出最终结果 </li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Number <span class="title function_">eval</span><span class="params">(String expression)</span> {</span><br><span class="line">    Stack&lt;Number&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    List&lt;String&gt; operators = Arrays.stream(OperatorEnum.values())</span><br><span class="line">        .map(OperatorEnum::getOperationalCharacter)</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">    String[] split = expression.split(<span class="string">" "</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> split.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">operator</span> <span class="operator">=</span> split[i];</span><br><span class="line">        <span class="keyword">if</span> (!operators.contains(operator)) {</span><br><span class="line">            stack.push(Double.parseDouble(String.valueOf(operator)));</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">OperatorEnum</span> <span class="variable">operatorEnum</span> <span class="operator">=</span> OperatorEnum.valueOfOperationalCharacter(operator);</span><br><span class="line">        <span class="keyword">assert</span> operatorEnum != <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Number</span> <span class="variable">result</span> <span class="operator">=</span> operatorEnum.eval(stack.pop(), stack.pop());</span><br><span class="line">        stack.push(result);</span><br><span class="line">    }</span><br><span class="line">    <span class="type">Number</span> <span class="variable">result</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">    <span class="keyword">if</span> (!stack.isEmpty()) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">"表达式错误"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="后缀表达式后缀记法逆波兰式">后缀表达式（后缀记法，逆波兰式）</h2><blockquote><p>b c + d / a +</p></blockquote><p>后缀表达式的操作符位于操作数之后</p><h3 id="计算机求值方式-1">计算机求值方式</h3><p>与前缀表达式类似，只是顺序是从左至右：从左至右扫描表达式，遇到数字时，将数字压入堆栈，遇到运算符时，弹出栈顶的两个数，用运算符对它们做相应的计算（次顶元素op栈顶元素），并将结果入栈；重复上述过程直到表达式最右端，最后运算得出的值即为表达式的结果。例如 “<span class="math inline">\((3 + 4) \times 5 - 6\)</span>” -&gt;“34 + 5 × 6 -”：</p><ol type="1"><li>从左至右扫描，将 3 和 4 压入堆栈</li><li>遇到 <span class="math inline">\(+\)</span>运算符，因此弹出 4 和 3，计算出 <span class="math inline">\(3+4\)</span>的值，得 7，再将 7 入栈</li><li>将 5 入栈</li><li>接下来是 <span class="math inline">\(\times\)</span>运算符，因此弹出 5 和 7，计算出 <span class="math inline">\(7\times5=35\)</span> ，将 35 入栈</li><li>将 6 入栈</li><li>最后是 <span class="math inline">\(-\)</span> 运算符，计算出 <span class="math inline">\(35-6\)</span> 的值，即 29，由此得出最终结 </li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Number <span class="title function_">eval</span><span class="params">(String expression)</span> {</span><br><span class="line">    String[] split = expression.split(<span class="string">" "</span>);</span><br><span class="line">    Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> split.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">operator</span> <span class="operator">=</span> split[i];</span><br><span class="line">        stack.push(operator);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (stack.size() &gt; <span class="number">1</span>) {</span><br><span class="line">        <span class="type">Double</span> <span class="variable">number1</span> <span class="operator">=</span> Double.parseDouble(stack.pop());</span><br><span class="line">        <span class="type">Double</span> <span class="variable">number2</span> <span class="operator">=</span> Double.parseDouble(stack.pop());</span><br><span class="line">        <span class="type">String</span> <span class="variable">operatorChar</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        <span class="type">OperatorEnum</span> <span class="variable">operatorEnum</span> <span class="operator">=</span> OperatorEnum.valueOfOperationalCharacter(operatorChar);</span><br><span class="line">        <span class="keyword">assert</span> operatorEnum != <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Number</span> <span class="variable">result</span> <span class="operator">=</span> operatorEnum.eval(number1, number2);</span><br><span class="line">        stack.push(String.valueOf(result));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> Double.parseDouble(stack.pop());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="中缀表达式转换为前后缀表达式">中缀表达式转换为 [前 / 后] 缀表达式</h1><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;OperatorEnum&lt;/code&gt;: 简单加减乘除的枚举类&lt;/p&gt;</summary>
    
    
    
    
    <category term="栈应用" scheme="http://ann-zhgy.github.io/tags/%E6%A0%88%E5%BA%94%E7%94%A8/"/>
    
    <category term="表达式求值" scheme="http://ann-zhgy.github.io/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/"/>
    
  </entry>
  
  <entry>
    <title>专题 —— 数据结构与算法 - 05 线性表 - 栈、队列</title>
    <link href="http://ann-zhgy.github.io/2021/11/1f63d870.html"/>
    <id>http://ann-zhgy.github.io/2021/11/1f63d870.html</id>
    <published>2021-11-09T12:00:36.000Z</published>
    <updated>2023-11-15T06:22:06.589Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>栈和队列都是一种运算受限的线性表，因为其运算受限，所以才有一些优秀的特性</p></blockquote><h1 id="栈">栈</h1><blockquote><p>栈（stack）又名堆栈，它是一种运算受限的线性表。限定仅在表尾进行插入和删除操作的线性表。<code>&lt;right-bq&gt;</code>—— 来自<a href="https://baike.baidu.com/item/%E6%A0%88/12808149">百度百科</a><code>&lt;/right-bq&gt;</code></p></blockquote><span id="more"></span><h2 id="栈是什么">栈是什么</h2><p>栈是一种后进先出的线性结构，一个比较贴切的例子就是一摞叠在一起的盘子，我们总是会将盘子叠在原有的上面，取的时候也总是从最上面的开始取。<strong>后进者先出，先进者后出</strong>就是栈结构</p><h2 id="相关概念">相关概念</h2><ul><li>顺序栈：使用数组实现的栈</li><li>链式栈：使用链表实现的栈</li><li>栈顶：允许数据插入和删除的一端</li><li>栈底：栈顶的另一端</li><li>入栈 / 压栈 (push)：将数据插入栈</li><li>出栈 / 弹栈 (pop)：删除栈顶的数据</li></ul><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20220323162300" data-src="https://s2.loli.net/2022/03/23/EqO72l4RCiYWQmM.png" style="width: 100%;"></p></div><h2 id="复杂度">复杂度</h2><p>以顺序栈为例：在实现栈时，我们需要存储栈顶和栈底，所以弹栈和压栈都是<span class="math inline">\(O(1)\)</span>的时间复杂度，但是当栈满了之后继续压栈就需要扩容，若栈的容量为 <span class="math inline">\(k\)</span>，那么在进行了 <span class="math inline">\(k\)</span> 次压栈之后就需要一个 <span class="math inline">\(O(k)\)</span>的扩容，均摊下来之后，时间复杂度依旧为 <span class="math inline">\(O(1)\)</span></p><h2 id="栈的应用">栈的应用</h2><ol type="1"><li>浏览器的前进后退功能</li><li><code>JVM</code> 中的<strong>栈</strong>：程序运行总伴随着方法的调用，方法执行前会先保留现场，然后将参数、临时变量等信息封装为一个栈帧压入栈中，执行完毕之后将此栈帧从栈中弹出，所以递归调用时如果不设置方法出口 (`<code>return</code>) 就会发生栈溢出<code>StackOverflowError</code></li><li>表达式求值：可看后文</li><li>括号匹配</li></ol><h1 id="队列">队列</h1><blockquote><p><strong>队列</strong>，又称为<strong>伫列</strong>（queue），<a href="https://zh.wikipedia.org/wiki/計算機科學">计算机科学</a>中的一种<a href="https://zh.wikipedia.org/wiki/抽象資料型別">抽象资料型别</a>，是<a href="https://zh.wikipedia.org/wiki/先進先出演算法">先进先出</a>（FIFO,First-In-First-Out）的<a href="https://zh.wikipedia.org/wiki/线性表">线性表</a>。在具体应用中通常用<a href="https://zh.wikipedia.org/wiki/链表">链表</a>或者<a href="https://zh.wikipedia.org/wiki/数组">数组</a>来实现。队列只允许在后端（称为 <em>rear</em>）进行插入操作，在前端（称为 <em>front</em>）进行删除操作。<code>&lt;right-bq&gt;</code>—— 来自<a href="https://zh.wikipedia.org/wiki/%E9%98%9F%E5%88%97">维基百科</a><code>&lt;/right-bq&gt;</code></p></blockquote><h2 id="队列是什么">队列是什么</h2><p>队列是一种先进先出的结构，比较贴切的例子就是排队买票，先来的先买，后来的排到队尾，不可以插队。<strong>先进者先出</strong>就是队列</p><h2 id="相关概念-1">相关概念</h2><ul><li>顺序队列：使用数组实现的队列</li><li>链式队列：使用链表实现的队列</li><li>循环队列：队首队尾相连的队列</li><li>阻塞队列：当队列为空时，不允许出队操作，当队列满时，不允许入队操作</li><li>并发队列：可以保证并发时线程安全的队列</li><li>队首 (front)：可以进行出队的一端</li><li>队尾 (rear)：可以进行入队的一端</li><li>入队 (enqueue)：将数据插入到队列中</li><li>出队 (dequeue)：从队列中取出数据</li></ul><div style="max-width: 75%; margin: auto; opacity: 0.95;"><p><img alt="20220323173707" data-src="https://s2.loli.net/2022/03/23/WyksNeIJhMKi8bO.png" style="width: 100%;"></p></div>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;栈和队列都是一种运算受限的线性表，因为其运算受限，所以才有一些优秀的特性&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;栈&quot;&gt;栈&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;栈（stack）又名堆栈，它是一种运算受限的线性表。限定仅在表尾进行插入和删除操作的线性表。&lt;code&gt;&amp;lt;right-bq&amp;gt;&lt;/code&gt;—— 来自&lt;a href=&quot;https://baike.baidu.com/item/%E6%A0%88/12808149&quot;&gt;百度百科&lt;/a&gt;&lt;code&gt;&amp;lt;/right-bq&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="数据结构与算法" scheme="http://ann-zhgy.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="栈" scheme="http://ann-zhgy.github.io/tags/%E6%A0%88/"/>
    
    <category term="队列" scheme="http://ann-zhgy.github.io/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>数据结构与算法 - 线性表 - 链表注意事项</title>
    <link href="http://ann-zhgy.github.io/2021/11/3439f55d.html"/>
    <id>http://ann-zhgy.github.io/2021/11/3439f55d.html</id>
    <published>2021-11-04T08:12:10.000Z</published>
    <updated>2023-11-15T06:22:06.589Z</updated>
    
    <content type="html"><![CDATA[<h1 id="重要概念指针">重要概念 —— 指针</h1><blockquote><p>指针在不同的语言中叫法不同，比如在 C 语言中叫做指针，但是在 Java中叫做引用，虽然名字不同，但是实际上是同一种东西</p></blockquote><span id="more"></span><h2 id="指针是什么">指针是什么？</h2><p>指针是存储地址的变量，通过指针可以访问到该地址的数据。需要注意的是，指针变量只用来存储地址值，其并不关心该地址值是否可用，地址是否有效，寻址时才会关心这些</p><p>举个🌰：</p><p>今天天气不错，所以你在商场吃多了 (别问为啥，我也不知道)，吃多了之后你就想去厕所释放一下，但是你不知道厕所在哪，所以你问服务员，然后服务员给了你一个纸条，上面写着厕所的地址，这个纸条就可以理解成指针，因为它存储了厕所的地址</p><h2 id="c语言和其他语言的指针">C 语言和其他语言的指针</h2><p>C 语言的指针几乎可以访问任意数据，而指针所在的内存也是通过函数申请来的，所以在使用完之后需要手动释放内存空间。对于Java、Go 等有垃圾回收器的语言来说，就不需要手动释放内存了。</p><h1 id="哨兵">哨兵</h1><blockquote><p>哨兵：守卫边疆的英雄！</p></blockquote><p>哨兵节点就是边界节点 —— 头节点或尾节点（一般是头节点），这个节点不存储元素，目的是用来简化链表的实现难度，减少边界值的处理</p><h2 id="向空链表插入节点">向空链表插入节点</h2><p>向指定节点 p 后面插入节点时，只需要如下两行代码即可</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">newNode.next = p.next;</span><br><span class="line">p.next = newNode;</span><br></pre></td></tr></tbody></table></figure><p>但是向空链表插入节点时，因为没有头节点，所以需要将插入节点变为头节点</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (head == null) {</span><br><span class="line">    head = newNode;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="删除链表的最后一个节点">删除链表的最后一个节点</h2><blockquote><p>节点前面的节点叫做前驱节点，后面的叫做后继节点</p></blockquote><p>如果我们要删除某节点的后继节点，用下面一行代码即可搞定：</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.next = p.next.next;</span><br></pre></td></tr></tbody></table></figure><p>但是如果该节点是链表的最后一个节点，就不能这么删除了，需要进行判断</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (head.next == null) {</span><br><span class="line">    head = null;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="添加哨兵后">添加哨兵后</h2><blockquote><p>哨兵节点并不会存储任何数据，它就是单纯作为头节点存在的</p><p>有哨兵节点的链表叫做带头链表，反之则称为不带头链表</p></blockquote><p>向空链表插入节点时，<code>p</code> 就是 <code>head</code>节点，删除链表的最后一个节点时，<code>p</code> 还是 <code>head</code>节点，使用原有的逻辑即可</p><h1 id="一些注意点">一些注意点</h1><h2 id="善于画图">善于画图</h2><p>画图可以清晰地表达出逻辑关系，便于理解，同时，代码写完后画图走一遍也更容易找出bug</p><h2 id="注意边界条件">注意边界条件</h2><p>在软件开发中，代码在边界情况下极容易产生bug。比如链表，在实现的时候就需要考虑在边界条件下代码是否正常：</p><ul><li>链表为空时</li><li>只包含一个节点或只包含两个节点时</li><li>对于头尾节点的操作</li></ul><h2 id="多练习">多练习</h2><p>熟能生巧，通过大量的练习，我们可以找到很多写代码的感觉，积累很多经验</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;重要概念指针&quot;&gt;重要概念 —— 指针&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;指针在不同的语言中叫法不同，比如在 C 语言中叫做指针，但是在 Java
中叫做引用，虽然名字不同，但是实际上是同一种东西&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="数据结构与算法" scheme="http://ann-zhgy.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="链表" scheme="http://ann-zhgy.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
    <category term="指针" scheme="http://ann-zhgy.github.io/tags/%E6%8C%87%E9%92%88/"/>
    
    <category term="哨兵" scheme="http://ann-zhgy.github.io/tags/%E5%93%A8%E5%85%B5/"/>
    
  </entry>
  
</feed>
